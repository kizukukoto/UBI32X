<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_hcd_linux.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dwc_otg_hcd_linux.c File Reference</h1>This file contains the implementation of the HCD. <a href="#_details">More...</a>
<p>
<code>#include &lt;linux/kernel.h&gt;</code><br>
<code>#include &lt;linux/module.h&gt;</code><br>
<code>#include &lt;linux/moduleparam.h&gt;</code><br>
<code>#include &lt;linux/init.h&gt;</code><br>
<code>#include &lt;linux/device.h&gt;</code><br>
<code>#include &lt;linux/errno.h&gt;</code><br>
<code>#include &lt;linux/list.h&gt;</code><br>
<code>#include &lt;linux/interrupt.h&gt;</code><br>
<code>#include &lt;linux/string.h&gt;</code><br>
<code>#include &lt;linux/dma-mapping.h&gt;</code><br>
<code>#include &lt;linux/version.h&gt;</code><br>
<code>#include &lt;asm/io.h&gt;</code><br>
<code>#include &lt;linux/usb.h&gt;</code><br>
<code>#include &lt;../drivers/usb/core/hcd.h&gt;</code><br>
<code>#include &quot;<a class="el" href="dwc__otg__hcd__if_8h-source.html">dwc_otg_hcd_if.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="dwc__otg__dbg_8h-source.html">dwc_otg_dbg.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="dwc__otg__driver_8h-source.html">dwc_otg_driver.h</a>&quot;</code><br>

<p>
<a href="dwc__otg__hcd__linux_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwrapper__priv__data.html">wrapper_priv_data</a></td></tr>

<tr><td colspan="2"><br><h2>Linux HC Driver API Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#d9e9c76f2bc1c4f662d132c710a95a60">urb_enqueue</a> (struct usb_hcd *hcd, struct usb_host_endpoint *ep, struct urb *urb, gfp_t mem_flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts processing a USB transfer request specified by a USB Request Block (URB).  <a href="#d9e9c76f2bc1c4f662d132c710a95a60"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#afc1f3d92fd7596140c0068bc96034f7">urb_dequeue</a> (struct usb_hcd *hcd, struct urb *urb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Aborts/cancels a USB transfer request.  <a href="#afc1f3d92fd7596140c0068bc96034f7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0aefc084c4c334dac85c95a43e8942c6"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::endpoint_disable" ref="0aefc084c4c334dac85c95a43e8942c6" args="(struct usb_hcd *hcd, struct usb_host_endpoint *ep)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#0aefc084c4c334dac85c95a43e8942c6">endpoint_disable</a> (struct usb_hcd *hcd, struct usb_host_endpoint *ep)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static irqreturn_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#1e911926e9d51d6d9d11f11b81da8c3d">dwc_otg_hcd_irq</a> (struct usb_hcd *hcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles host mode interrupts for the DWC_otg controller.  <a href="#1e911926e9d51d6d9d11f11b81da8c3d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#5d7f9da64cfeb32895d6c3d1366d45cf">hcd_start</a> (struct usb_hcd *hcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the DWC_otg controller and its root hub and prepares it for host mode operation.  <a href="#5d7f9da64cfeb32895d6c3d1366d45cf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#cbb6a9e932a0baf80d1fdb013ac5d679">hcd_stop</a> (struct usb_hcd *hcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Halts the DWC_otg host mode operations in a clean manner.  <a href="#cbb6a9e932a0baf80d1fdb013ac5d679"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c78128edb8902dc96534c5bb253f99a3"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::get_frame_number" ref="c78128edb8902dc96534c5bb253f99a3" args="(struct usb_hcd *hcd)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#c78128edb8902dc96534c5bb253f99a3">get_frame_number</a> (struct usb_hcd *hcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current frame number. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#108442f4aa4dc4663d8659241ed04e9c">hub_status_data</a> (struct usb_hcd *hcd, char *buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates Status Change bitmap for the root hub and root port.  <a href="#108442f4aa4dc4663d8659241ed04e9c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="55d196cab99083dabdacdee78dc5e339"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hub_control" ref="55d196cab99083dabdacdee78dc5e339" args="(struct usb_hcd *hcd, u16 typeReq, u16 wValue, u16 wIndex, char *buf, u16 wLength)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#55d196cab99083dabdacdee78dc5e339">hub_control</a> (struct usb_hcd *hcd, u16 typeReq, u16 wValue, u16 wIndex, char *buf, u16 wLength)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles hub class-specific requests. <br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#4a327046464cd55f8abafc4af8ef74aa">dwc_ep_addr_to_endpoint</a>(_bEndpointAddress_)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the endpoint number from a _bEndpointAddress argument.  <a href="#4a327046464cd55f8abafc4af8ef74aa"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bd8c86466ccd8ff8b94867d601e66116"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hcd_to_dwc_otg_hcd" ref="bd8c86466ccd8ff8b94867d601e66116" args="(struct usb_hcd *hcd)" -->
static <a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#bd8c86466ccd8ff8b94867d601e66116">hcd_to_dwc_otg_hcd</a> (struct usb_hcd *hcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the <a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a> from a struct usb_hcd. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e314b37c9e03857c2cad95724982ad42"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::dwc_otg_hcd_to_hcd" ref="e314b37c9e03857c2cad95724982ad42" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
static struct usb_hcd *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#e314b37c9e03857c2cad95724982ad42">dwc_otg_hcd_to_hcd</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the struct usb_hcd that contains a dwc_otg_hcd_t. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="99c594c1e3af2fa78b09c914cb334611"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::dwc_urb_to_endpoint" ref="99c594c1e3af2fa78b09c914cb334611" args="(struct urb *urb)" -->
usb_host_endpoint *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#99c594c1e3af2fa78b09c914cb334611">dwc_urb_to_endpoint</a> (struct urb *urb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the usb_host_endpoint associated with an URB. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8011f9b662a7f4182e762de616bbc95e"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::_disconnect" ref="8011f9b662a7f4182e762de616bbc95e" args="(dwc_otg_hcd_t *hcd)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#8011f9b662a7f4182e762de616bbc95e">_disconnect</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e11ebd665a86e6ec3fd661965acca90e"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::_start" ref="e11ebd665a86e6ec3fd661965acca90e" args="(dwc_otg_hcd_t *hcd)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#e11ebd665a86e6ec3fd661965acca90e">_start</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f4fe5a6082e7cce809f3e2a4cb71a7e4"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::_hub_info" ref="f4fe5a6082e7cce809f3e2a4cb71a7e4" args="(dwc_otg_hcd_t *hcd, void *urb_handle, uint32_t *hub_addr, uint32_t *port_addr)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#f4fe5a6082e7cce809f3e2a4cb71a7e4">_hub_info</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, void *urb_handle, uint32_t *hub_addr, uint32_t *port_addr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="22cff3e20b45ec02e81e54a1adacfa20"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::_speed" ref="22cff3e20b45ec02e81e54a1adacfa20" args="(dwc_otg_hcd_t *hcd, void *urb_handle)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#22cff3e20b45ec02e81e54a1adacfa20">_speed</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, void *urb_handle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="578b76a201e8e722e31afdcd2c35dac9"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::_get_b_hnp_enable" ref="578b76a201e8e722e31afdcd2c35dac9" args="(dwc_otg_hcd_t *hcd)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#578b76a201e8e722e31afdcd2c35dac9">_get_b_hnp_enable</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e270a6a091a674ccf6f390fdcf746b87"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::allocate_bus_bandwidth" ref="e270a6a091a674ccf6f390fdcf746b87" args="(struct usb_hcd *hcd, uint32_t bw, struct urb *urb)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#e270a6a091a674ccf6f390fdcf746b87">allocate_bus_bandwidth</a> (struct usb_hcd *hcd, uint32_t bw, struct urb *urb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="53fcd6fb7b833323112e8856070e88d8"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::free_bus_bandwidth" ref="53fcd6fb7b833323112e8856070e88d8" args="(struct usb_hcd *hcd, uint32_t bw, struct urb *urb)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#53fcd6fb7b833323112e8856070e88d8">free_bus_bandwidth</a> (struct usb_hcd *hcd, uint32_t bw, struct urb *urb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#a0d18986574c384e98aa280e0475a9aa">_complete</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, void *urb_handle, <a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *dwc_otg_urb, int32_t status)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the final status of an URB and returns it to the device driver.  <a href="#a0d18986574c384e98aa280e0475a9aa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#ab12cdf65bf4ed68545a6c17cc31269f">hcd_init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the HCD.  <a href="#ab12cdf65bf4ed68545a6c17cc31269f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#f36193b3ff33c0473956c8a15eee4f5b">hcd_remove</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the HCD.  <a href="#f36193b3ff33c0473956c8a15eee4f5b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="41b49c86957a3835934c2f26fee377df"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::dwc_otg_hcd_name" ref="41b49c86957a3835934c2f26fee377df" args="[]" -->
static const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#41b49c86957a3835934c2f26fee377df">dwc_otg_hcd_name</a> [] = &quot;dwc_otg_hcd&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct hc_driver&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#ab1d492c360b963d179798f2641c02a5">dwc_otg_hc_driver</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structdwc__otg__hcd__function__ops.html">dwc_otg_hcd_function_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd__linux_8c.html#430ee3db85940ea34a1702a37fbfb942">hcd_fops</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the implementation of the HCD. 
<p>
In Linux, the HCD implements the hc_driver API. 
<p>
Definition in file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="4a327046464cd55f8abafc4af8ef74aa"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::dwc_ep_addr_to_endpoint" ref="4a327046464cd55f8abafc4af8ef74aa" args="(_bEndpointAddress_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dwc_ep_addr_to_endpoint          </td>
          <td>(</td>
          <td class="paramtype">_bEndpointAddress_&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((_bEndpointAddress_ &amp; USB_ENDPOINT_NUMBER_MASK) | \
                                                     ((_bEndpointAddress_ &amp; USB_DIR_IN) != 0) &lt;&lt; 4)
</pre></div>Gets the endpoint number from a _bEndpointAddress argument. 
<p>
The endpoint is qualified with its direction (possible 32 endpoints per device). 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00071">71</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d9e9c76f2bc1c4f662d132c710a95a60"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::urb_enqueue" ref="d9e9c76f2bc1c4f662d132c710a95a60" args="(struct usb_hcd *hcd, struct usb_host_endpoint *ep, struct urb *urb, gfp_t mem_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int urb_enqueue           </td>
          <td>(</td>
          <td class="paramtype">struct usb_hcd *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct usb_host_endpoint *&nbsp;</td>
          <td class="paramname"> <em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct urb *&nbsp;</td>
          <td class="paramname"> <em>urb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfp_t&nbsp;</td>
          <td class="paramname"> <em>mem_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Starts processing a USB transfer request specified by a USB Request Block (URB). 
<p>
mem_flags indicates the type of memory allocation to use while processing this URB. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00562">562</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="afc1f3d92fd7596140c0068bc96034f7"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::urb_dequeue" ref="afc1f3d92fd7596140c0068bc96034f7" args="(struct usb_hcd *hcd, struct urb *urb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int urb_dequeue           </td>
          <td>(</td>
          <td class="paramtype">struct usb_hcd *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct urb *&nbsp;</td>
          <td class="paramname"> <em>urb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Aborts/cancels a USB transfer request. 
<p>
Always returns 0 to indicate success. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00667">667</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="1e911926e9d51d6d9d11f11b81da8c3d"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::dwc_otg_hcd_irq" ref="1e911926e9d51d6d9d11f11b81da8c3d" args="(struct usb_hcd *hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static irqreturn_t dwc_otg_hcd_irq           </td>
          <td>(</td>
          <td class="paramtype">struct usb_hcd *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles host mode interrupts for the DWC_otg controller. 
<p>
Returns IRQ_NONE if there was no interrupt to handle. Returns IRQ_HANDLED if there was a valid interrupt.<p>
This function is called by the USB core when an interrupt occurs 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00714">714</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="5d7f9da64cfeb32895d6c3d1366d45cf"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hcd_start" ref="5d7f9da64cfeb32895d6c3d1366d45cf" args="(struct usb_hcd *hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hcd_start           </td>
          <td>(</td>
          <td class="paramtype">struct usb_hcd *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the DWC_otg controller and its root hub and prepares it for host mode operation. 
<p>
Activates the root port. Returns 0 on success and a negative error code on failure. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00469">469</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="cbb6a9e932a0baf80d1fdb013ac5d679"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hcd_stop" ref="cbb6a9e932a0baf80d1fdb013ac5d679" args="(struct usb_hcd *hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hcd_stop           </td>
          <td>(</td>
          <td class="paramtype">struct usb_hcd *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Halts the DWC_otg host mode operations in a clean manner. 
<p>
USB transfers are stopped. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00496">496</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="108442f4aa4dc4663d8659241ed04e9c"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hub_status_data" ref="108442f4aa4dc4663d8659241ed04e9c" args="(struct usb_hcd *hcd, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hub_status_data           </td>
          <td>(</td>
          <td class="paramtype">struct usb_hcd *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates Status Change bitmap for the root hub and root port. 
<p>
The bitmap is returned in buf. Bit 0 is the status change indicator for the root hub. Bit 1 is the status change indicator for the single root port. Returns 1 if either change indicator is 1, otherwise returns 0. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00728">728</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="a0d18986574c384e98aa280e0475a9aa"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::_complete" ref="a0d18986574c384e98aa280e0475a9aa" args="(dwc_otg_hcd_t *hcd, void *urb_handle, dwc_otg_hcd_urb_t *dwc_otg_urb, int32_t status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int _complete           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>urb_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_otg_urb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the final status of an URB and returns it to the device driver. 
<p>
Any required cleanup of the URB is performed. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00224">224</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="ab12cdf65bf4ed68545a6c17cc31269f"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hcd_init" ref="ab12cdf65bf4ed68545a6c17cc31269f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hcd_init           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the HCD. 
<p>
This function allocates memory for and initializes the static parts of the usb_hcd and <a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a> structures. It also registers the USB bus with the core and calls the hc_driver-&gt;start() function. It returns a negative error on failure. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00327">327</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="f36193b3ff33c0473956c8a15eee4f5b"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hcd_remove" ref="f36193b3ff33c0473956c8a15eee4f5b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hcd_remove           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes the HCD. 
<p>
Frees memory and resources associated with the HCD and deregisters the bus. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00417">417</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="ab1d492c360b963d179798f2641c02a5"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::dwc_otg_hc_driver" ref="ab1d492c360b963d179798f2641c02a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct hc_driver <a class="el" href="dwc__otg__hcd__linux_8c.html#ab1d492c360b963d179798f2641c02a5">dwc_otg_hc_driver</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {

        .description = <a class="code" href="dwc__otg__hcd__linux_8c.html#41b49c86957a3835934c2f26fee377df">dwc_otg_hcd_name</a>,
        .product_desc = <span class="stringliteral">"DWC OTG Controller"</span>,
        .hcd_priv_size = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structwrapper__priv__data.html">wrapper_priv_data</a>),

        .irq = <a class="code" href="dwc__otg__hcd__linux_8c.html#1e911926e9d51d6d9d11f11b81da8c3d">dwc_otg_hcd_irq</a>,

        .flags = HCD_MEMORY | HCD_USB2,

        
        .start = <a class="code" href="dwc__otg__cil__intr_8c.html#fc2d933cd662b3d060747004c79203a1">hcd_start</a>,
        
        
        .stop = <a class="code" href="dwc__otg__cil__intr_8c.html#b2721d01cc389181470095955b4e0994">hcd_stop</a>,

        .urb_enqueue = <a class="code" href="dwc__otg__hcd__linux_8c.html#d9e9c76f2bc1c4f662d132c710a95a60">urb_enqueue</a>,
        .urb_dequeue = <a class="code" href="dwc__otg__hcd__linux_8c.html#afc1f3d92fd7596140c0068bc96034f7">urb_dequeue</a>,
        .endpoint_disable = <a class="code" href="dwc__otg__hcd__linux_8c.html#0aefc084c4c334dac85c95a43e8942c6">endpoint_disable</a>,

        .get_frame_number = <a class="code" href="dwc__otg__hcd__linux_8c.html#c78128edb8902dc96534c5bb253f99a3">get_frame_number</a>,

        .hub_status_data = <a class="code" href="dwc__otg__hcd__linux_8c.html#108442f4aa4dc4663d8659241ed04e9c">hub_status_data</a>,
        .hub_control = <a class="code" href="dwc__otg__hcd__linux_8c.html#55d196cab99083dabdacdee78dc5e339">hub_control</a>,
        
        
}
</pre></div>
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00101">101</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<a class="anchor" name="430ee3db85940ea34a1702a37fbfb942"></a><!-- doxytag: member="dwc_otg_hcd_linux.c::hcd_fops" ref="430ee3db85940ea34a1702a37fbfb942" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdwc__otg__hcd__function__ops.html">dwc_otg_hcd_function_ops</a> <a class="el" href="dwc__otg__hcd__linux_8c.html#430ee3db85940ea34a1702a37fbfb942">hcd_fops</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .start = <a class="code" href="dwc__otg__hcd__linux_8c.html#e11ebd665a86e6ec3fd661965acca90e">_start</a>,
        .disconnect = <a class="code" href="dwc__otg__hcd__linux_8c.html#8011f9b662a7f4182e762de616bbc95e">_disconnect</a>,
        .hub_info = <a class="code" href="dwc__otg__hcd__linux_8c.html#f4fe5a6082e7cce809f3e2a4cb71a7e4">_hub_info</a>,
        .speed = <a class="code" href="dwc__otg__hcd__linux_8c.html#22cff3e20b45ec02e81e54a1adacfa20">_speed</a>,
        .complete = <a class="code" href="dwc__otg__hcd__linux_8c.html#a0d18986574c384e98aa280e0475a9aa">_complete</a>,
        .get_b_hnp_enable = <a class="code" href="dwc__otg__hcd__linux_8c.html#578b76a201e8e722e31afdcd2c35dac9">_get_b_hnp_enable</a>,
}
</pre></div>
<p>
Definition at line <a class="el" href="dwc__otg__hcd__linux_8c-source.html#l00312">312</a> of file <a class="el" href="dwc__otg__hcd__linux_8c-source.html">dwc_otg_hcd_linux.c</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:49 2009 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
