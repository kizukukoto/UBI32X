<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_pcd_intr.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dwc_otg_pcd_intr.c File Reference</h1>This file contains the implementation of the PCD Interrupt handlers. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="dwc__otg__pcd_8h-source.html">dwc_otg_pcd.h</a>&quot;</code><br>

<p>
<a href="dwc__otg__pcd__intr_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1d4105869a3a5ce989afa5124218de0a"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::DEBUG_EP0" ref="1d4105869a3a5ce989afa5124218de0a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#1d4105869a3a5ce989afa5124218de0a">DEBUG_EP0</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLEAR_IN_EP_INTR</b>(__core_if, __epnum, __intr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLEAR_OUT_EP_INTR</b>(__core_if, __epnum, __intr)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="81a9361b81863cef6b2566ea44529185"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_update_otg" ref="81a9361b81863cef6b2566ea44529185" args="(dwc_otg_pcd_t *pcd, const unsigned reset)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#81a9361b81863cef6b2566ea44529185">dwc_otg_pcd_update_otg</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const unsigned reset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function updates OTG. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="13cc45eef95b81189df890c10cf7ca66"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::print_ep0_state" ref="13cc45eef95b81189df890c10cf7ca66" args="(dwc_otg_pcd_t *pcd)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#13cc45eef95b81189df890c10cf7ca66">print_ep0_state</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function prints the ep0 state for debug purposes. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cc3f2f1ae0ab7d33903a1d0d9097c04e"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::get_in_ep" ref="cc3f2f1ae0ab7d33903a1d0d9097c04e" args="(dwc_otg_pcd_t *pcd, uint32_t ep_num)" -->
static <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#cc3f2f1ae0ab7d33903a1d0d9097c04e">get_in_ep</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, uint32_t ep_num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns pointer to in ep struct with number ep_num. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fbd54e53e1968d3b4798ea1b63b52f74"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::get_out_ep" ref="fbd54e53e1968d3b4798ea1b63b52f74" args="(dwc_otg_pcd_t *pcd, uint32_t ep_num)" -->
static <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#fbd54e53e1968d3b4798ea1b63b52f74">get_out_ep</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, uint32_t ep_num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns pointer to out ep struct with number ep_num. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3c351d7f51d6242296d6ea3bb1a9775c"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::get_ep_by_addr" ref="3c351d7f51d6242296d6ea3bb1a9775c" args="(dwc_otg_pcd_t *pcd, u16 wIndex)" -->
<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#3c351d7f51d6242296d6ea3bb1a9775c">get_ep_by_addr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, u16 wIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This functions gets a pointer to an EP from the wIndex address value of the control request. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="de7160b7e7b8fd622ba95392513e197c"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::start_next_request" ref="de7160b7e7b8fd622ba95392513e197c" args="(dwc_otg_pcd_ep_t *ep)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#de7160b7e7b8fd622ba95392513e197c">start_next_request</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tasklet. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#669296a786dcd89220efa8d7f62b10d0">dwc_otg_pcd_handle_sof_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles the SOF Interrupts.  <a href="#669296a786dcd89220efa8d7f62b10d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#99560d3941c21dedd1fb1fc846cea24f">dwc_otg_pcd_handle_rx_status_q_level_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles the Rx Status Queue Level Interrupt, which indicates that there is a least one packet in the Rx FIFO.  <a href="#99560d3941c21dedd1fb1fc846cea24f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#fde237571d3aaa5d03376d3bee827075">get_ep_of_last_in_token</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function examines the Device IN Token Learning Queue to determine the EP number of the last IN token received.  <a href="#fde237571d3aaa5d03376d3bee827075"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#bc463d6cebcf3da1989eb6d252979554">dwc_otg_pcd_handle_np_tx_fifo_empty_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt occurs when the non-periodic Tx FIFO is half-empty.  <a href="#bc463d6cebcf3da1989eb6d252979554"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#5e53962e63763aa9df6400981b7d5354">write_empty_tx_fifo</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when dedicated Tx FIFO Empty interrupt occurs.  <a href="#5e53962e63763aa9df6400981b7d5354"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#19e17d6a73d8a3ebf00a1d11999a5ff9">dwc_otg_pcd_stop</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when the Device is disconnected.  <a href="#19e17d6a73d8a3ebf00a1d11999a5ff9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#7d52ad6b49e7495df6c1788b325c510c">dwc_otg_pcd_handle_i2c_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that .  <a href="#7d52ad6b49e7495df6c1788b325c510c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#51b8dd218b31a7d79f5cef82c2a497aa">dwc_otg_pcd_handle_early_suspend_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that .  <a href="#51b8dd218b31a7d79f5cef82c2a497aa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#726b57833bb3ae4648ce7e7a7e125bf7">ep0_out_start</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function configures EPO to receive SETUP packets.  <a href="#726b57833bb3ae4648ce7e7a7e125bf7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#84746037a82c1f69287033338991d34a">dwc_otg_pcd_handle_usb_reset_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt occurs when a USB Reset is detected.  <a href="#84746037a82c1f69287033338991d34a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#6a3ddac8955990b9a63646c40c65446b">get_device_speed</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the device speed from the device status register and convert it to USB speed constant.  <a href="#6a3ddac8955990b9a63646c40c65446b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#c8003957f588b4bb57061208ea031468">dwc_otg_pcd_handle_enum_done_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the device status register and set the device speed in the data structure.  <a href="#c8003957f588b4bb57061208ea031468"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#7dbc68baede550f27e1507bca8e16c3b">dwc_otg_pcd_handle_isoc_out_packet_dropped_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that the ISO OUT Packet was dropped due to Rx FIFO full or Rx Status Queue Full.  <a href="#7dbc68baede550f27e1507bca8e16c3b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a0826c93566bb0144e2fce79fd5d459a">dwc_otg_pcd_handle_end_periodic_frame_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates the end of the portion of the micro-frame for periodic transactions.  <a href="#a0826c93566bb0144e2fce79fd5d459a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#c45cbe24b507cba84465299e2069ab43">dwc_otg_pcd_handle_ep_mismatch_intr</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that EP of the packet on the top of the non-periodic Tx FIFO does not match EP of the IN Token received.  <a href="#c45cbe24b507cba84465299e2069ab43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="325b13e198ff56e9de2600ac7f28a57d"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::ep0_do_stall" ref="325b13e198ff56e9de2600ac7f28a57d" args="(dwc_otg_pcd_t *pcd, const int err_val)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#325b13e198ff56e9de2600ac7f28a57d">ep0_do_stall</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const int err_val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This funcion stalls EP0. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#6c417c7d86bc9540e13ca4faeaf3dfbf">do_gadget_setup</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, usb_device_request_t *ctrl)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This functions delegates the setup command to the gadget driver.  <a href="#6c417c7d86bc9540e13ca4faeaf3dfbf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="39d3face14e49b0f1ad5c978f87665fe"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_setup_in_status_phase" ref="39d3face14e49b0f1ad5c978f87665fe" args="(dwc_otg_pcd_t *pcd)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#39d3face14e49b0f1ad5c978f87665fe">do_setup_in_status_phase</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function starts the Zero-Length Packet for the IN status phase of a 2 stage control transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cce0022b7577cda90a2d2e78e1f8171b"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_setup_out_status_phase" ref="cce0022b7577cda90a2d2e78e1f8171b" args="(dwc_otg_pcd_t *pcd)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#cce0022b7577cda90a2d2e78e1f8171b">do_setup_out_status_phase</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function starts the Zero-Length Packet for the OUT status phase of a 2 stage control transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#153d9a3b2162ef091dc24027379af19f">pcd_clear_halt</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear the EP halt (STALL) and if pending requests start the transfer.  <a href="#153d9a3b2162ef091dc24027379af19f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#9d6d6e24faab6478aef9e2217c9b5ab9">do_test_mode</a> (void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when the SET_FEATURE TEST_MODE Setup packet is sent from the host.  <a href="#9d6d6e24faab6478aef9e2217c9b5ab9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#f449add2b4e8de7ced10fd1bb4c5b748">do_get_status</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the GET_STATUS Setup Commands.  <a href="#f449add2b4e8de7ced10fd1bb4c5b748"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#3754b29956ab3a85851dea376e046db9">do_set_feature</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the SET_FEATURE Setup Commands.  <a href="#3754b29956ab3a85851dea376e046db9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#2198ea3f0136465fa325a189d4ba5140">do_clear_feature</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the CLEAR_FEATURE Setup Commands.  <a href="#2198ea3f0136465fa325a189d4ba5140"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f653efb69491b3e293cab4a33940ac3d"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_set_address" ref="f653efb69491b3e293cab4a33940ac3d" args="(dwc_otg_pcd_t *pcd)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#f653efb69491b3e293cab4a33940ac3d">do_set_address</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the SET_ADDRESS Setup Commands. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#856a520a378e4f6f274253227080cfa1">pcd_setup</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function processes SETUP commands.  <a href="#856a520a378e4f6f274253227080cfa1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f64bfae20151c51d3b0a6d4e523f356e"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::ep0_complete_request" ref="f64bfae20151c51d3b0a6d4e523f356e" args="(dwc_otg_pcd_ep_t *ep)" -->
static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#f64bfae20151c51d3b0a6d4e523f356e">ep0_complete_request</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function completes the ep0 control transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#c77f277130ba55b19100bde598da7d85">complete_ep</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function completes the request for the EP.  <a href="#c77f277130ba55b19100bde598da7d85"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1edc1970063b8383cda91e9d8581f3ac"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_iso_bna" ref="1edc1970063b8383cda91e9d8581f3ac" args="(dwc_otg_pcd_ep_t *ep)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#1edc1970063b8383cda91e9d8581f3ac">dwc_otg_pcd_handle_iso_bna</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function BNA interrupt for Isochronous EPs. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#17428b2360118cc59ab9d5cbcef8a14b">set_current_pkt_info</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets latest iso packet information(non-PTI mode).  <a href="#17428b2360118cc59ab9d5cbcef8a14b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#e5ed26b3ab2380cb92773df1720ec752">set_ddma_iso_pkts_info</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *<a class="el" href="structdwc__ep.html">dwc_ep</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets latest iso packet information(DDMA mode).  <a href="#e5ed26b3ab2380cb92773df1720ec752"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#c3f6fb3131e0786ec75a9c4a29fea297">reinit_ddma_iso_xfer</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *<a class="el" href="structdwc__ep.html">dwc_ep</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function reinitialize DMA Descriptors for Isochronous transfer.  <a href="#c3f6fb3131e0786ec75a9c4a29fea297"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#41cfc0d590740640795b350998bcc2c4">handle_iso_out_pkt_dropped</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *<a class="el" href="structdwc__ep.html">dwc_ep</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is to handle Iso EP transfer complete interrupt in case Iso out packet was dropped.  <a href="#41cfc0d590740640795b350998bcc2c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a356ecc4053e9700785a27dbfdd6b2db">set_iso_pkts_info</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets iso packets information(PTI mode).  <a href="#a356ecc4053e9700785a27dbfdd6b2db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#05965765a43225780ae08f2c3928f782">complete_iso_ep</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is to handle Iso EP transfer complete interrupt.  <a href="#05965765a43225780ae08f2c3928f782"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#4991119b51de03163a3677c36bc0ee3b">handle_ep0</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles EP0 Control transfers.  <a href="#4991119b51de03163a3677c36bc0ee3b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ed405cebf67cd1a89efd15a2935c8cef"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::restart_transfer" ref="ed405cebf67cd1a89efd15a2935c8cef" args="(dwc_otg_pcd_t *pcd, const uint32_t epnum)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#ed405cebf67cd1a89efd15a2935c8cef">restart_transfer</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Restart transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6c9df42abc5cb6f676a44918207c91b7"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_in_ep_disable_intr" ref="6c9df42abc5cb6f676a44918207c91b7" args="(dwc_otg_pcd_t *pcd, const uint32_t epnum)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#6c9df42abc5cb6f676a44918207c91b7">handle_in_ep_disable_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">handle the IN EP disable interrupt. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#65d4f747d13e368916ee0e16d202119b">handle_in_ep_timeout_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the IN EP timeout handshake interrupt.  <a href="#65d4f747d13e368916ee0e16d202119b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#273ccc8e8cdb9e2075844f2f922b53bf">handle_in_ep_nak_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the IN EP NAK interrupt.  <a href="#273ccc8e8cdb9e2075844f2f922b53bf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#42aef7ea134cccf7cdb53e7e1428bc4a">handle_out_ep_babble_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the OUT EP Babble interrupt.  <a href="#42aef7ea134cccf7cdb53e7e1428bc4a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#252929e585c84eaf0485869cd7734244">handle_out_ep_nak_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the OUT EP NAK interrupt.  <a href="#252929e585c84eaf0485869cd7734244"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#926d9068c1950cc406d50828e72a31db">handle_out_ep_nyet_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the OUT EP NYET interrupt.  <a href="#926d9068c1950cc406d50828e72a31db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#321d4a511db985443b132c044fc2d69e">dwc_otg_pcd_handle_in_ep_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that an IN EP has a pending Interrupt.  <a href="#321d4a511db985443b132c044fc2d69e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#8b24f400f2eb83ea262e27f5cd1bb707">dwc_otg_pcd_handle_out_ep_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that an OUT EP has a pending Interrupt.  <a href="#8b24f400f2eb83ea262e27f5cd1bb707"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#aa9fd9a6774ed616e31df65fe326351b">dwc_otg_pcd_handle_incomplete_isoc_in_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Incomplete ISO IN Transfer Interrupt.  <a href="#aa9fd9a6774ed616e31df65fe326351b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#8277c5761c3865fbb3646ba496a4901e">dwc_otg_pcd_handle_incomplete_isoc_out_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Incomplete ISO OUT Transfer Interrupt.  <a href="#8277c5761c3865fbb3646ba496a4901e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c24d0c885fe79e75d6f738fd9bd9c0d7"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_in_nak_effective" ref="c24d0c885fe79e75d6f738fd9bd9c0d7" args="(dwc_otg_pcd_t *pcd)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#c24d0c885fe79e75d6f738fd9bd9c0d7">dwc_otg_pcd_handle_in_nak_effective</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles the Global IN NAK Effective interrupt. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="81859010d39b3d8f3348ad0c3ec52ba7"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_out_nak_effective" ref="81859010d39b3d8f3348ad0c3ec52ba7" args="(dwc_otg_pcd_t *pcd)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#81859010d39b3d8f3348ad0c3ec52ba7">dwc_otg_pcd_handle_out_nak_effective</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OUT NAK Effective. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#fc60361217d0c5c089f4036d73690689">dwc_otg_pcd_handle_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function should be called on every hardware interrupt.  <a href="#fc60361217d0c5c089f4036d73690689"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the implementation of the PCD Interrupt handlers. 
<p>
The PCD handles the device interrupts. Many conditions can cause a device interrupt. When an interrupt occurs, the device interrupt service routine determines the cause of the interrupt and dispatches handling to the appropriate function. These interrupt handling functions are described below. All interrupt registers are processed from LSB to MSB. 
<p>
Definition in file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="d52033d9f52a0eb279293001990b187c"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::CLEAR_IN_EP_INTR" ref="d52033d9f52a0eb279293001990b187c" args="(__core_if, __epnum, __intr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLEAR_IN_EP_INTR          </td>
          <td>(</td>
          <td class="paramtype">__core_if,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__epnum,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__intr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
                <a class="code" href="uniondiepint__data.html">diepint_data_t</a> diepint = {.d32=0}; \
                diepint.<a class="code" href="uniondiepint__data.html#48d2a745e0ec983a47b35b0428b0437d">b</a>.__intr = 1; \
                dwc_write_reg32(&amp;__core_if-&gt;dev_if-&gt;in_ep_regs[__epnum]-&gt;diepint, \
                diepint.<a class="code" href="uniondiepint__data.html#7d2c24507663bf96c280c57fbf544ef7">d32</a>); \
} <span class="keywordflow">while</span> (0)
</pre></div>
</div>
</div><p>
<a class="anchor" name="d6d2a852568e99dc9f19f5a61e6c8fb3"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::CLEAR_OUT_EP_INTR" ref="d6d2a852568e99dc9f19f5a61e6c8fb3" args="(__core_if, __epnum, __intr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLEAR_OUT_EP_INTR          </td>
          <td>(</td>
          <td class="paramtype">__core_if,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__epnum,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__intr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
                <a class="code" href="uniondoepint__data.html">doepint_data_t</a> doepint = {.d32=0}; \
                doepint.<a class="code" href="uniondoepint__data.html#9e966d9f85589f278dc2c0d0c7833856">b</a>.__intr = 1; \
                dwc_write_reg32(&amp;__core_if-&gt;dev_if-&gt;out_ep_regs[__epnum]-&gt;doepint, \
                doepint.<a class="code" href="uniondoepint__data.html#94f8c8fc116b430565f9322e3621b3a5">d32</a>); \
} <span class="keywordflow">while</span> (0)
</pre></div>
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="669296a786dcd89220efa8d7f62b10d0"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_sof_intr" ref="669296a786dcd89220efa8d7f62b10d0" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_sof_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function handles the SOF Interrupts. 
<p>
At this time the SOF Interrupt is disabled. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00252">252</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="99560d3941c21dedd1fb1fc846cea24f"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_rx_status_q_level_intr" ref="99560d3941c21dedd1fb1fc846cea24f" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_rx_status_q_level_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function handles the Rx Status Queue Level Interrupt, which indicates that there is a least one packet in the Rx FIFO. 
<p>
The packets are moved from the FIFO to memory, where they will be processed when the Endpoint Interrupt Register indicates Transfer Complete or SETUP Phase Done.<p>
Repeat the following until the Rx Status Queue is empty:<ol type=1>
<li>Read the Receive Status Pop Register (GRXSTSP) to get Packet info</li><li>If Receive FIFO is empty then skip to step Clear the interrupt and exit</li><li>If SETUP Packet call dwc_otg_read_setup_packet to copy the SETUP data to the buffer</li><li>If OUT Data Packet call dwc_otg_read_packet to copy the data to the destination buffer </li></ol>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000026">Todo:</a></b></dt><dd>NGS Check for buffer overflow? </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00285">285</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="fde237571d3aaa5d03376d3bee827075"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::get_ep_of_last_in_token" ref="fde237571d3aaa5d03376d3bee827075" args="(dwc_otg_core_if_t *core_if)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int get_ep_of_last_in_token           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function examines the Device IN Token Learning Queue to determine the EP number of the last IN token received. 
<p>
This implementation is for the Mass Storage device where there are only 2 IN EPs (Control-IN and BULK-IN).<p>
The EP numbers for the first six IN Tokens are in DTKNQR1 and there are 8 EP Numbers in each of the other possible DTKNQ Registers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
  </table>
</dl>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000027">Todo:</a></b></dt><dd>Find a simpler way to calculate the max queue position. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00378">378</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="bc463d6cebcf3da1989eb6d252979554"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_np_tx_fifo_empty_intr" ref="bc463d6cebcf3da1989eb6d252979554" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_np_tx_fifo_empty_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt occurs when the non-periodic Tx FIFO is half-empty. 
<p>
The active request is checked for the next packet to be loaded into the non-periodic Tx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00451">451</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="5e53962e63763aa9df6400981b7d5354"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::write_empty_tx_fifo" ref="5e53962e63763aa9df6400981b7d5354" args="(dwc_otg_pcd_t *pcd, uint32_t epnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t write_empty_tx_fifo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>epnum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called when dedicated Tx FIFO Empty interrupt occurs. 
<p>
The active request is checked for the next packet to be loaded into apropriate Tx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00515">515</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="19e17d6a73d8a3ebf00a1d11999a5ff9"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_stop" ref="19e17d6a73d8a3ebf00a1d11999a5ff9" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_pcd_stop           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called when the Device is disconnected. 
<p>
It stops any active requests and informs the Gadget driver of the disconnect. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000028">Todo:</a></b></dt><dd>NGS Flush Periodic FIFOs </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00573">573</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="7d52ad6b49e7495df6c1788b325c510c"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_i2c_intr" ref="7d52ad6b49e7495df6c1788b325c510c" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_i2c_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates that . 
<p>
.. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00632">632</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="51b8dd218b31a7d79f5cef82c2a497aa"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_early_suspend_intr" ref="51b8dd218b31a7d79f5cef82c2a497aa" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_early_suspend_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates that . 
<p>
.. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00653">653</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="726b57833bb3ae4648ce7e7a7e125bf7"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::ep0_out_start" ref="726b57833bb3ae4648ce7e7a7e125bf7" args="(dwc_otg_core_if_t *core_if, dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ep0_out_start           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function configures EPO to receive SETUP packets. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>NGS: Update the comments from the HW FS.</dd></dl>
<ol type=1>
<li>Program the following fields in the endpoint specific registers for Control OUT EP 0, in order to receive a setup packet</li></ol>
<ul>
<li>DOEPTSIZ0.Packet Count = 3 (To receive up to 3 back to back setup packets)</li><li>DOEPTSIZE0.Transfer Size = 24 Bytes (To receive up to 3 back to back setup packets)<ul>
<li>In DMA mode, DOEPDMA0 Register with a memory address to store any setup packets received</li></ul>
</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>Programming view of the PCD. </td></tr>
  </table>
</dl>

<p>
put here as for Hermes mode deptisz register should not be written<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>dma needs to handle multiple setup packets (up to 3) </dd></dl>
<p>
DMA Descriptor Setup<p>
DOEPDMA0 Register write<p>
put here as for Hermes mode deptisz register should not be written<p>
DOEPCTL0 Register write 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00684">684</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="84746037a82c1f69287033338991d34a"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_usb_reset_intr" ref="84746037a82c1f69287033338991d34a" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_usb_reset_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt occurs when a USB Reset is detected. 
<p>
When the USB Reset Interrupt occurs the device state is set to DEFAULT and the EP0 state is set to IDLE.<ol type=1>
<li>Set the NAK bit for all OUT endpoints (DOEPCTLn.SNAK = 1)</li><li>Unmask the following interrupt bits<ul>
<li>DAINTMSK.INEP0 = 1 (Control 0 IN endpoint)</li></ul>
</li></ol>
<ul>
<li>DAINTMSK.OUTEP0 = 1 (Control 0 OUT endpoint)</li><li>DOEPMSK.SETUP = 1</li><li>DOEPMSK.XferCompl = 1</li><li>DIEPMSK.XferCompl = 1</li><li>DIEPMSK.TimeOut = 1</li></ul>
<ol type=1>
<li>Program the following fields in the endpoint specific registers for Control OUT EP 0, in order to receive a setup packet</li></ol>
<ul>
<li>DOEPTSIZ0.Packet Count = 3 (To receive up to 3 back to back setup packets)</li><li>DOEPTSIZE0.Transfer Size = 24 Bytes (To receive up to 3 back to back setup packets)<ul>
<li>In DMA mode, DOEPDMA0 Register with a memory address to store any setup packets received At this point, all the required initialization, except for enabling the control 0 OUT endpoint is done, for receiving SETUP packets. </li></ul>
</li></ul>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00772">772</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="6a3ddac8955990b9a63646c40c65446b"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::get_device_speed" ref="6a3ddac8955990b9a63646c40c65446b" args="(dwc_otg_core_if_t *core_if)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int get_device_speed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the device speed from the device status register and convert it to USB speed constant. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00928">928</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="c8003957f588b4bb57061208ea031468"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_enum_done_intr" ref="c8003957f588b4bb57061208ea031468" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_enum_done_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the device status register and set the device speed in the data structure. 
<p>
Set up EP0 to receive SETUP packets by calling dwc_ep0_activate. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00956">956</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="7dbc68baede550f27e1507bca8e16c3b"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_isoc_out_packet_dropped_intr" ref="7dbc68baede550f27e1507bca8e16c3b" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_isoc_out_packet_dropped_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates that the ISO OUT Packet was dropped due to Rx FIFO full or Rx Status Queue Full. 
<p>
If this interrupt occurs read all the data from the Rx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01051">1051</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="a0826c93566bb0144e2fce79fd5d459a"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_end_periodic_frame_intr" ref="a0826c93566bb0144e2fce79fd5d459a" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_end_periodic_frame_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates the end of the portion of the micro-frame for periodic transactions. 
<p>
If there is a periodic transaction for the next frame, load the packets into the EP periodic Tx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01077">1077</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="c45cbe24b507cba84465299e2069ab43"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_ep_mismatch_intr" ref="c45cbe24b507cba84465299e2069ab43" args="(dwc_otg_core_if_t *core_if)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_ep_mismatch_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates that EP of the packet on the top of the non-periodic Tx FIFO does not match EP of the IN Token received. 
<p>
The "Device IN Token Queue" Registers are read to determine the order the IN Tokens have been received. The non-periodic Tx FIFO is flushed, so it can be reloaded in the order seen in the IN Token Queue. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01105">1105</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="6c417c7d86bc9540e13ca4faeaf3dfbf"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_gadget_setup" ref="6c417c7d86bc9540e13ca4faeaf3dfbf" args="(dwc_otg_pcd_t *pcd, usb_device_request_t *ctrl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void do_gadget_setup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">usb_device_request_t *&nbsp;</td>
          <td class="paramname"> <em>ctrl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This functions delegates the setup command to the gadget driver. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000031">Todo:</a></b></dt><dd>This is a g_file_storage gadget driver specific workaround: a DELAYED_STATUS result from the fsg_setup routine will result in the gadget queueing a EP0 IN status phase for a two-stage control transfer. Exactly the same as a SET_CONFIGURATION/SET_INTERFACE except that this is a class specific request. Need a generic way to know when the gadget driver will queue the status phase. Can we assume when we call the gadget driver setup() function that it will always queue and require the following flag? Need to look into this. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01138">1138</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="153d9a3b2162ef091dc24027379af19f"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::pcd_clear_halt" ref="153d9a3b2162ef091dc24027379af19f" args="(dwc_otg_pcd_t *pcd, dwc_otg_pcd_ep_t *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void pcd_clear_halt           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clear the EP halt (STALL) and if pending requests start the transfer. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000032">Todo:</a></b></dt><dd>FIXME: this causes an EP mismatch in DMA mode. epmismatch not yet implemented. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01245">1245</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="9d6d6e24faab6478aef9e2217c9b5ab9"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_test_mode" ref="9d6d6e24faab6478aef9e2217c9b5ab9" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_test_mode           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called when the SET_FEATURE TEST_MODE Setup packet is sent from the host. 
<p>
The Device Control register is written with the Test Mode bits set to the specified Test Mode. This is done as a tasklet so that the "Status" phase of the control transfer completes before transmitting the TEST packets.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000033">Todo:</a></b></dt><dd>This has not been tested since the tasklet struct was put into the PCD struct!</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01284">1284</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="f449add2b4e8de7ced10fd1bb4c5b748"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_get_status" ref="f449add2b4e8de7ced10fd1bb4c5b748" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void do_get_status           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function process the GET_STATUS Setup Commands. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000034">Todo:</a></b></dt><dd>check for EP stall </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01321">1321</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="3754b29956ab3a85851dea376e046db9"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_set_feature" ref="3754b29956ab3a85851dea376e046db9" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void do_set_feature           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function process the SET_FEATURE Setup Commands. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000035">Todo:</a></b></dt><dd>This has not been tested since the tasklet struct was put into the PCD struct! </dd></dl>
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000035">Todo:</a></b></dt><dd>Is the gotgctl.devhnpen cleared by a USB Reset? </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01369">1369</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="2198ea3f0136465fa325a189d4ba5140"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::do_clear_feature" ref="2198ea3f0136465fa325a189d4ba5140" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void do_clear_feature           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function process the CLEAR_FEATURE Setup Commands. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000037">Todo:</a></b></dt><dd>Add CLEAR_FEATURE for TEST modes. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01472">1472</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="856a520a378e4f6f274253227080cfa1"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::pcd_setup" ref="856a520a378e4f6f274253227080cfa1" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void pcd_setup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function processes SETUP commands. 
<p>
In Linux, the USB Command processing is done in two places - the first being the PCD and the second in the Gadget Driver (for example, the File-Backed Storage Gadget Driver).<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td>Command </td><td>Driver </td><td>Description<p>
</td></tr>
<tr>
<td>GET_STATUS </td><td>PCD </td><td>Command is processed as defined in chapter 9 of the USB 2.0 Specification chapter 9 <p>
</td></tr>
<tr>
<td>CLEAR_FEATURE </td><td>PCD </td><td>The Device and Endpoint requests are the ENDPOINT_HALT feature is procesed, all others the interface requests are ignored.<p>
</td></tr>
<tr>
<td>SET_FEATURE </td><td>PCD </td><td>The Device and Endpoint requests are processed by the PCD. Interface requests are passed to the Gadget Driver.<p>
</td></tr>
<tr>
<td>SET_ADDRESS </td><td>PCD </td><td>Program the DCFG reg, with device address received <p>
</td></tr>
<tr>
<td>GET_DESCRIPTOR </td><td>Gadget Driver </td><td>Return the requested descriptor<p>
</td></tr>
<tr>
<td>SET_DESCRIPTOR </td><td>Gadget Driver </td><td>Optional - not implemented by any of the existing Gadget Drivers.<p>
</td></tr>
<tr>
<td>SET_CONFIGURATION </td><td>Gadget Driver </td><td>Disable all EPs and enable EPs for new configuration.<p>
</td></tr>
<tr>
<td>GET_CONFIGURATION </td><td>Gadget Driver </td><td>Return the current configuration<p>
</td></tr>
<tr>
<td>SET_INTERFACE </td><td>Gadget Driver </td><td>Disable all EPs and enable EPs for new configuration.<p>
</td></tr>
<tr>
<td>GET_INTERFACE </td><td>Gadget Driver </td><td>Return the current interface.<p>
</td></tr>
<tr>
<td>SYNC_FRAME </td><td>PCD </td><td>Display debug message. </td></tr>
</table>
<p>
When the SETUP Phase Done interrupt occurs, the PCD SETUP commands are processed by pcd_setup. Calling the Function Driver's setup function from pcd_setup processes the gadget SETUP commands. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000038">Todo:</a></b></dt><dd>handle &gt; 1 setup packet , assert error for now </dd></dl>
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000038">Todo:</a></b></dt><dd>NGS: Handle bad setup packet? </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01580">1580</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="c77f277130ba55b19100bde598da7d85"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::complete_ep" ref="c77f277130ba55b19100bde598da7d85" args="(dwc_otg_pcd_ep_t *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void complete_ep           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ep</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function completes the request for the EP. 
<p>
If there are additional requests for the EP in the queue they will be started. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01911">1911</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="17428b2360118cc59ab9d5cbcef8a14b"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::set_current_pkt_info" ref="17428b2360118cc59ab9d5cbcef8a14b" args="(dwc_otg_core_if_t *core_if, dwc_ep_t *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_current_pkt_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function sets latest iso packet information(non-PTI mode). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP to start the transfer on. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02274">2274</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="e5ed26b3ab2380cb92773df1720ec752"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::set_ddma_iso_pkts_info" ref="e5ed26b3ab2380cb92773df1720ec752" args="(dwc_otg_core_if_t *core_if, dwc_ep_t *dwc_ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void set_ddma_iso_pkts_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_ep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function sets latest iso packet information(DDMA mode). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structdwc__ep.html">dwc_ep</a></em>&nbsp;</td><td>The EP to start the transfer on. </td></tr>
  </table>
</dl>

<p>
Reinit closed DMA Descriptors<p>
ISO OUT EP<p>
ISO IN EP 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02322">2322</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="c3f6fb3131e0786ec75a9c4a29fea297"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::reinit_ddma_iso_xfer" ref="c3f6fb3131e0786ec75a9c4a29fea297" args="(dwc_otg_core_if_t *core_if, dwc_ep_t *dwc_ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void reinit_ddma_iso_xfer           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_ep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function reinitialize DMA Descriptors for Isochronous transfer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structdwc__ep.html">dwc_ep</a></em>&nbsp;</td><td>The EP to start the transfer on. </td></tr>
  </table>
</dl>

<p>
Buffer 0 descriptors setup<p>
Buffer 1 descriptors setup<p>
Reinit closed DMA Descriptors<p>
ISO OUT EP<p>
ISO IN EP 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02486">2486</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="41cfc0d590740640795b350998bcc2c4"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_iso_out_pkt_dropped" ref="41cfc0d590740640795b350998bcc2c4" args="(dwc_otg_core_if_t *core_if, dwc_ep_t *dwc_ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t handle_iso_out_pkt_dropped           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_ep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is to handle Iso EP transfer complete interrupt in case Iso out packet was dropped. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structdwc__ep.html">dwc_ep</a></em>&nbsp;</td><td>The EP for wihich transfer complete was asserted </td></tr>
  </table>
</dl>

<p>
Re-enable endpoint, clear nak 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02620">2620</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="a356ecc4053e9700785a27dbfdd6b2db"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::set_iso_pkts_info" ref="a356ecc4053e9700785a27dbfdd6b2db" args="(dwc_otg_core_if_t *core_if, dwc_ep_t *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t set_iso_pkts_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="paramname"> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function sets iso packets information(PTI mode). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP to start the transfer on. </td></tr>
  </table>
</dl>

<p>
Buffer 0 descriptors setup<p>
Buffer 1 descriptors setup 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02690">2690</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="05965765a43225780ae08f2c3928f782"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::complete_iso_ep" ref="05965765a43225780ae08f2c3928f782" args="(dwc_otg_pcd_t *pcd, dwc_otg_pcd_ep_t *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void complete_iso_ep           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is to handle Iso EP transfer complete interrupt. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP for which transfer complete was asserted </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02766">2766</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="4991119b51de03163a3677c36bc0ee3b"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_ep0" ref="4991119b51de03163a3677c36bc0ee3b" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_ep0           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function handles EP0 Control transfers. 
<p>
The state of the control tranfers are tracked in <code>ep0state</code>. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02843">2843</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="65d4f747d13e368916ee0e16d202119b"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_in_ep_timeout_intr" ref="65d4f747d13e368916ee0e16d202119b" args="(dwc_otg_pcd_t *pcd, const uint32_t epnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_in_ep_timeout_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&nbsp;</td>
          <td class="paramname"> <em>epnum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handler for the IN EP timeout handshake interrupt. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000040">Todo:</a></b></dt><dd>NGS Check EP type. Implement for Periodic EPs </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03080">3080</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="273ccc8e8cdb9e2075844f2f922b53bf"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_in_ep_nak_intr" ref="273ccc8e8cdb9e2075844f2f922b53bf" args="(dwc_otg_pcd_t *pcd, const uint32_t epnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t handle_in_ep_nak_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&nbsp;</td>
          <td class="paramname"> <em>epnum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handler for the IN EP NAK interrupt. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000041">Todo:</a></b></dt><dd>implement ISR </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03141">3141</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="42aef7ea134cccf7cdb53e7e1428bc4a"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_out_ep_babble_intr" ref="42aef7ea134cccf7cdb53e7e1428bc4a" args="(dwc_otg_pcd_t *pcd, const uint32_t epnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t handle_out_ep_babble_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&nbsp;</td>
          <td class="paramname"> <em>epnum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handler for the OUT EP Babble interrupt. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000042">Todo:</a></b></dt><dd>implement ISR </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03166">3166</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="252929e585c84eaf0485869cd7734244"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_out_ep_nak_intr" ref="252929e585c84eaf0485869cd7734244" args="(dwc_otg_pcd_t *pcd, const uint32_t epnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t handle_out_ep_nak_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&nbsp;</td>
          <td class="paramname"> <em>epnum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handler for the OUT EP NAK interrupt. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000043">Todo:</a></b></dt><dd>implement ISR </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03192">3192</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="926d9068c1950cc406d50828e72a31db"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::handle_out_ep_nyet_intr" ref="926d9068c1950cc406d50828e72a31db" args="(dwc_otg_pcd_t *pcd, const uint32_t epnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t handle_out_ep_nyet_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&nbsp;</td>
          <td class="paramname"> <em>epnum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handler for the OUT EP NYET interrupt. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000044">Todo:</a></b></dt><dd>implement ISR </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03217">3217</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="321d4a511db985443b132c044fc2d69e"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_in_ep_intr" ref="321d4a511db985443b132c044fc2d69e" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t dwc_otg_pcd_handle_in_ep_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates that an IN EP has a pending Interrupt. 
<p>
The sequence for handling the IN EP interrupt is shown below:<ol type=1>
<li>Read the Device All Endpoint Interrupt register</li><li>Repeat the following for each IN EP interrupt bit set (from LSB to MSB).</li><li>Read the Device Endpoint Interrupt (DIEPINTn) register</li><li>If "Transfer Complete" call the request complete function</li><li>If "Endpoint Disabled" complete the EP disable procedure.</li><li>If "AHB Error Interrupt" log error</li><li>If "Time-out Handshake" log error</li><li>If "IN Token Received when TxFIFO Empty" write packet to Tx FIFO.</li><li>If "IN Token EP Mismatch" (disable, this is handled by EP Mismatch Interrupt) </li></ol>

<p>
IN Token received with TxF Empty<p>
IN Token Received with EP mismatch<p>
IN Endpoint NAK Effective<p>
IN EP Tx FIFO Empty Intr<p>
IN EP BNA Intr 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03255">3255</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="8b24f400f2eb83ea262e27f5cd1bb707"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_out_ep_intr" ref="8b24f400f2eb83ea262e27f5cd1bb707" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t dwc_otg_pcd_handle_out_ep_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates that an OUT EP has a pending Interrupt. 
<p>
The sequence for handling the OUT EP interrupt is shown below:<ol type=1>
<li>Read the Device All Endpoint Interrupt register</li><li>Repeat the following for each OUT EP interrupt bit set (from LSB to MSB).</li><li>Read the Device Endpoint Interrupt (DOEPINTn) register</li><li>If "Transfer Complete" call the request complete function</li><li>If "Endpoint Disabled" complete the EP disable procedure.</li><li>If "AHB Error Interrupt" log error</li><li>If "Setup Phase Done" process Setup Packet (See Standard USB Command Processing) </li></ol>

<p>
OUT EP BNA Intr 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03522">3522</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="aa9fd9a6774ed616e31df65fe326351b"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_incomplete_isoc_in_intr" ref="aa9fd9a6774ed616e31df65fe326351b" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_incomplete_isoc_in_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Incomplete ISO IN Transfer Interrupt. 
<p>
This interrupt indicates one of the following conditions occurred while transmitting an ISOC transaction.<ul>
<li>Corrupted IN Token for ISOC EP.</li><li>Packet not complete in FIFO. The follow actions will be taken:<ol type=a>
<li>Determine the EP</li><li>Set incomplete flag in <a class="el" href="structdwc__ep.html">dwc_ep</a> structure</li><li>Disable EP; when "Endpoint Disabled" interrupt is received Flush FIFO </li></ol>
</li></ul>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03725">3725</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="8277c5761c3865fbb3646ba496a4901e"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_incomplete_isoc_out_intr" ref="8277c5761c3865fbb3646ba496a4901e" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_incomplete_isoc_out_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Incomplete ISO OUT Transfer Interrupt. 
<p>
This interrupt indicates that the core has dropped an ISO OUT packet. The following conditions can be the cause:<ul>
<li>FIFO Full, the entire packet would not fit in the FIFO.</li><li>CRC Error</li><li>Corrupted Token The follow actions will be taken:<ol type=a>
<li>Determine the EP</li><li>Set incomplete flag in <a class="el" href="structdwc__ep.html">dwc_ep</a> structure</li><li>Read any data from the FIFO</li><li>Disable EP. when "Endpoint Disabled" interrupt is received re-enable EP. </li></ol>
</li></ul>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03814">3814</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="fc60361217d0c5c089f4036d73690689"></a><!-- doxytag: member="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_intr" ref="fc60361217d0c5c089f4036d73690689" args="(dwc_otg_pcd_t *pcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_pcd_handle_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function should be called on every hardware interrupt. 
<p>
The PCD handles the device interrupts. Many conditions can cause a device interrupt. When an interrupt occurs, the device interrupt service routine determines the cause of the interrupt and dispatches handling to the appropriate function. These interrupt handling functions are described below.<p>
All interrupt registers are processed from LSB to MSB. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03971">3971</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:49 2009 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
