<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_driver.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dwc_otg_driver.c</h1><a href="dwc__otg__driver_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ==========================================================================</span>
<a name="l00002"></a>00002 <span class="comment"> * $File: //dwh/usb_iip/dev/software/otg/linux/drivers/dwc_otg_driver.c $</span>
<a name="l00003"></a>00003 <span class="comment"> * $Revision: #76 $</span>
<a name="l00004"></a>00004 <span class="comment"> * $Date: 2009/05/03 $</span>
<a name="l00005"></a>00005 <span class="comment"> * $Change: 1245589 $</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * Synopsys HS OTG Linux Software Driver and documentation (hereinafter,</span>
<a name="l00008"></a>00008 <span class="comment"> * "Software") is an Unsupported proprietary work of Synopsys, Inc. unless</span>
<a name="l00009"></a>00009 <span class="comment"> * otherwise expressly agreed to in writing between Synopsys and you.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * The Software IS NOT an item of Licensed Software or Licensed Product under</span>
<a name="l00012"></a>00012 <span class="comment"> * any End User Software License Agreement or Agreement for Licensed Product</span>
<a name="l00013"></a>00013 <span class="comment"> * with Synopsys or any supplement thereto. You are permitted to use and</span>
<a name="l00014"></a>00014 <span class="comment"> * redistribute this Software in source and binary forms, with or without</span>
<a name="l00015"></a>00015 <span class="comment"> * modification, provided that redistributions of source code must retain this</span>
<a name="l00016"></a>00016 <span class="comment"> * notice. You may not view, use, disclose, copy or distribute this file or</span>
<a name="l00017"></a>00017 <span class="comment"> * any information contained herein except pursuant to this license grant from</span>
<a name="l00018"></a>00018 <span class="comment"> * Synopsys. If you do not agree with this notice, including the disclaimer</span>
<a name="l00019"></a>00019 <span class="comment"> * below, then you are not authorized to use the Software.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * THIS SOFTWARE IS BEING DISTRIBUTED BY SYNOPSYS SOLELY ON AN "AS IS" BASIS</span>
<a name="l00022"></a>00022 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00023"></a>00023 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00024"></a>00024 <span class="comment"> * ARE HEREBY DISCLAIMED. IN NO EVENT SHALL SYNOPSYS BE LIABLE FOR ANY DIRECT,</span>
<a name="l00025"></a>00025 <span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<a name="l00026"></a>00026 <span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00027"></a>00027 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00028"></a>00028 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00029"></a>00029 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00030"></a>00030 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<a name="l00031"></a>00031 <span class="comment"> * DAMAGE.</span>
<a name="l00032"></a>00032 <span class="comment"> * ========================================================================== */</span>
<a name="l00033"></a>00033 
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;linux/kernel.h&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;linux/module.h&gt;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &lt;linux/moduleparam.h&gt;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &lt;linux/init.h&gt;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &lt;linux/device.h&gt;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &lt;linux/errno.h&gt;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &lt;linux/types.h&gt;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;linux/stat.h&gt;</span>         <span class="comment">/* permission constants */</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &lt;linux/version.h&gt;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &lt;linux/interrupt.h&gt;</span>
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#include &lt;asm/arch/regs-irq.h&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &lt;asm/arch/lm.h&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;asm/sizes.h&gt;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#endif</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a>00068 <span class="preprocessor"># include &lt;linux/irq.h&gt;</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="preprocessor">#include &lt;asm/io.h&gt;</span>
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="preprocessor">#include "dwc_os.h"</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include "<a class="code" href="dwc__otg__dbg_8h.html">dwc_otg_dbg.h</a>"</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include "<a class="code" href="dwc__otg__driver_8h.html">dwc_otg_driver.h</a>"</span>
<a name="l00076"></a>00076 <span class="preprocessor">#include "<a class="code" href="dwc__otg__attr_8h.html">dwc_otg_attr.h</a>"</span>
<a name="l00077"></a>00077 <span class="preprocessor">#include "<a class="code" href="dwc__otg__core__if_8h.html">dwc_otg_core_if.h</a>"</span>
<a name="l00078"></a>00078 <span class="preprocessor">#include "<a class="code" href="dwc__otg__pcd__if_8h.html">dwc_otg_pcd_if.h</a>"</span>
<a name="l00079"></a>00079 <span class="preprocessor">#include "<a class="code" href="dwc__otg__hcd__if_8h.html">dwc_otg_hcd_if.h</a>"</span>
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="dwc__otg__driver_8c.html#7fb7b6d344624c19c1d920239458999a">00081</a> <span class="preprocessor">#define DWC_DRIVER_VERSION      "2.90a 23-APR-2009"</span>
<a name="l00082"></a><a class="code" href="dwc__otg__driver_8c.html#d78dec8459bcb2092d84be524494378b">00082</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_DRIVER_DESC         "HS OTG USB Controller driver"</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>
<a name="l00084"></a><a class="code" href="dwc__otg__driver_8c.html#3f7932dcd77bb7b05f92f759e6569fe2">00084</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="dwc__otg__driver_8c.html#3f7932dcd77bb7b05f92f759e6569fe2">dwc_driver_name</a>[] = <span class="stringliteral">"dwc_otg"</span>;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__driver_8c.html#9dbc565a7942db0adbf1ec341db22901">pcd_init</a>(
<a name="l00087"></a>00087 #ifdef LM_INTERFACE
<a name="l00088"></a>00088         <span class="keyword">struct</span> lm_device *_dev
<a name="l00089"></a>00089 #elif  PCI_INTERFACE
<a name="l00090"></a>00090         <span class="keyword">struct</span> pci_dev *_dev
<a name="l00091"></a>00091 #endif
<a name="l00092"></a>00092         );
<a name="l00093"></a>00093 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__driver_8c.html#ab12cdf65bf4ed68545a6c17cc31269f">hcd_init</a>(
<a name="l00094"></a>00094 #ifdef LM_INTERFACE
<a name="l00095"></a>00095         <span class="keyword">struct</span> lm_device *_dev
<a name="l00096"></a>00096 #elif  PCI_INTERFACE
<a name="l00097"></a>00097         <span class="keyword">struct</span> pci_dev *_dev
<a name="l00098"></a>00098 #endif
<a name="l00099"></a>00099         );
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__driver_8c.html#7960b8e2c02d9ab89b65cb01ba08658b">pcd_remove</a>(
<a name="l00102"></a>00102 #ifdef LM_INTERFACE
<a name="l00103"></a>00103         <span class="keyword">struct</span> lm_device *_dev
<a name="l00104"></a>00104 #elif  PCI_INTERFACE
<a name="l00105"></a>00105         <span class="keyword">struct</span> pci_dev *_dev
<a name="l00106"></a>00106 #endif
<a name="l00107"></a>00107         );
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__driver_8c.html#f36193b3ff33c0473956c8a15eee4f5b">hcd_remove</a>(
<a name="l00110"></a>00110 #ifdef LM_INTERFACE
<a name="l00111"></a>00111         <span class="keyword">struct</span> lm_device *_dev
<a name="l00112"></a>00112 #elif  PCI_INTERFACE
<a name="l00113"></a>00113         <span class="keyword">struct</span> pci_dev *_dev
<a name="l00114"></a>00114 #endif
<a name="l00115"></a>00115         );
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="comment">/*-------------------------------------------------------------------------*/</span>
<a name="l00118"></a>00118 <span class="comment">/* Encapsulate the module parameter settings */</span>
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="structdwc__otg__driver__module__params.html">00120</a> <span class="keyword">struct </span><a class="code" href="structdwc__otg__driver__module__params.html">dwc_otg_driver_module_params</a> {
<a name="l00121"></a><a class="code" href="structdwc__otg__driver__module__params.html#bccaf8d2ce8da6d5ef0d1c81caf9e518">00121</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#bccaf8d2ce8da6d5ef0d1c81caf9e518">opt</a>;
<a name="l00122"></a><a class="code" href="structdwc__otg__driver__module__params.html#985f1849ab70919e756c86280a8f7ef0">00122</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#985f1849ab70919e756c86280a8f7ef0">otg_cap</a>;
<a name="l00123"></a><a class="code" href="structdwc__otg__driver__module__params.html#fe4469605ca0460a3e309603d7c23e86">00123</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#fe4469605ca0460a3e309603d7c23e86">dma_enable</a>;
<a name="l00124"></a><a class="code" href="structdwc__otg__driver__module__params.html#cdceee2a19bb233c12893751f443c40d">00124</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#cdceee2a19bb233c12893751f443c40d">dma_desc_enable</a>;
<a name="l00125"></a><a class="code" href="structdwc__otg__driver__module__params.html#19c1567261677aa53120cfae53b90f8d">00125</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#19c1567261677aa53120cfae53b90f8d">dma_burst_size</a>;
<a name="l00126"></a><a class="code" href="structdwc__otg__driver__module__params.html#e0002437cefb2b64dc92f40fd69ef29f">00126</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#e0002437cefb2b64dc92f40fd69ef29f">speed</a>;
<a name="l00127"></a><a class="code" href="structdwc__otg__driver__module__params.html#6f3a0a2bf5c82d296fec31fec7b765ca">00127</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#6f3a0a2bf5c82d296fec31fec7b765ca">host_support_fs_ls_low_power</a>;
<a name="l00128"></a><a class="code" href="structdwc__otg__driver__module__params.html#91c46e96e070e983e3f91c756dd4aa64">00128</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#91c46e96e070e983e3f91c756dd4aa64">host_ls_low_power_phy_clk</a>;
<a name="l00129"></a><a class="code" href="structdwc__otg__driver__module__params.html#f448f6de6dcafca027bd2873b714b916">00129</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#f448f6de6dcafca027bd2873b714b916">enable_dynamic_fifo</a>;
<a name="l00130"></a><a class="code" href="structdwc__otg__driver__module__params.html#a9ae5039d88c52fab455235bf4f8696b">00130</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#a9ae5039d88c52fab455235bf4f8696b">data_fifo_size</a>;
<a name="l00131"></a><a class="code" href="structdwc__otg__driver__module__params.html#707eedd2d7794728c5188e5d5056316e">00131</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#707eedd2d7794728c5188e5d5056316e">dev_rx_fifo_size</a>;
<a name="l00132"></a><a class="code" href="structdwc__otg__driver__module__params.html#3172175dc8f08e96b63c7a8c162201f5">00132</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#3172175dc8f08e96b63c7a8c162201f5">dev_nperio_tx_fifo_size</a>;
<a name="l00133"></a><a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">00133</a>         uint32_t <a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[<a class="code" href="dwc__otg__core__if_8h.html#13bb22067644d357537c2905fe5ffb8c">MAX_PERIO_FIFOS</a>];
<a name="l00134"></a><a class="code" href="structdwc__otg__driver__module__params.html#1f490daab4c4e08d2773f46d51f1f5f7">00134</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#1f490daab4c4e08d2773f46d51f1f5f7">host_rx_fifo_size</a>;
<a name="l00135"></a><a class="code" href="structdwc__otg__driver__module__params.html#edf2038417f58acd8dab202a8ca19d2a">00135</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#edf2038417f58acd8dab202a8ca19d2a">host_nperio_tx_fifo_size</a>;
<a name="l00136"></a><a class="code" href="structdwc__otg__driver__module__params.html#bdc820350ca3b6aec5ac435c9712ccd5">00136</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#bdc820350ca3b6aec5ac435c9712ccd5">host_perio_tx_fifo_size</a>;
<a name="l00137"></a><a class="code" href="structdwc__otg__driver__module__params.html#16cc5351ae1dfbcd81d56a7ec16e1748">00137</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#16cc5351ae1dfbcd81d56a7ec16e1748">max_transfer_size</a>;
<a name="l00138"></a><a class="code" href="structdwc__otg__driver__module__params.html#bb7904edc790fce40ac04ed68a64217e">00138</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#bb7904edc790fce40ac04ed68a64217e">max_packet_count</a>;
<a name="l00139"></a><a class="code" href="structdwc__otg__driver__module__params.html#4727585082d86c52396adfde0cfffa17">00139</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#4727585082d86c52396adfde0cfffa17">host_channels</a>;
<a name="l00140"></a><a class="code" href="structdwc__otg__driver__module__params.html#c1c36daec6af25fb425c85a696c445e4">00140</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#c1c36daec6af25fb425c85a696c445e4">dev_endpoints</a>;
<a name="l00141"></a><a class="code" href="structdwc__otg__driver__module__params.html#77d1c10524440ed2e5189624157526ac">00141</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#77d1c10524440ed2e5189624157526ac">phy_type</a>;
<a name="l00142"></a><a class="code" href="structdwc__otg__driver__module__params.html#f6284c33f13fe2f02491fa1a0c479b25">00142</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#f6284c33f13fe2f02491fa1a0c479b25">phy_utmi_width</a>;
<a name="l00143"></a><a class="code" href="structdwc__otg__driver__module__params.html#6a2b8c0c6298a7b1da23d5dd5abc4da8">00143</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#6a2b8c0c6298a7b1da23d5dd5abc4da8">phy_ulpi_ddr</a>;
<a name="l00144"></a><a class="code" href="structdwc__otg__driver__module__params.html#8402de29e6ec24baa5881cb7d74914c2">00144</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#8402de29e6ec24baa5881cb7d74914c2">phy_ulpi_ext_vbus</a>;
<a name="l00145"></a><a class="code" href="structdwc__otg__driver__module__params.html#4e1d822cfcc6332fcaa0471bb1ca0d54">00145</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#4e1d822cfcc6332fcaa0471bb1ca0d54">i2c_enable</a>;
<a name="l00146"></a><a class="code" href="structdwc__otg__driver__module__params.html#33489751a5cef9e462d26e92caae3031">00146</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#33489751a5cef9e462d26e92caae3031">ulpi_fs_ls</a>;
<a name="l00147"></a><a class="code" href="structdwc__otg__driver__module__params.html#25f8f9c3558aa01fecf8bcd1527ee6cc">00147</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#25f8f9c3558aa01fecf8bcd1527ee6cc">ts_dline</a>;
<a name="l00148"></a><a class="code" href="structdwc__otg__driver__module__params.html#13860bb2c8d23e40088703289e6ae835">00148</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#13860bb2c8d23e40088703289e6ae835">en_multiple_tx_fifo</a>;
<a name="l00149"></a><a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">00149</a>         uint32_t <a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[<a class="code" href="dwc__otg__core__if_8h.html#050db6129005b993e573311dc42bc1a8">MAX_TX_FIFOS</a>];
<a name="l00150"></a><a class="code" href="structdwc__otg__driver__module__params.html#7fe5c7ff692926fb5cbe3b10d4123594">00150</a>         uint32_t <a class="code" href="structdwc__otg__driver__module__params.html#7fe5c7ff692926fb5cbe3b10d4123594">thr_ctl</a>;
<a name="l00151"></a><a class="code" href="structdwc__otg__driver__module__params.html#04d15f44d06c291acfeef82812bd1c65">00151</a>         uint32_t <a class="code" href="structdwc__otg__driver__module__params.html#04d15f44d06c291acfeef82812bd1c65">tx_thr_length</a>;
<a name="l00152"></a><a class="code" href="structdwc__otg__driver__module__params.html#eecdc71dde5ce0543a04d541a90f79bc">00152</a>         uint32_t <a class="code" href="structdwc__otg__driver__module__params.html#eecdc71dde5ce0543a04d541a90f79bc">rx_thr_length</a>;
<a name="l00153"></a><a class="code" href="structdwc__otg__driver__module__params.html#2e17f84d9b07732a7fdf37b13832c54a">00153</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#2e17f84d9b07732a7fdf37b13832c54a">pti_enable</a>;
<a name="l00154"></a><a class="code" href="structdwc__otg__driver__module__params.html#484412984c814a6298b05b58d94bd730">00154</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#484412984c814a6298b05b58d94bd730">mpi_enable</a>;
<a name="l00155"></a><a class="code" href="structdwc__otg__driver__module__params.html#bb4e33c533d53de007814f0e5a70dd8a">00155</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#bb4e33c533d53de007814f0e5a70dd8a">lpm_enable</a>;
<a name="l00156"></a><a class="code" href="structdwc__otg__driver__module__params.html#ed3802eea4e62cd79ef7d8701d45b506">00156</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#ed3802eea4e62cd79ef7d8701d45b506">ic_usb_cap</a>;
<a name="l00157"></a><a class="code" href="structdwc__otg__driver__module__params.html#b450246efcbc087eb36b0979040162ca">00157</a>         int32_t <a class="code" href="structdwc__otg__driver__module__params.html#b450246efcbc087eb36b0979040162ca">ahb_thr_ratio</a>;
<a name="l00158"></a>00158 };
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">00160</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structdwc__otg__driver__module__params.html">dwc_otg_driver_module_params</a> <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a> = {
<a name="l00161"></a>00161         .<a class="code" href="structdwc__otg__driver__module__params.html#bccaf8d2ce8da6d5ef0d1c81caf9e518">opt</a> = -1,
<a name="l00162"></a>00162         .otg_cap = -1,
<a name="l00163"></a>00163         .dma_enable = -1,
<a name="l00164"></a>00164         .dma_desc_enable = -1,
<a name="l00165"></a>00165         .dma_burst_size = -1,
<a name="l00166"></a>00166         .speed = -1,
<a name="l00167"></a>00167         .host_support_fs_ls_low_power = -1,
<a name="l00168"></a>00168         .host_ls_low_power_phy_clk = -1,
<a name="l00169"></a>00169         .enable_dynamic_fifo = -1,
<a name="l00170"></a>00170         .data_fifo_size = -1,
<a name="l00171"></a>00171         .dev_rx_fifo_size = -1,
<a name="l00172"></a>00172         .dev_nperio_tx_fifo_size = -1,
<a name="l00173"></a>00173         .dev_perio_tx_fifo_size = {
<a name="l00174"></a>00174                                    <span class="comment">/* dev_perio_tx_fifo_size_1 */</span>
<a name="l00175"></a>00175                                    -1,
<a name="l00176"></a>00176                                    -1,
<a name="l00177"></a>00177                                    -1,
<a name="l00178"></a>00178                                    -1,
<a name="l00179"></a>00179                                    -1,
<a name="l00180"></a>00180                                    -1,
<a name="l00181"></a>00181                                    -1,
<a name="l00182"></a>00182                                    -1,
<a name="l00183"></a>00183                                    -1,
<a name="l00184"></a>00184                                    -1,
<a name="l00185"></a>00185                                    -1,
<a name="l00186"></a>00186                                    -1,
<a name="l00187"></a>00187                                    -1,
<a name="l00188"></a>00188                                    -1,
<a name="l00189"></a>00189                                    -1
<a name="l00190"></a>00190                                    <span class="comment">/* 15 */</span>
<a name="l00191"></a>00191                                    },
<a name="l00192"></a>00192         .host_rx_fifo_size = -1,
<a name="l00193"></a>00193         .host_nperio_tx_fifo_size = -1,
<a name="l00194"></a>00194         .host_perio_tx_fifo_size = -1,
<a name="l00195"></a>00195         .max_transfer_size = -1,
<a name="l00196"></a>00196         .max_packet_count = -1,
<a name="l00197"></a>00197         .host_channels = -1,
<a name="l00198"></a>00198         .dev_endpoints = -1,
<a name="l00199"></a>00199         .phy_type = -1,
<a name="l00200"></a>00200         .phy_utmi_width = -1,
<a name="l00201"></a>00201         .phy_ulpi_ddr = -1,
<a name="l00202"></a>00202         .phy_ulpi_ext_vbus = -1,
<a name="l00203"></a>00203         .i2c_enable = -1,
<a name="l00204"></a>00204         .ulpi_fs_ls = -1,
<a name="l00205"></a>00205         .ts_dline = -1,
<a name="l00206"></a>00206         .en_multiple_tx_fifo = -1,
<a name="l00207"></a>00207         .dev_tx_fifo_size = {
<a name="l00208"></a>00208                              <span class="comment">/* dev_tx_fifo_size */</span>
<a name="l00209"></a>00209                              -1,
<a name="l00210"></a>00210                              -1,
<a name="l00211"></a>00211                              -1,
<a name="l00212"></a>00212                              -1,
<a name="l00213"></a>00213                              -1,
<a name="l00214"></a>00214                              -1,
<a name="l00215"></a>00215                              -1,
<a name="l00216"></a>00216                              -1,
<a name="l00217"></a>00217                              -1,
<a name="l00218"></a>00218                              -1,
<a name="l00219"></a>00219                              -1,
<a name="l00220"></a>00220                              -1,
<a name="l00221"></a>00221                              -1,
<a name="l00222"></a>00222                              -1,
<a name="l00223"></a>00223                              -1
<a name="l00224"></a>00224                              <span class="comment">/* 15 */</span>
<a name="l00225"></a>00225                              },
<a name="l00226"></a>00226         .thr_ctl = -1,
<a name="l00227"></a>00227         .tx_thr_length = -1,
<a name="l00228"></a>00228         .rx_thr_length = -1,
<a name="l00229"></a>00229         .pti_enable = -1,
<a name="l00230"></a>00230         .mpi_enable = -1,
<a name="l00231"></a>00231         .lpm_enable = -1,
<a name="l00232"></a>00232         .ic_usb_cap = -1,
<a name="l00233"></a>00233         .ahb_thr_ratio = -1,
<a name="l00234"></a>00234 };
<a name="l00235"></a>00235 
<a name="l00239"></a><a class="code" href="dwc__otg__driver_8c.html#6eaf4dedcf1df7eb80c48f1872212012">00239</a> <span class="keyword">static</span> ssize_t <a class="code" href="dwc__otg__driver_8c.html#6eaf4dedcf1df7eb80c48f1872212012">version_show</a>(<span class="keyword">struct</span> device_driver *dev, <span class="keywordtype">char</span> *buf)
<a name="l00240"></a>00240 {
<a name="l00241"></a>00241         <span class="keywordflow">return</span> snprintf(buf, <span class="keyword">sizeof</span>(<a class="code" href="dwc__otg__driver_8c.html#7fb7b6d344624c19c1d920239458999a">DWC_DRIVER_VERSION</a>) + 2, <span class="stringliteral">"%s\n"</span>,
<a name="l00242"></a>00242                         DWC_DRIVER_VERSION);
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 <span class="keyword">static</span> DRIVER_ATTR(version, S_IRUGO, <a class="code" href="dwc__otg__driver_8c.html#6eaf4dedcf1df7eb80c48f1872212012">version_show</a>, NULL);
<a name="l00246"></a>00246 
<a name="l00250"></a><a class="code" href="dwc__otg__driver_8c.html#7ef4ada2ebb5f1aadf3be4d7fbf8ce62">00250</a> uint32_t <a class="code" href="dwc__otg__dbg_8h.html#7ef4ada2ebb5f1aadf3be4d7fbf8ce62">g_dbg_lvl</a> = 0;         <span class="comment">/* OFF */</span>
<a name="l00251"></a>00251 
<a name="l00255"></a><a class="code" href="dwc__otg__driver_8c.html#1e2b7516063b70cc1eaecc8d286b0689">00255</a> <span class="keyword">static</span> ssize_t <a class="code" href="dwc__otg__driver_8c.html#1e2b7516063b70cc1eaecc8d286b0689">dbg_level_show</a>(<span class="keyword">struct</span> device_driver *drv, <span class="keywordtype">char</span> *buf)
<a name="l00256"></a>00256 {
<a name="l00257"></a>00257         <span class="keywordflow">return</span> sprintf(buf, <span class="stringliteral">"0x%0x\n"</span>, <a class="code" href="dwc__otg__dbg_8h.html#7ef4ada2ebb5f1aadf3be4d7fbf8ce62">g_dbg_lvl</a>);
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00263"></a><a class="code" href="dwc__otg__driver_8c.html#e886456741506f66ce4adc5b843dc055">00263</a> <span class="keyword">static</span> ssize_t <a class="code" href="dwc__otg__driver_8c.html#e886456741506f66ce4adc5b843dc055">dbg_level_store</a>(<span class="keyword">struct</span> device_driver *drv, <span class="keyword">const</span> <span class="keywordtype">char</span> *buf,
<a name="l00264"></a>00264                                size_t count)
<a name="l00265"></a>00265 {
<a name="l00266"></a>00266         <a class="code" href="dwc__otg__dbg_8h.html#7ef4ada2ebb5f1aadf3be4d7fbf8ce62">g_dbg_lvl</a> = simple_strtoul(buf, NULL, 16);
<a name="l00267"></a>00267         <span class="keywordflow">return</span> count;
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="keyword">static</span> DRIVER_ATTR(debuglevel, S_IRUGO | <a class="code" href="dwc__otg__attr_8c.html#ac2308832629daf78cb9dd123551cd8a">S_IWUSR</a>, <a class="code" href="dwc__otg__driver_8c.html#1e2b7516063b70cc1eaecc8d286b0689">dbg_level_show</a>,
<a name="l00271"></a>00271                    <a class="code" href="dwc__otg__driver_8c.html#e886456741506f66ce4adc5b843dc055">dbg_level_store</a>);
<a name="l00272"></a>00272 
<a name="l00277"></a><a class="code" href="dwc__otg__driver_8c.html#fe3a3765da365671b36ba5e28dc4d38b">00277</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__driver_8c.html#fe3a3765da365671b36ba5e28dc4d38b">set_parameters</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if)
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279         <span class="keywordtype">int</span> retval = 0;
<a name="l00280"></a>00280         <span class="keywordtype">int</span> i;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#985f1849ab70919e756c86280a8f7ef0">otg_cap</a> != -1) {
<a name="l00283"></a>00283                 retval +=
<a name="l00284"></a>00284                     <a class="code" href="dwc__otg__cil_8c.html#878cc478f43c58991c446bd78f50f8f0">dwc_otg_set_param_otg_cap</a>(core_if,
<a name="l00285"></a>00285                                               <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#985f1849ab70919e756c86280a8f7ef0">otg_cap</a>);
<a name="l00286"></a>00286         }
<a name="l00287"></a>00287         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#fe4469605ca0460a3e309603d7c23e86">dma_enable</a> != -1) {
<a name="l00288"></a>00288                 retval +=
<a name="l00289"></a>00289                     <a class="code" href="dwc__otg__cil_8c.html#b4fbe11281b8200b70202d4e0048a9d7">dwc_otg_set_param_dma_enable</a>(core_if,
<a name="l00290"></a>00290                                                  <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00291"></a>00291                                                  <a class="code" href="structdwc__otg__driver__module__params.html#fe4469605ca0460a3e309603d7c23e86">dma_enable</a>);
<a name="l00292"></a>00292         }
<a name="l00293"></a>00293         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#cdceee2a19bb233c12893751f443c40d">dma_desc_enable</a> != -1) {
<a name="l00294"></a>00294                 retval +=
<a name="l00295"></a>00295                     <a class="code" href="dwc__otg__cil_8c.html#7eae744525314774d3b390f116db126c">dwc_otg_set_param_dma_desc_enable</a>(core_if,
<a name="l00296"></a>00296                                                       <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00297"></a>00297                                                       <a class="code" href="structdwc__otg__driver__module__params.html#cdceee2a19bb233c12893751f443c40d">dma_desc_enable</a>);
<a name="l00298"></a>00298         }
<a name="l00299"></a>00299         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bccaf8d2ce8da6d5ef0d1c81caf9e518">opt</a> != -1) {
<a name="l00300"></a>00300                 retval +=
<a name="l00301"></a>00301                     <a class="code" href="dwc__otg__cil_8c.html#d0603b00a0ff87007ded1c06613d6b87">dwc_otg_set_param_opt</a>(core_if, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bccaf8d2ce8da6d5ef0d1c81caf9e518">opt</a>);
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#19c1567261677aa53120cfae53b90f8d">dma_burst_size</a> != -1) {
<a name="l00304"></a>00304                 retval +=
<a name="l00305"></a>00305                     <a class="code" href="dwc__otg__cil_8c.html#920035c6082dcdfec11a20e8535e9fe9">dwc_otg_set_param_dma_burst_size</a>(core_if,
<a name="l00306"></a>00306                                                      <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00307"></a>00307                                                      <a class="code" href="structdwc__otg__driver__module__params.html#19c1567261677aa53120cfae53b90f8d">dma_burst_size</a>);
<a name="l00308"></a>00308         }
<a name="l00309"></a>00309         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#6f3a0a2bf5c82d296fec31fec7b765ca">host_support_fs_ls_low_power</a> != -1) {
<a name="l00310"></a>00310                 retval +=
<a name="l00311"></a>00311                     <a class="code" href="dwc__otg__cil_8c.html#8bd669637630521655c455c03d470e10">dwc_otg_set_param_host_support_fs_ls_low_power</a>(core_if,
<a name="l00312"></a>00312                                                                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00313"></a>00313                                                                    <a class="code" href="structdwc__otg__driver__module__params.html#6f3a0a2bf5c82d296fec31fec7b765ca">host_support_fs_ls_low_power</a>);
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#f448f6de6dcafca027bd2873b714b916">enable_dynamic_fifo</a> != -1) {
<a name="l00316"></a>00316                 retval +=
<a name="l00317"></a>00317                     <a class="code" href="dwc__otg__cil_8c.html#61bb728cc80220e5173d5e3126dd4fd1">dwc_otg_set_param_enable_dynamic_fifo</a>(core_if,
<a name="l00318"></a>00318                                                           <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00319"></a>00319                                                           <a class="code" href="structdwc__otg__driver__module__params.html#f448f6de6dcafca027bd2873b714b916">enable_dynamic_fifo</a>);
<a name="l00320"></a>00320         }
<a name="l00321"></a>00321         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#a9ae5039d88c52fab455235bf4f8696b">data_fifo_size</a> != -1) {
<a name="l00322"></a>00322                 retval +=
<a name="l00323"></a>00323                     <a class="code" href="dwc__otg__cil_8c.html#69d52c46eb236816b20675ecb57975ae">dwc_otg_set_param_data_fifo_size</a>(core_if,
<a name="l00324"></a>00324                                                      <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00325"></a>00325                                                      <a class="code" href="structdwc__otg__driver__module__params.html#a9ae5039d88c52fab455235bf4f8696b">data_fifo_size</a>);
<a name="l00326"></a>00326         }
<a name="l00327"></a>00327         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#707eedd2d7794728c5188e5d5056316e">dev_rx_fifo_size</a> != -1) {
<a name="l00328"></a>00328                 retval +=
<a name="l00329"></a>00329                     <a class="code" href="dwc__otg__cil_8c.html#0fa4db196053869ac19832c03c62913f">dwc_otg_set_param_dev_rx_fifo_size</a>(core_if,
<a name="l00330"></a>00330                                                        <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00331"></a>00331                                                        <a class="code" href="structdwc__otg__driver__module__params.html#707eedd2d7794728c5188e5d5056316e">dev_rx_fifo_size</a>);
<a name="l00332"></a>00332         }
<a name="l00333"></a>00333         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#3172175dc8f08e96b63c7a8c162201f5">dev_nperio_tx_fifo_size</a> != -1) {
<a name="l00334"></a>00334                 retval +=
<a name="l00335"></a>00335                     <a class="code" href="dwc__otg__cil_8c.html#4f7059cecabbf8cfe5014112ba9a3d42">dwc_otg_set_param_dev_nperio_tx_fifo_size</a>(core_if,
<a name="l00336"></a>00336                                                               <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00337"></a>00337                                                               <a class="code" href="structdwc__otg__driver__module__params.html#3172175dc8f08e96b63c7a8c162201f5">dev_nperio_tx_fifo_size</a>);
<a name="l00338"></a>00338         }
<a name="l00339"></a>00339         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#1f490daab4c4e08d2773f46d51f1f5f7">host_rx_fifo_size</a> != -1) {
<a name="l00340"></a>00340                 retval +=
<a name="l00341"></a>00341                     <a class="code" href="dwc__otg__cil_8c.html#254c1e97cf22fe34b7383165e30071eb">dwc_otg_set_param_host_rx_fifo_size</a>(core_if,
<a name="l00342"></a>00342                                                         <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#1f490daab4c4e08d2773f46d51f1f5f7">host_rx_fifo_size</a>);
<a name="l00343"></a>00343         }
<a name="l00344"></a>00344         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#edf2038417f58acd8dab202a8ca19d2a">host_nperio_tx_fifo_size</a> != -1) {
<a name="l00345"></a>00345                 retval +=
<a name="l00346"></a>00346                     <a class="code" href="dwc__otg__cil_8c.html#a66ca9f9345a13606148b050f8690a56">dwc_otg_set_param_host_nperio_tx_fifo_size</a>(core_if,
<a name="l00347"></a>00347                                                                <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00348"></a>00348                                                                <a class="code" href="structdwc__otg__driver__module__params.html#edf2038417f58acd8dab202a8ca19d2a">host_nperio_tx_fifo_size</a>);
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bdc820350ca3b6aec5ac435c9712ccd5">host_perio_tx_fifo_size</a> != -1) {
<a name="l00351"></a>00351                 retval +=
<a name="l00352"></a>00352                     <a class="code" href="dwc__otg__cil_8c.html#e4ce399208d8a85dcb9dedd1fb8cd8ce">dwc_otg_set_param_host_perio_tx_fifo_size</a>(core_if,
<a name="l00353"></a>00353                                                               <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00354"></a>00354                                                               <a class="code" href="structdwc__otg__driver__module__params.html#bdc820350ca3b6aec5ac435c9712ccd5">host_perio_tx_fifo_size</a>);
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#16cc5351ae1dfbcd81d56a7ec16e1748">max_transfer_size</a> != -1) {
<a name="l00357"></a>00357                 retval +=
<a name="l00358"></a>00358                     <a class="code" href="dwc__otg__cil_8c.html#2eee676071d6bb4eba53b413e80b045f">dwc_otg_set_param_max_transfer_size</a>(core_if,
<a name="l00359"></a>00359                                                         <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00360"></a>00360                                                         <a class="code" href="structdwc__otg__driver__module__params.html#16cc5351ae1dfbcd81d56a7ec16e1748">max_transfer_size</a>);
<a name="l00361"></a>00361         }
<a name="l00362"></a>00362         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bb7904edc790fce40ac04ed68a64217e">max_packet_count</a> != -1) {
<a name="l00363"></a>00363                 retval +=
<a name="l00364"></a>00364                     <a class="code" href="dwc__otg__cil_8c.html#a1c52f0740f7d0b72c980b38cc4314d1">dwc_otg_set_param_max_packet_count</a>(core_if,
<a name="l00365"></a>00365                                                        <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00366"></a>00366                                                        <a class="code" href="structdwc__otg__driver__module__params.html#bb7904edc790fce40ac04ed68a64217e">max_packet_count</a>);
<a name="l00367"></a>00367         }
<a name="l00368"></a>00368         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#4727585082d86c52396adfde0cfffa17">host_channels</a> != -1) {
<a name="l00369"></a>00369                 retval +=
<a name="l00370"></a>00370                     <a class="code" href="dwc__otg__cil_8c.html#f802acfc49b3fbb86159036f8f317f76">dwc_otg_set_param_host_channels</a>(core_if,
<a name="l00371"></a>00371                                                     <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00372"></a>00372                                                     <a class="code" href="structdwc__otg__driver__module__params.html#4727585082d86c52396adfde0cfffa17">host_channels</a>);
<a name="l00373"></a>00373         }
<a name="l00374"></a>00374         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#c1c36daec6af25fb425c85a696c445e4">dev_endpoints</a> != -1) {
<a name="l00375"></a>00375                 retval +=
<a name="l00376"></a>00376                     <a class="code" href="dwc__otg__cil_8c.html#75d3b409824c0ca52631277398ba8367">dwc_otg_set_param_dev_endpoints</a>(core_if,
<a name="l00377"></a>00377                                                     <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00378"></a>00378                                                     <a class="code" href="structdwc__otg__driver__module__params.html#c1c36daec6af25fb425c85a696c445e4">dev_endpoints</a>);
<a name="l00379"></a>00379         }
<a name="l00380"></a>00380         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#77d1c10524440ed2e5189624157526ac">phy_type</a> != -1) {
<a name="l00381"></a>00381                 retval +=
<a name="l00382"></a>00382                     <a class="code" href="dwc__otg__cil_8c.html#2b7087c85c0ea1520ec2e091b80bf36b">dwc_otg_set_param_phy_type</a>(core_if,
<a name="l00383"></a>00383                                                <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#77d1c10524440ed2e5189624157526ac">phy_type</a>);
<a name="l00384"></a>00384         }
<a name="l00385"></a>00385         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#e0002437cefb2b64dc92f40fd69ef29f">speed</a> != -1) {
<a name="l00386"></a>00386                 retval +=
<a name="l00387"></a>00387                     <a class="code" href="dwc__otg__cil_8c.html#7acd153b5577a3db825fa08d243ae856">dwc_otg_set_param_speed</a>(core_if,
<a name="l00388"></a>00388                                             <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#e0002437cefb2b64dc92f40fd69ef29f">speed</a>);
<a name="l00389"></a>00389         }
<a name="l00390"></a>00390         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#91c46e96e070e983e3f91c756dd4aa64">host_ls_low_power_phy_clk</a> != -1) {
<a name="l00391"></a>00391                 retval +=
<a name="l00392"></a>00392                     <a class="code" href="dwc__otg__cil_8c.html#354ce49f65334e829c2694811c4f2016">dwc_otg_set_param_host_ls_low_power_phy_clk</a>(core_if,
<a name="l00393"></a>00393                                                                 <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00394"></a>00394                                                                 <a class="code" href="structdwc__otg__driver__module__params.html#91c46e96e070e983e3f91c756dd4aa64">host_ls_low_power_phy_clk</a>);
<a name="l00395"></a>00395         }
<a name="l00396"></a>00396         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#6a2b8c0c6298a7b1da23d5dd5abc4da8">phy_ulpi_ddr</a> != -1) {
<a name="l00397"></a>00397                 retval +=
<a name="l00398"></a>00398                     <a class="code" href="dwc__otg__cil_8c.html#5dab15db053bd02c6bc9619e189a6a14">dwc_otg_set_param_phy_ulpi_ddr</a>(core_if,
<a name="l00399"></a>00399                                                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00400"></a>00400                                                    <a class="code" href="structdwc__otg__driver__module__params.html#6a2b8c0c6298a7b1da23d5dd5abc4da8">phy_ulpi_ddr</a>);
<a name="l00401"></a>00401         }
<a name="l00402"></a>00402         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#8402de29e6ec24baa5881cb7d74914c2">phy_ulpi_ext_vbus</a> != -1) {
<a name="l00403"></a>00403                 retval +=
<a name="l00404"></a>00404                     <a class="code" href="dwc__otg__cil_8c.html#a12296bcb04a3b0f6f80037590e97bec">dwc_otg_set_param_phy_ulpi_ext_vbus</a>(core_if,
<a name="l00405"></a>00405                                                         <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00406"></a>00406                                                         <a class="code" href="structdwc__otg__driver__module__params.html#8402de29e6ec24baa5881cb7d74914c2">phy_ulpi_ext_vbus</a>);
<a name="l00407"></a>00407         }
<a name="l00408"></a>00408         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#f6284c33f13fe2f02491fa1a0c479b25">phy_utmi_width</a> != -1) {
<a name="l00409"></a>00409                 retval +=
<a name="l00410"></a>00410                     <a class="code" href="dwc__otg__cil_8c.html#1eacecc96e1ab100cbf129ad6aa5f6c8">dwc_otg_set_param_phy_utmi_width</a>(core_if,
<a name="l00411"></a>00411                                                      <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00412"></a>00412                                                      <a class="code" href="structdwc__otg__driver__module__params.html#f6284c33f13fe2f02491fa1a0c479b25">phy_utmi_width</a>);
<a name="l00413"></a>00413         }
<a name="l00414"></a>00414         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#33489751a5cef9e462d26e92caae3031">ulpi_fs_ls</a> != -1) {
<a name="l00415"></a>00415                 retval +=
<a name="l00416"></a>00416                     <a class="code" href="dwc__otg__cil_8c.html#f235e9c7b844b899d759a073a84f782f">dwc_otg_set_param_ulpi_fs_ls</a>(core_if, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#33489751a5cef9e462d26e92caae3031">ulpi_fs_ls</a>);
<a name="l00417"></a>00417         }
<a name="l00418"></a>00418         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#25f8f9c3558aa01fecf8bcd1527ee6cc">ts_dline</a> != -1) {
<a name="l00419"></a>00419                 retval +=
<a name="l00420"></a>00420                     <a class="code" href="dwc__otg__cil_8c.html#b05c92754c0ebc3d58ea0c090b9659de">dwc_otg_set_param_ts_dline</a>(core_if,
<a name="l00421"></a>00421                                                <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#25f8f9c3558aa01fecf8bcd1527ee6cc">ts_dline</a>);
<a name="l00422"></a>00422         }
<a name="l00423"></a>00423         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#4e1d822cfcc6332fcaa0471bb1ca0d54">i2c_enable</a> != -1) {
<a name="l00424"></a>00424                 retval +=
<a name="l00425"></a>00425                     <a class="code" href="dwc__otg__cil_8c.html#65d7407ed24c82e158a38ab2a60120c4">dwc_otg_set_param_i2c_enable</a>(core_if,
<a name="l00426"></a>00426                                                  <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00427"></a>00427                                                  <a class="code" href="structdwc__otg__driver__module__params.html#4e1d822cfcc6332fcaa0471bb1ca0d54">i2c_enable</a>);
<a name="l00428"></a>00428         }
<a name="l00429"></a>00429         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#13860bb2c8d23e40088703289e6ae835">en_multiple_tx_fifo</a> != -1) {
<a name="l00430"></a>00430                 retval +=
<a name="l00431"></a>00431                     <a class="code" href="dwc__otg__cil_8c.html#2eefd02d72c79200072d54b4eb13e5cd">dwc_otg_set_param_en_multiple_tx_fifo</a>(core_if,
<a name="l00432"></a>00432                                                           <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00433"></a>00433                                                           <a class="code" href="structdwc__otg__driver__module__params.html#13860bb2c8d23e40088703289e6ae835">en_multiple_tx_fifo</a>);
<a name="l00434"></a>00434         }
<a name="l00435"></a>00435         <span class="keywordflow">for</span> (i = 0; i &lt; 15; i++) {
<a name="l00436"></a>00436                 <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[i] != -1) {
<a name="l00437"></a>00437                         retval +=
<a name="l00438"></a>00438                             <a class="code" href="dwc__otg__cil_8c.html#2119a493582bea4004b5fdeba15f1609">dwc_otg_set_param_dev_perio_tx_fifo_size</a>(core_if,
<a name="l00439"></a>00439                                                                      <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00440"></a>00440                                                                      <a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>
<a name="l00441"></a>00441                                                                      [i], i);
<a name="l00442"></a>00442                 }
<a name="l00443"></a>00443         }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445         <span class="keywordflow">for</span> (i = 0; i &lt; 15; i++) {
<a name="l00446"></a>00446                 <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[i] != -1) {
<a name="l00447"></a>00447                         retval += <a class="code" href="dwc__otg__cil_8c.html#44bf6b41f0892f480ea6c03a2ac1e73f">dwc_otg_set_param_dev_tx_fifo_size</a>(core_if,
<a name="l00448"></a>00448                                                                      <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00449"></a>00449                                                                      <a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>
<a name="l00450"></a>00450                                                                      [i], i);
<a name="l00451"></a>00451                 }
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#7fe5c7ff692926fb5cbe3b10d4123594">thr_ctl</a> != -1) {
<a name="l00454"></a>00454                 retval +=
<a name="l00455"></a>00455                     <a class="code" href="dwc__otg__cil_8c.html#6095d6a93f901f32522d4b950c99a8e1">dwc_otg_set_param_thr_ctl</a>(core_if,
<a name="l00456"></a>00456                                               <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#7fe5c7ff692926fb5cbe3b10d4123594">thr_ctl</a>);
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#484412984c814a6298b05b58d94bd730">mpi_enable</a> != -1) {
<a name="l00459"></a>00459                 retval +=
<a name="l00460"></a>00460                     <a class="code" href="dwc__otg__cil_8c.html#7ba10fdfd2ce9f3ef4b0a2bef555a7c1">dwc_otg_set_param_mpi_enable</a>(core_if,
<a name="l00461"></a>00461                                                  <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00462"></a>00462                                                  <a class="code" href="structdwc__otg__driver__module__params.html#484412984c814a6298b05b58d94bd730">mpi_enable</a>);
<a name="l00463"></a>00463         }
<a name="l00464"></a>00464         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#2e17f84d9b07732a7fdf37b13832c54a">pti_enable</a> != -1) {
<a name="l00465"></a>00465                 retval +=
<a name="l00466"></a>00466                     <a class="code" href="dwc__otg__cil_8c.html#63c0b4bfcf3b1c6c90c5572258439e1f">dwc_otg_set_param_pti_enable</a>(core_if,
<a name="l00467"></a>00467                                                  <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00468"></a>00468                                                  <a class="code" href="structdwc__otg__driver__module__params.html#2e17f84d9b07732a7fdf37b13832c54a">pti_enable</a>);
<a name="l00469"></a>00469         }
<a name="l00470"></a>00470         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bb4e33c533d53de007814f0e5a70dd8a">lpm_enable</a> != -1) {
<a name="l00471"></a>00471                 retval +=
<a name="l00472"></a>00472                     <a class="code" href="dwc__otg__cil_8c.html#e3a62b66e19a302a55046830f5eecf0c">dwc_otg_set_param_lpm_enable</a>(core_if,
<a name="l00473"></a>00473                                                  <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00474"></a>00474                                                  <a class="code" href="structdwc__otg__driver__module__params.html#bb4e33c533d53de007814f0e5a70dd8a">lpm_enable</a>);
<a name="l00475"></a>00475         }
<a name="l00476"></a>00476         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#ed3802eea4e62cd79ef7d8701d45b506">ic_usb_cap</a> != -1) {
<a name="l00477"></a>00477                 retval +=
<a name="l00478"></a>00478                     <a class="code" href="dwc__otg__cil_8c.html#93036faefc8179eef11c8ca0b18993a8">dwc_otg_set_param_ic_usb_cap</a>(core_if,
<a name="l00479"></a>00479                                                  <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00480"></a>00480                                                  <a class="code" href="structdwc__otg__driver__module__params.html#ed3802eea4e62cd79ef7d8701d45b506">ic_usb_cap</a>);
<a name="l00481"></a>00481         }
<a name="l00482"></a>00482         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#04d15f44d06c291acfeef82812bd1c65">tx_thr_length</a> != -1) {
<a name="l00483"></a>00483                 retval +=
<a name="l00484"></a>00484                     <a class="code" href="dwc__otg__cil_8c.html#1ed19fed8939a352f91fe1403574135e">dwc_otg_set_param_tx_thr_length</a>(core_if,
<a name="l00485"></a>00485                                                     <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#04d15f44d06c291acfeef82812bd1c65">tx_thr_length</a>);
<a name="l00486"></a>00486         }
<a name="l00487"></a>00487         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#eecdc71dde5ce0543a04d541a90f79bc">rx_thr_length</a> != -1) {
<a name="l00488"></a>00488                 retval +=
<a name="l00489"></a>00489                     <a class="code" href="dwc__otg__cil_8c.html#20d005470a65927cb243b37619f6c6bf">dwc_otg_set_param_rx_thr_length</a>(core_if,
<a name="l00490"></a>00490                                                     <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.
<a name="l00491"></a>00491                                                     <a class="code" href="structdwc__otg__driver__module__params.html#eecdc71dde5ce0543a04d541a90f79bc">rx_thr_length</a>);
<a name="l00492"></a>00492         }
<a name="l00493"></a>00493         <span class="keywordflow">if</span>(<a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#b450246efcbc087eb36b0979040162ca">ahb_thr_ratio</a> != -1) {
<a name="l00494"></a>00494                 retval +=
<a name="l00495"></a>00495                     <a class="code" href="dwc__otg__cil_8c.html#9bf87dcaa6dcea51eb3d8c30439a2138">dwc_otg_set_param_ahb_thr_ratio</a>(core_if, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#b450246efcbc087eb36b0979040162ca">ahb_thr_ratio</a>);
<a name="l00496"></a>00496         }
<a name="l00497"></a>00497         <span class="keywordflow">return</span> retval;
<a name="l00498"></a>00498 }
<a name="l00499"></a>00499 
<a name="l00504"></a><a class="code" href="dwc__otg__driver_8c.html#8850871557165b76b72f28723e4ec450">00504</a> <span class="keyword">static</span> irqreturn_t <a class="code" href="dwc__otg__driver_8c.html#8850871557165b76b72f28723e4ec450">dwc_otg_common_irq</a>(<span class="keywordtype">int</span> irq, <span class="keywordtype">void</span> *dev)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506         <a class="code" href="structdwc__otg__device.html">dwc_otg_device_t</a> *otg_dev = dev;
<a name="l00507"></a>00507         int32_t retval = IRQ_NONE;
<a name="l00508"></a>00508 
<a name="l00509"></a>00509         retval = <a class="code" href="dwc__otg__cil__intr_8c.html#1fad5cb7f68bc87c628bc4cb5db922b8">dwc_otg_handle_common_intr</a>(otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#4cc7c9f6e473072c2ed0a5e6adb25ebe">core_if</a>);
<a name="l00510"></a>00510         <span class="keywordflow">if</span> (retval != 0) {
<a name="l00511"></a>00511                 <a class="code" href="dwc__otg__driver_8h.html#3af7bafbb69f04a0fd36a27fae7e8497">S3C2410X_CLEAR_EINTPEND</a>();
<a name="l00512"></a>00512         }
<a name="l00513"></a>00513         <span class="keywordflow">return</span> IRQ_RETVAL(retval);
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00525"></a><a class="code" href="dwc__otg__driver_8c.html#fe9abf2a1dda4c02d24f5cb1d7a9a94d">00525</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__driver_8c.html#fe9abf2a1dda4c02d24f5cb1d7a9a94d">dwc_otg_driver_remove</a>(
<a name="l00526"></a>00526 #ifdef LM_INTERFACE
<a name="l00527"></a>00527      <span class="keyword">struct</span> lm_device *_dev
<a name="l00528"></a>00528 #elif PCI_INTERFACE
<a name="l00529"></a>00529      <span class="keyword">struct</span> pci_dev *_dev
<a name="l00530"></a>00530 #endif
<a name="l00531"></a>00531 )
<a name="l00532"></a>00532 
<a name="l00533"></a>00533 {
<a name="l00534"></a>00534 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00535"></a>00535 <span class="preprocessor"></span>        <a class="code" href="structdwc__otg__device.html">dwc_otg_device_t</a> *otg_dev = lm_get_drvdata(_dev);
<a name="l00536"></a>00536 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00537"></a>00537 <span class="preprocessor"></span>        <a class="code" href="structdwc__otg__device.html">dwc_otg_device_t</a> *otg_dev = pci_get_drvdata(_dev);
<a name="l00538"></a>00538 <span class="preprocessor">#endif</span>
<a name="l00539"></a>00539 <span class="preprocessor"></span>
<a name="l00540"></a>00540 
<a name="l00541"></a>00541         <a class="code" href="dwc__otg__dbg_8h.html#ed38f5a57cb756e97a17c0926cc9a10e">DWC_DEBUGPL</a>(<a class="code" href="dwc__otg__dbg_8h.html#2bf62a567355d1ea38814714bd7b57ec">DBG_ANY</a>, <span class="stringliteral">"%s(%p)\n"</span>, __func__, _dev);
<a name="l00542"></a>00542 
<a name="l00543"></a>00543         <span class="keywordflow">if</span> (!otg_dev) {
<a name="l00544"></a>00544                 <span class="comment">/* Memory allocation for the dwc_otg_device failed. */</span>
<a name="l00545"></a>00545                 <a class="code" href="dwc__otg__dbg_8h.html#ed38f5a57cb756e97a17c0926cc9a10e">DWC_DEBUGPL</a>(<a class="code" href="dwc__otg__dbg_8h.html#2bf62a567355d1ea38814714bd7b57ec">DBG_ANY</a>, <span class="stringliteral">"%s: otg_dev NULL!\n"</span>, __func__);
<a name="l00546"></a>00546                 <span class="keywordflow">return</span>;
<a name="l00547"></a>00547         }
<a name="l00548"></a>00548 <span class="preprocessor">#ifndef DWC_DEVICE_ONLY</span>
<a name="l00549"></a>00549 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#834ef28e884f0d7fcac68f3bdf5c4b33">hcd</a>) {
<a name="l00550"></a>00550                 <a class="code" href="dwc__otg__driver_8c.html#f36193b3ff33c0473956c8a15eee4f5b">hcd_remove</a>(_dev);
<a name="l00551"></a>00551         } <span class="keywordflow">else</span> {
<a name="l00552"></a>00552                 <a class="code" href="dwc__otg__dbg_8h.html#ed38f5a57cb756e97a17c0926cc9a10e">DWC_DEBUGPL</a>(<a class="code" href="dwc__otg__dbg_8h.html#2bf62a567355d1ea38814714bd7b57ec">DBG_ANY</a>, <span class="stringliteral">"%s: otg_dev-&gt;hcd NULL!\n"</span>, __func__);
<a name="l00553"></a>00553                 <span class="keywordflow">return</span>;
<a name="l00554"></a>00554         }
<a name="l00555"></a>00555 <span class="preprocessor">#endif</span>
<a name="l00556"></a>00556 <span class="preprocessor"></span>
<a name="l00557"></a>00557 <span class="preprocessor">#ifndef DWC_HOST_ONLY</span>
<a name="l00558"></a>00558 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#2a8eefbd03790ea0bbb70e0ac14e4786">pcd</a>) {
<a name="l00559"></a>00559                 <a class="code" href="dwc__otg__driver_8c.html#7960b8e2c02d9ab89b65cb01ba08658b">pcd_remove</a>(_dev);
<a name="l00560"></a>00560         }
<a name="l00561"></a>00561 <span class="preprocessor">#endif</span>
<a name="l00562"></a>00562 <span class="preprocessor"></span>        <span class="comment">/*</span>
<a name="l00563"></a>00563 <span class="comment">         * Free the IRQ</span>
<a name="l00564"></a>00564 <span class="comment">         */</span>
<a name="l00565"></a>00565         <span class="keywordflow">if</span> (otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#80bfe5405d4146d3edca4e3eb2f9239b">common_irq_installed</a>) {
<a name="l00566"></a>00566                 free_irq(_dev-&gt;irq, otg_dev);
<a name="l00567"></a>00567         }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569         <span class="keywordflow">if</span> (otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#4cc7c9f6e473072c2ed0a5e6adb25ebe">core_if</a>) {
<a name="l00570"></a>00570                 <a class="code" href="dwc__otg__cil_8c.html#cc4a08b278c7afe0484b595cacf80c04">dwc_otg_cil_remove</a>(otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#4cc7c9f6e473072c2ed0a5e6adb25ebe">core_if</a>);
<a name="l00571"></a>00571         }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573         <span class="comment">/*</span>
<a name="l00574"></a>00574 <span class="comment">         * Remove the device attributes</span>
<a name="l00575"></a>00575 <span class="comment">         */</span>
<a name="l00576"></a>00576         <a class="code" href="dwc__otg__attr_8c.html#4b0aa5ebf3661ec8ab5566b20c233674">dwc_otg_attr_remove</a>(_dev);
<a name="l00577"></a>00577 
<a name="l00578"></a>00578         <span class="comment">/*</span>
<a name="l00579"></a>00579 <span class="comment">         * Return the memory.</span>
<a name="l00580"></a>00580 <span class="comment">         */</span>
<a name="l00581"></a>00581         <span class="keywordflow">if</span> (otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#ed96ed1109175f87fd83fa32a9c2c6fa">base</a>) {
<a name="l00582"></a>00582                 iounmap(otg_dev-&gt;<a class="code" href="structdwc__otg__device.html#ed96ed1109175f87fd83fa32a9c2c6fa">base</a>);
<a name="l00583"></a>00583         }
<a name="l00584"></a>00584         dwc_free(otg_dev);
<a name="l00585"></a>00585 
<a name="l00586"></a>00586         <span class="comment">/*</span>
<a name="l00587"></a>00587 <span class="comment">         * Clear the drvdata pointer.</span>
<a name="l00588"></a>00588 <span class="comment">         */</span>
<a name="l00589"></a>00589 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00590"></a>00590 <span class="preprocessor"></span>        lm_set_drvdata(_dev, 0);
<a name="l00591"></a>00591 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00592"></a>00592 <span class="preprocessor"></span>        release_mem_region(otg_dev-&gt;rsrc_start, otg_dev-&gt;rsrc_len);
<a name="l00593"></a>00593         pci_set_drvdata(_dev, 0);
<a name="l00594"></a>00594 <span class="preprocessor">#endif</span>
<a name="l00595"></a>00595 <span class="preprocessor"></span>}
<a name="l00596"></a>00596 
<a name="l00608"></a><a class="code" href="dwc__otg__driver_8c.html#10921617ecc621f0448d4f9ab6a0f7b7">00608</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__driver_8c.html#10921617ecc621f0448d4f9ab6a0f7b7">dwc_otg_driver_probe</a>(
<a name="l00609"></a>00609 #ifdef LM_INTERFACE
<a name="l00610"></a>00610 <span class="keyword">struct</span> lm_device *_dev
<a name="l00611"></a>00611 #elif PCI_INTERFACE
<a name="l00612"></a>00612 <span class="keyword">struct</span> pci_dev *_dev,  <span class="keyword">const</span> <span class="keyword">struct</span> pci_device_id *<span class="keywordtype">id</span>
<a name="l00613"></a>00613 #endif
<a name="l00614"></a>00614 )
<a name="l00615"></a>00615 {
<a name="l00616"></a>00616         <span class="keywordtype">int</span> retval = 0;
<a name="l00617"></a>00617         <a class="code" href="structdwc__otg__device.html">dwc_otg_device_t</a> *<a class="code" href="structdwc__otg__device.html">dwc_otg_device</a>;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619         dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"dwc_otg_driver_probe(%p)\n"</span>, _dev);
<a name="l00620"></a>00620 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00621"></a>00621 <span class="preprocessor"></span>        dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"start=0x%08x\n"</span>, (<span class="keywordtype">unsigned</span>)_dev-&gt;resource.start);
<a name="l00622"></a>00622 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00623"></a>00623 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>) {
<a name="l00624"></a>00624         DWC_ERROR(<span class="stringliteral">"Invalid pci_device_id %p"</span>, <span class="keywordtype">id</span>);
<a name="l00625"></a>00625                 <span class="keywordflow">return</span> -EINVAL;
<a name="l00626"></a>00626         }
<a name="l00627"></a>00627 
<a name="l00628"></a>00628         <span class="keywordflow">if</span> (!_dev || (pci_enable_device(_dev) &lt; 0)) {
<a name="l00629"></a>00629                 DWC_ERROR(<span class="stringliteral">"Invalid pci_device %p"</span>, _dev);
<a name="l00630"></a>00630                 <span class="keywordflow">return</span> -ENODEV;
<a name="l00631"></a>00631         }
<a name="l00632"></a>00632         dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"start=0x%08x\n"</span>, (<span class="keywordtype">unsigned</span>)pci_resource_start(_dev,0));
<a name="l00633"></a>00633         <span class="comment">/* other stuff needed as well? */</span>
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 <span class="preprocessor">#endif</span>
<a name="l00636"></a>00636 <span class="preprocessor"></span>
<a name="l00637"></a>00637 
<a name="l00638"></a>00638         dwc_otg_device = dwc_alloc(<span class="keyword">sizeof</span>(<a class="code" href="structdwc__otg__device.html">dwc_otg_device_t</a>));
<a name="l00639"></a>00639 
<a name="l00640"></a>00640         <span class="keywordflow">if</span> (!dwc_otg_device) {
<a name="l00641"></a>00641                 dev_err(&amp;_dev-&gt;dev, <span class="stringliteral">"kmalloc of dwc_otg_device failed\n"</span>);
<a name="l00642"></a>00642                 retval = -ENOMEM;
<a name="l00643"></a>00643                 <span class="keywordflow">goto</span> fail;
<a name="l00644"></a>00644         }
<a name="l00645"></a>00645 
<a name="l00646"></a>00646         memset(dwc_otg_device, 0, <span class="keyword">sizeof</span>(*dwc_otg_device));
<a name="l00647"></a>00647         dwc_otg_device-&gt;reg_offset = 0xFFFFFFFF;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649         <span class="comment">/*</span>
<a name="l00650"></a>00650 <span class="comment">         * Map the DWC_otg Core memory into virtual address space.</span>
<a name="l00651"></a>00651 <span class="comment">         */</span>
<a name="l00652"></a>00652 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00653"></a>00653 <span class="preprocessor"></span>        dwc_otg_device-&gt;base = ioremap(_dev-&gt;resource.start, SZ_256K);
<a name="l00654"></a>00654 
<a name="l00655"></a>00655         <span class="keywordflow">if</span> (!dwc_otg_device-&gt;base) {
<a name="l00656"></a>00656                 dev_err(&amp;_dev-&gt;dev, <span class="stringliteral">"ioremap() failed\n"</span>);
<a name="l00657"></a>00657                 retval = -ENOMEM;
<a name="l00658"></a>00658                 <span class="keywordflow">goto</span> fail;
<a name="l00659"></a>00659         }
<a name="l00660"></a>00660         dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"base=0x%08x\n"</span>, (<span class="keywordtype">unsigned</span>)dwc_otg_device-&gt;base);
<a name="l00661"></a>00661 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00662"></a>00662 <span class="preprocessor"></span>        _dev-&gt;current_state = PCI_D0;
<a name="l00663"></a>00663         _dev-&gt;dev.power.power_state = PMSG_ON;
<a name="l00664"></a>00664         
<a name="l00665"></a>00665         <span class="keywordflow">if</span> (!_dev-&gt;irq) {
<a name="l00666"></a>00666                 DWC_ERROR(<span class="stringliteral">"Found HC with no IRQ. Check BIOS/PCI %s setup!"</span>, pci_name(_dev));
<a name="l00667"></a>00667                 retval = -ENODEV;
<a name="l00668"></a>00668                 <span class="keywordflow">goto</span> fail;
<a name="l00669"></a>00669         }
<a name="l00670"></a>00670 
<a name="l00671"></a>00671         dwc_otg_device-&gt;rsrc_start = pci_resource_start(_dev,0);
<a name="l00672"></a>00672         dwc_otg_device-&gt;rsrc_len = pci_resource_len(_dev,0);
<a name="l00673"></a>00673         <a class="code" href="dwc__otg__dbg_8h.html#ed38f5a57cb756e97a17c0926cc9a10e">DWC_DEBUGPL</a>(<a class="code" href="dwc__otg__dbg_8h.html#2bf62a567355d1ea38814714bd7b57ec">DBG_ANY</a>,<span class="stringliteral">"PCI resource: start=%08x, len=%08x\n"</span>,
<a name="l00674"></a>00674                     dwc_otg_device-&gt;rsrc_start,
<a name="l00675"></a>00675                     dwc_otg_device-&gt;rsrc_len);
<a name="l00676"></a>00676         <span class="keywordflow">if</span> (!request_mem_region(dwc_otg_device-&gt;rsrc_start, dwc_otg_device-&gt;rsrc_len, <span class="stringliteral">"dwc_otg"</span>)) {
<a name="l00677"></a>00677           dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"error mapping memory\n"</span>);
<a name="l00678"></a>00678           retval = -EFAULT;
<a name="l00679"></a>00679           <span class="keywordflow">goto</span> fail;
<a name="l00680"></a>00680         }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682         dwc_otg_device-&gt;base = ioremap_nocache(dwc_otg_device-&gt;rsrc_start, dwc_otg_device-&gt;rsrc_len);
<a name="l00683"></a>00683         <span class="keywordflow">if</span> (dwc_otg_device-&gt;base == NULL) {
<a name="l00684"></a>00684                 dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"error mapping memory\n"</span>);
<a name="l00685"></a>00685                 retval = -EFAULT;
<a name="l00686"></a>00686                 <span class="keywordflow">goto</span> fail;
<a name="l00687"></a>00687         }
<a name="l00688"></a>00688         dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"base=0x%p (before adjust) \n"</span>, dwc_otg_device-&gt;base);
<a name="l00689"></a>00689         dwc_otg_device-&gt;base = (<span class="keywordtype">char</span> *)dwc_otg_device-&gt;base;
<a name="l00690"></a>00690         dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"base=0x%p (after adjust) \n"</span>, dwc_otg_device-&gt;base);
<a name="l00691"></a>00691         dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"%s: mapped PA 0x%x to VA 0x%p\n"</span>, __func__,
<a name="l00692"></a>00692                 (<span class="keywordtype">unsigned</span>)dwc_otg_device-&gt;rsrc_start, dwc_otg_device-&gt;base);
<a name="l00693"></a>00693         <span class="comment">//</span>
<a name="l00694"></a>00694         pci_set_drvdata(_dev, dwc_otg_device); 
<a name="l00695"></a>00695         pci_set_master(_dev);
<a name="l00696"></a>00696 <span class="preprocessor">#endif</span>
<a name="l00697"></a>00697 <span class="preprocessor"></span>
<a name="l00698"></a>00698         <span class="comment">/*</span>
<a name="l00699"></a>00699 <span class="comment">         * Initialize driver data to point to the global DWC_otg</span>
<a name="l00700"></a>00700 <span class="comment">         * Device structure.</span>
<a name="l00701"></a>00701 <span class="comment">         */</span>
<a name="l00702"></a>00702 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00703"></a>00703 <span class="preprocessor"></span>        lm_set_drvdata(_dev, dwc_otg_device);
<a name="l00704"></a>00704 <span class="preprocessor">#endif</span>
<a name="l00705"></a>00705 <span class="preprocessor"></span>        dev_dbg(&amp;_dev-&gt;dev, <span class="stringliteral">"dwc_otg_device=0x%p\n"</span>, dwc_otg_device);
<a name="l00706"></a>00706 
<a name="l00707"></a>00707         dwc_otg_device-&gt;core_if = <a class="code" href="dwc__otg__cil_8c.html#2dc0a6c5541c1a8a014d66a8fce53f66">dwc_otg_cil_init</a>(dwc_otg_device-&gt;base);
<a name="l00708"></a>00708         <span class="keywordflow">if</span> (!dwc_otg_device-&gt;core_if) {
<a name="l00709"></a>00709                 dev_err(&amp;_dev-&gt;dev, <span class="stringliteral">"CIL initialization failed!\n"</span>);
<a name="l00710"></a>00710                 retval = -ENOMEM;
<a name="l00711"></a>00711                 <span class="keywordflow">goto</span> fail;
<a name="l00712"></a>00712         }
<a name="l00713"></a>00713 
<a name="l00714"></a>00714         <span class="comment">/*</span>
<a name="l00715"></a>00715 <span class="comment">         * Attempt to ensure this device is really a DWC_otg Controller.</span>
<a name="l00716"></a>00716 <span class="comment">         * Read and verify the SNPSID register contents. The value should be</span>
<a name="l00717"></a>00717 <span class="comment">         * 0x45F42XXX, which corresponds to "OT2", as in "OTG version 2.XX".</span>
<a name="l00718"></a>00718 <span class="comment">         */</span>
<a name="l00719"></a>00719 
<a name="l00720"></a>00720         <span class="keywordflow">if</span> ((<a class="code" href="dwc__otg__cil_8c.html#c505c47a08029706f60ab8f3d67b70d3">dwc_otg_get_gsnpsid</a>(dwc_otg_device-&gt;core_if) &amp; 0xFFFFF000) !=
<a name="l00721"></a>00721             0x4F542000) {
<a name="l00722"></a>00722                 dev_err(&amp;_dev-&gt;dev, <span class="stringliteral">"Bad value for SNPSID: 0x%08x\n"</span>,
<a name="l00723"></a>00723                         <a class="code" href="dwc__otg__cil_8c.html#c505c47a08029706f60ab8f3d67b70d3">dwc_otg_get_gsnpsid</a>(dwc_otg_device-&gt;core_if));
<a name="l00724"></a>00724                 <a class="code" href="dwc__otg__cil_8c.html#cc4a08b278c7afe0484b595cacf80c04">dwc_otg_cil_remove</a>(dwc_otg_device-&gt;core_if);
<a name="l00725"></a>00725                 dwc_free(dwc_otg_device);
<a name="l00726"></a>00726                 retval = -EINVAL;
<a name="l00727"></a>00727                 <span class="keywordflow">goto</span> fail;
<a name="l00728"></a>00728         }
<a name="l00729"></a>00729 
<a name="l00730"></a>00730         <span class="comment">/*</span>
<a name="l00731"></a>00731 <span class="comment">         * Validate parameter values.</span>
<a name="l00732"></a>00732 <span class="comment">         */</span>
<a name="l00733"></a>00733         <span class="keywordflow">if</span> (<a class="code" href="dwc__otg__driver_8c.html#fe3a3765da365671b36ba5e28dc4d38b">set_parameters</a>(dwc_otg_device-&gt;core_if)) {
<a name="l00734"></a>00734                 <a class="code" href="dwc__otg__cil_8c.html#cc4a08b278c7afe0484b595cacf80c04">dwc_otg_cil_remove</a>(dwc_otg_device-&gt;core_if);
<a name="l00735"></a>00735                 retval = -EINVAL;
<a name="l00736"></a>00736                 <span class="keywordflow">goto</span> fail;
<a name="l00737"></a>00737         }
<a name="l00738"></a>00738 
<a name="l00739"></a>00739         <span class="comment">/*</span>
<a name="l00740"></a>00740 <span class="comment">         * Create Device Attributes in sysfs</span>
<a name="l00741"></a>00741 <span class="comment">         */</span>
<a name="l00742"></a>00742         <a class="code" href="dwc__otg__attr_8c.html#792fccf68b5f00d193f800822a5d888b">dwc_otg_attr_create</a>(_dev);
<a name="l00743"></a>00743 
<a name="l00744"></a>00744         <span class="comment">/*</span>
<a name="l00745"></a>00745 <span class="comment">         * Disable the global interrupt until all the interrupt</span>
<a name="l00746"></a>00746 <span class="comment">         * handlers are installed.</span>
<a name="l00747"></a>00747 <span class="comment">         */</span>
<a name="l00748"></a>00748         <a class="code" href="dwc__otg__cil_8c.html#9f673c38ca761d8ab7b3333b506bcbfc">dwc_otg_disable_global_interrupts</a>(dwc_otg_device-&gt;core_if);
<a name="l00749"></a>00749 
<a name="l00750"></a>00750         <span class="comment">/*</span>
<a name="l00751"></a>00751 <span class="comment">         * Install the interrupt handler for the common interrupts before</span>
<a name="l00752"></a>00752 <span class="comment">         * enabling common interrupts in core_init below.</span>
<a name="l00753"></a>00753 <span class="comment">         */</span>
<a name="l00754"></a>00754         <a class="code" href="dwc__otg__dbg_8h.html#ed38f5a57cb756e97a17c0926cc9a10e">DWC_DEBUGPL</a>(<a class="code" href="dwc__otg__dbg_8h.html#57840e6b35e0e469296fd2db46227b13">DBG_CIL</a>, <span class="stringliteral">"registering (common) handler for irq%d\n"</span>,
<a name="l00755"></a>00755                     _dev-&gt;irq);
<a name="l00756"></a>00756         retval = request_irq(_dev-&gt;irq, <a class="code" href="dwc__otg__driver_8c.html#8850871557165b76b72f28723e4ec450">dwc_otg_common_irq</a>,
<a name="l00757"></a>00757                              SA_SHIRQ, <span class="stringliteral">"dwc_otg"</span>, dwc_otg_device);
<a name="l00758"></a>00758         <span class="keywordflow">if</span> (retval) {
<a name="l00759"></a>00759                 DWC_ERROR(<span class="stringliteral">"request of irq%d failed\n"</span>, _dev-&gt;irq);
<a name="l00760"></a>00760                 retval = -EBUSY;
<a name="l00761"></a>00761                 <span class="keywordflow">goto</span> fail;
<a name="l00762"></a>00762         } <span class="keywordflow">else</span> {
<a name="l00763"></a>00763                 dwc_otg_device-&gt;common_irq_installed = 1;
<a name="l00764"></a>00764         }
<a name="l00765"></a>00765 
<a name="l00766"></a>00766 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00767"></a>00767 <span class="preprocessor"></span>        set_irq_type(_dev-&gt;irq, IRQT_LOW);
<a name="l00768"></a>00768 <span class="preprocessor">#endif</span>
<a name="l00769"></a>00769 <span class="preprocessor"></span>
<a name="l00770"></a>00770         <span class="comment">/*</span>
<a name="l00771"></a>00771 <span class="comment">         * Initialize the DWC_otg core.</span>
<a name="l00772"></a>00772 <span class="comment">         */</span>
<a name="l00773"></a>00773         <a class="code" href="dwc__otg__cil_8c.html#ce48d4f2d172600c325a82d793473d0f">dwc_otg_core_init</a>(dwc_otg_device-&gt;core_if);
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 <span class="preprocessor">#ifndef DWC_HOST_ONLY</span>
<a name="l00776"></a>00776 <span class="preprocessor"></span>        <span class="comment">/*</span>
<a name="l00777"></a>00777 <span class="comment">         * Initialize the PCD</span>
<a name="l00778"></a>00778 <span class="comment">         */</span>
<a name="l00779"></a>00779         retval = <a class="code" href="dwc__otg__driver_8c.html#9dbc565a7942db0adbf1ec341db22901">pcd_init</a>(_dev);
<a name="l00780"></a>00780         <span class="keywordflow">if</span> (retval != 0) {
<a name="l00781"></a>00781                 DWC_ERROR(<span class="stringliteral">"pcd_init failed\n"</span>);
<a name="l00782"></a>00782                 dwc_otg_device-&gt;pcd = NULL;
<a name="l00783"></a>00783                 <span class="keywordflow">goto</span> fail;
<a name="l00784"></a>00784         }
<a name="l00785"></a>00785 <span class="preprocessor">#endif</span>
<a name="l00786"></a>00786 <span class="preprocessor"></span><span class="preprocessor">#ifndef DWC_DEVICE_ONLY</span>
<a name="l00787"></a>00787 <span class="preprocessor"></span>        <span class="comment">/*</span>
<a name="l00788"></a>00788 <span class="comment">         * Initialize the HCD</span>
<a name="l00789"></a>00789 <span class="comment">         */</span>
<a name="l00790"></a>00790         retval = <a class="code" href="dwc__otg__driver_8c.html#ab12cdf65bf4ed68545a6c17cc31269f">hcd_init</a>(_dev);
<a name="l00791"></a>00791         <span class="keywordflow">if</span> (retval != 0) {
<a name="l00792"></a>00792                 DWC_ERROR(<span class="stringliteral">"hcd_init failed\n"</span>);
<a name="l00793"></a>00793                 dwc_otg_device-&gt;hcd = NULL;
<a name="l00794"></a>00794                 <span class="keywordflow">goto</span> fail;
<a name="l00795"></a>00795         }
<a name="l00796"></a>00796 <span class="preprocessor">#endif</span>
<a name="l00797"></a>00797 <span class="preprocessor"></span><span class="preprocessor">#ifdef PCI_INTERFACE    </span>
<a name="l00798"></a>00798 <span class="preprocessor"></span>        pci_set_drvdata(_dev, dwc_otg_device);
<a name="l00799"></a>00799 <span class="preprocessor">#endif</span>
<a name="l00800"></a>00800 <span class="preprocessor"></span>
<a name="l00801"></a>00801         <span class="comment">/*</span>
<a name="l00802"></a>00802 <span class="comment">         * Enable the global interrupt after all the interrupt</span>
<a name="l00803"></a>00803 <span class="comment">         * handlers are installed.</span>
<a name="l00804"></a>00804 <span class="comment">         */</span>
<a name="l00805"></a>00805         <a class="code" href="dwc__otg__cil_8c.html#8b0b841d69298089b7d03b07ade8eda6">dwc_otg_enable_global_interrupts</a>(dwc_otg_device-&gt;core_if);
<a name="l00806"></a>00806 
<a name="l00807"></a>00807         <span class="keywordflow">return</span> 0;
<a name="l00808"></a>00808 
<a name="l00809"></a>00809       fail:
<a name="l00810"></a>00810         <a class="code" href="dwc__otg__driver_8c.html#fe9abf2a1dda4c02d24f5cb1d7a9a94d">dwc_otg_driver_remove</a>(_dev);
<a name="l00811"></a>00811         <span class="keywordflow">return</span> retval;
<a name="l00812"></a>00812 }
<a name="l00813"></a>00813 
<a name="l00825"></a>00825 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00826"></a>00826 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">struct </span>lm_driver dwc_otg_driver = {
<a name="l00827"></a>00827         .drv = {
<a name="l00828"></a>00828                 .name = (<span class="keywordtype">char</span> *)<a class="code" href="dwc__otg__driver_8c.html#3f7932dcd77bb7b05f92f759e6569fe2">dwc_driver_name</a>,
<a name="l00829"></a>00829                 },
<a name="l00830"></a>00830         .probe = <a class="code" href="dwc__otg__driver_8c.html#10921617ecc621f0448d4f9ab6a0f7b7">dwc_otg_driver_probe</a>,
<a name="l00831"></a>00831         .remove = <a class="code" href="dwc__otg__driver_8c.html#fe9abf2a1dda4c02d24f5cb1d7a9a94d">dwc_otg_driver_remove</a>,
<a name="l00832"></a>00832 };
<a name="l00833"></a>00833 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00834"></a>00834 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>pci_device_id pci_ids[] = { {
<a name="l00835"></a>00835         PCI_DEVICE(0x16c3, 0xabcd),
<a name="l00836"></a>00836         .driver_data = (<span class="keywordtype">unsigned</span> long) 0xdeadbeef,
<a name="l00837"></a>00837         }, { <span class="comment">/* end: all zeroes */</span> }
<a name="l00838"></a>00838 };
<a name="l00839"></a>00839 MODULE_DEVICE_TABLE(pci, pci_ids);
<a name="l00840"></a>00840 
<a name="l00841"></a>00841 <span class="comment">/* pci driver glue; this is a "new style" PCI driver module */</span>
<a name="l00842"></a>00842 <span class="keyword">static</span> <span class="keyword">struct </span>pci_driver dwc_otg_driver = {
<a name="l00843"></a>00843         .name =         <span class="stringliteral">"dwc_otg"</span>,
<a name="l00844"></a>00844         .id_table =     pci_ids,
<a name="l00845"></a>00845 
<a name="l00846"></a>00846         .probe =        <a class="code" href="dwc__otg__driver_8c.html#10921617ecc621f0448d4f9ab6a0f7b7">dwc_otg_driver_probe</a>,
<a name="l00847"></a>00847         .remove =       <a class="code" href="dwc__otg__driver_8c.html#fe9abf2a1dda4c02d24f5cb1d7a9a94d">dwc_otg_driver_remove</a>,
<a name="l00848"></a>00848 
<a name="l00849"></a>00849         .driver = {
<a name="l00850"></a>00850                 .name   = (<span class="keywordtype">char</span>*)<a class="code" href="dwc__otg__driver_8c.html#3f7932dcd77bb7b05f92f759e6569fe2">dwc_driver_name</a>,
<a name="l00851"></a>00851         },
<a name="l00852"></a>00852 };
<a name="l00853"></a>00853 <span class="preprocessor">#endif</span>
<a name="l00854"></a>00854 <span class="preprocessor"></span>
<a name="l00855"></a>00855 
<a name="l00866"></a><a class="code" href="dwc__otg__driver_8c.html#737f516e934e7f479e31bf7261dd3830">00866</a> <span class="keyword">static</span> <span class="keywordtype">int</span> __init <a class="code" href="dwc__otg__driver_8c.html#737f516e934e7f479e31bf7261dd3830">dwc_otg_driver_init</a>(<span class="keywordtype">void</span>)
<a name="l00867"></a>00867 {
<a name="l00868"></a>00868         <span class="keywordtype">int</span> retval = 0;
<a name="l00869"></a>00869         <span class="keywordtype">int</span> error;
<a name="l00870"></a>00870         printk(KERN_INFO <span class="stringliteral">"%s: version %s\n"</span>, <a class="code" href="dwc__otg__driver_8c.html#3f7932dcd77bb7b05f92f759e6569fe2">dwc_driver_name</a>,
<a name="l00871"></a>00871                <a class="code" href="dwc__otg__driver_8c.html#7fb7b6d344624c19c1d920239458999a">DWC_DRIVER_VERSION</a>);
<a name="l00872"></a>00872 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00873"></a>00873 <span class="preprocessor"></span>        retval = lm_driver_register(&amp;dwc_otg_driver);
<a name="l00874"></a>00874 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00875"></a>00875 <span class="preprocessor"></span>        retval = pci_register_driver(&amp;dwc_otg_driver);
<a name="l00876"></a>00876 <span class="preprocessor">#endif</span>
<a name="l00877"></a>00877 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (retval &lt; 0) {
<a name="l00878"></a>00878                 printk(KERN_ERR <span class="stringliteral">"%s retval=%d\n"</span>, __func__, retval);
<a name="l00879"></a>00879                 <span class="keywordflow">return</span> retval;
<a name="l00880"></a>00880         }
<a name="l00881"></a>00881 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00882"></a>00882 <span class="preprocessor"></span>        error = driver_create_file(&amp;dwc_otg_driver.drv, &amp;driver_attr_version);
<a name="l00883"></a>00883         error = driver_create_file(&amp;dwc_otg_driver.drv, &amp;driver_attr_debuglevel);
<a name="l00884"></a>00884 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00885"></a>00885 <span class="preprocessor"></span>        error = driver_create_file(&amp;dwc_otg_driver.driver, &amp;driver_attr_version);
<a name="l00886"></a>00886         error = driver_create_file(&amp;dwc_otg_driver.driver, &amp;driver_attr_debuglevel);
<a name="l00887"></a>00887 <span class="preprocessor">#endif</span>
<a name="l00888"></a>00888 <span class="preprocessor"></span>        <span class="keywordflow">return</span> retval;
<a name="l00889"></a>00889 }
<a name="l00890"></a>00890 
<a name="l00891"></a>00891 module_init(<a class="code" href="dwc__otg__driver_8c.html#737f516e934e7f479e31bf7261dd3830">dwc_otg_driver_init</a>);
<a name="l00892"></a>00892 
<a name="l00899"></a><a class="code" href="dwc__otg__driver_8c.html#e50c104d9f854418331c453b9d273dce">00899</a> <span class="keyword">static</span> <span class="keywordtype">void</span> __exit <a class="code" href="dwc__otg__driver_8c.html#e50c104d9f854418331c453b9d273dce">dwc_otg_driver_cleanup</a>(<span class="keywordtype">void</span>)
<a name="l00900"></a>00900 {
<a name="l00901"></a>00901         printk(KERN_DEBUG <span class="stringliteral">"dwc_otg_driver_cleanup()\n"</span>);
<a name="l00902"></a>00902 
<a name="l00903"></a>00903 <span class="preprocessor">#ifdef LM_INTERFACE</span>
<a name="l00904"></a>00904 <span class="preprocessor"></span>        driver_remove_file(&amp;dwc_otg_driver.drv, &amp;driver_attr_debuglevel);
<a name="l00905"></a>00905         driver_remove_file(&amp;dwc_otg_driver.drv, &amp;driver_attr_version);
<a name="l00906"></a>00906         lm_driver_unregister(&amp;dwc_otg_driver);
<a name="l00907"></a>00907 <span class="preprocessor">#elif PCI_INTERFACE</span>
<a name="l00908"></a>00908 <span class="preprocessor"></span>        driver_remove_file(&amp;dwc_otg_driver.driver, &amp;driver_attr_debuglevel);
<a name="l00909"></a>00909         driver_remove_file(&amp;dwc_otg_driver.driver, &amp;driver_attr_version);
<a name="l00910"></a>00910         pci_unregister_driver(&amp;dwc_otg_driver);
<a name="l00911"></a>00911 <span class="preprocessor">#endif</span>
<a name="l00912"></a>00912 <span class="preprocessor"></span>
<a name="l00913"></a>00913         printk(KERN_INFO <span class="stringliteral">"%s module removed\n"</span>, <a class="code" href="dwc__otg__driver_8c.html#3f7932dcd77bb7b05f92f759e6569fe2">dwc_driver_name</a>);
<a name="l00914"></a>00914 }
<a name="l00915"></a>00915 module_exit(<a class="code" href="dwc__otg__driver_8c.html#e50c104d9f854418331c453b9d273dce">dwc_otg_driver_cleanup</a>);
<a name="l00916"></a>00916 
<a name="l00917"></a>00917 MODULE_DESCRIPTION(<a class="code" href="dwc__otg__driver_8c.html#d78dec8459bcb2092d84be524494378b">DWC_DRIVER_DESC</a>);
<a name="l00918"></a>00918 MODULE_AUTHOR(<span class="stringliteral">"Synopsys Inc."</span>);
<a name="l00919"></a>00919 MODULE_LICENSE(<span class="stringliteral">"GPL"</span>);
<a name="l00920"></a>00920 
<a name="l00921"></a>00921 module_param_named(otg_cap, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#985f1849ab70919e756c86280a8f7ef0">otg_cap</a>, <span class="keywordtype">int</span>, 0444);
<a name="l00922"></a>00922 MODULE_PARM_DESC(otg_cap, <span class="stringliteral">"OTG Capabilities 0=HNP&amp;SRP 1=SRP Only 2=None"</span>);
<a name="l00923"></a>00923 module_param_named(opt, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bccaf8d2ce8da6d5ef0d1c81caf9e518">opt</a>, <span class="keywordtype">int</span>, 0444);
<a name="l00924"></a>00924 MODULE_PARM_DESC(opt, <span class="stringliteral">"OPT Mode"</span>);
<a name="l00925"></a>00925 module_param_named(dma_enable, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#fe4469605ca0460a3e309603d7c23e86">dma_enable</a>, <span class="keywordtype">int</span>, 0444);
<a name="l00926"></a>00926 MODULE_PARM_DESC(dma_enable, <span class="stringliteral">"DMA Mode 0=Slave 1=DMA enabled"</span>);
<a name="l00927"></a>00927 
<a name="l00928"></a>00928 module_param_named(dma_desc_enable, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#cdceee2a19bb233c12893751f443c40d">dma_desc_enable</a>, <span class="keywordtype">int</span>,
<a name="l00929"></a>00929                    0444);
<a name="l00930"></a>00930 MODULE_PARM_DESC(dma_desc_enable,
<a name="l00931"></a>00931                  <span class="stringliteral">"DMA Desc Mode 0=Address DMA 1=DMA Descriptor enabled"</span>);
<a name="l00932"></a>00932 
<a name="l00933"></a>00933 module_param_named(dma_burst_size, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#19c1567261677aa53120cfae53b90f8d">dma_burst_size</a>, <span class="keywordtype">int</span>,
<a name="l00934"></a>00934                    0444);
<a name="l00935"></a>00935 MODULE_PARM_DESC(dma_burst_size,
<a name="l00936"></a>00936                  <span class="stringliteral">"DMA Burst Size 1, 4, 8, 16, 32, 64, 128, 256"</span>);
<a name="l00937"></a>00937 module_param_named(speed, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#e0002437cefb2b64dc92f40fd69ef29f">speed</a>, <span class="keywordtype">int</span>, 0444);
<a name="l00938"></a>00938 MODULE_PARM_DESC(speed, <span class="stringliteral">"Speed 0=High Speed 1=Full Speed"</span>);
<a name="l00939"></a>00939 module_param_named(host_support_fs_ls_low_power,
<a name="l00940"></a>00940                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#6f3a0a2bf5c82d296fec31fec7b765ca">host_support_fs_ls_low_power</a>, <span class="keywordtype">int</span>,
<a name="l00941"></a>00941                    0444);
<a name="l00942"></a>00942 MODULE_PARM_DESC(host_support_fs_ls_low_power,
<a name="l00943"></a>00943                  <span class="stringliteral">"Support Low Power w/FS or LS 0=Support 1=Don't Support"</span>);
<a name="l00944"></a>00944 module_param_named(host_ls_low_power_phy_clk,
<a name="l00945"></a>00945                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#91c46e96e070e983e3f91c756dd4aa64">host_ls_low_power_phy_clk</a>, <span class="keywordtype">int</span>, 0444);
<a name="l00946"></a>00946 MODULE_PARM_DESC(host_ls_low_power_phy_clk,
<a name="l00947"></a>00947                  <span class="stringliteral">"Low Speed Low Power Clock 0=48Mhz 1=6Mhz"</span>);
<a name="l00948"></a>00948 module_param_named(enable_dynamic_fifo,
<a name="l00949"></a>00949                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#f448f6de6dcafca027bd2873b714b916">enable_dynamic_fifo</a>, <span class="keywordtype">int</span>, 0444);
<a name="l00950"></a>00950 MODULE_PARM_DESC(enable_dynamic_fifo, <span class="stringliteral">"0=cC Setting 1=Allow Dynamic Sizing"</span>);
<a name="l00951"></a>00951 module_param_named(data_fifo_size, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#a9ae5039d88c52fab455235bf4f8696b">data_fifo_size</a>, <span class="keywordtype">int</span>,
<a name="l00952"></a>00952                    0444);
<a name="l00953"></a>00953 MODULE_PARM_DESC(data_fifo_size,
<a name="l00954"></a>00954                  <span class="stringliteral">"Total number of words in the data FIFO memory 32-32768"</span>);
<a name="l00955"></a>00955 module_param_named(dev_rx_fifo_size, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#707eedd2d7794728c5188e5d5056316e">dev_rx_fifo_size</a>,
<a name="l00956"></a>00956                    <span class="keywordtype">int</span>, 0444);
<a name="l00957"></a>00957 MODULE_PARM_DESC(dev_rx_fifo_size, <span class="stringliteral">"Number of words in the Rx FIFO 16-32768"</span>);
<a name="l00958"></a>00958 module_param_named(dev_nperio_tx_fifo_size,
<a name="l00959"></a>00959                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#3172175dc8f08e96b63c7a8c162201f5">dev_nperio_tx_fifo_size</a>, <span class="keywordtype">int</span>, 0444);
<a name="l00960"></a>00960 MODULE_PARM_DESC(dev_nperio_tx_fifo_size,
<a name="l00961"></a>00961                  <span class="stringliteral">"Number of words in the non-periodic Tx FIFO 16-32768"</span>);
<a name="l00962"></a>00962 module_param_named(dev_perio_tx_fifo_size_1,
<a name="l00963"></a>00963                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[0], <span class="keywordtype">int</span>, 0444);
<a name="l00964"></a>00964 MODULE_PARM_DESC(dev_perio_tx_fifo_size_1,
<a name="l00965"></a>00965                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00966"></a>00966 module_param_named(dev_perio_tx_fifo_size_2,
<a name="l00967"></a>00967                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[1], <span class="keywordtype">int</span>, 0444);
<a name="l00968"></a>00968 MODULE_PARM_DESC(dev_perio_tx_fifo_size_2,
<a name="l00969"></a>00969                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00970"></a>00970 module_param_named(dev_perio_tx_fifo_size_3,
<a name="l00971"></a>00971                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[2], <span class="keywordtype">int</span>, 0444);
<a name="l00972"></a>00972 MODULE_PARM_DESC(dev_perio_tx_fifo_size_3,
<a name="l00973"></a>00973                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00974"></a>00974 module_param_named(dev_perio_tx_fifo_size_4,
<a name="l00975"></a>00975                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[3], <span class="keywordtype">int</span>, 0444);
<a name="l00976"></a>00976 MODULE_PARM_DESC(dev_perio_tx_fifo_size_4,
<a name="l00977"></a>00977                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00978"></a>00978 module_param_named(dev_perio_tx_fifo_size_5,
<a name="l00979"></a>00979                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[4], <span class="keywordtype">int</span>, 0444);
<a name="l00980"></a>00980 MODULE_PARM_DESC(dev_perio_tx_fifo_size_5,
<a name="l00981"></a>00981                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00982"></a>00982 module_param_named(dev_perio_tx_fifo_size_6,
<a name="l00983"></a>00983                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[5], <span class="keywordtype">int</span>, 0444);
<a name="l00984"></a>00984 MODULE_PARM_DESC(dev_perio_tx_fifo_size_6,
<a name="l00985"></a>00985                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00986"></a>00986 module_param_named(dev_perio_tx_fifo_size_7,
<a name="l00987"></a>00987                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[6], <span class="keywordtype">int</span>, 0444);
<a name="l00988"></a>00988 MODULE_PARM_DESC(dev_perio_tx_fifo_size_7,
<a name="l00989"></a>00989                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00990"></a>00990 module_param_named(dev_perio_tx_fifo_size_8,
<a name="l00991"></a>00991                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[7], <span class="keywordtype">int</span>, 0444);
<a name="l00992"></a>00992 MODULE_PARM_DESC(dev_perio_tx_fifo_size_8,
<a name="l00993"></a>00993                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00994"></a>00994 module_param_named(dev_perio_tx_fifo_size_9,
<a name="l00995"></a>00995                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[8], <span class="keywordtype">int</span>, 0444);
<a name="l00996"></a>00996 MODULE_PARM_DESC(dev_perio_tx_fifo_size_9,
<a name="l00997"></a>00997                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l00998"></a>00998 module_param_named(dev_perio_tx_fifo_size_10,
<a name="l00999"></a>00999                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[9], <span class="keywordtype">int</span>, 0444);
<a name="l01000"></a>01000 MODULE_PARM_DESC(dev_perio_tx_fifo_size_10,
<a name="l01001"></a>01001                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l01002"></a>01002 module_param_named(dev_perio_tx_fifo_size_11,
<a name="l01003"></a>01003                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[10], <span class="keywordtype">int</span>, 0444);
<a name="l01004"></a>01004 MODULE_PARM_DESC(dev_perio_tx_fifo_size_11,
<a name="l01005"></a>01005                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l01006"></a>01006 module_param_named(dev_perio_tx_fifo_size_12,
<a name="l01007"></a>01007                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[11], <span class="keywordtype">int</span>, 0444);
<a name="l01008"></a>01008 MODULE_PARM_DESC(dev_perio_tx_fifo_size_12,
<a name="l01009"></a>01009                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l01010"></a>01010 module_param_named(dev_perio_tx_fifo_size_13,
<a name="l01011"></a>01011                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[12], <span class="keywordtype">int</span>, 0444);
<a name="l01012"></a>01012 MODULE_PARM_DESC(dev_perio_tx_fifo_size_13,
<a name="l01013"></a>01013                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l01014"></a>01014 module_param_named(dev_perio_tx_fifo_size_14,
<a name="l01015"></a>01015                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[13], <span class="keywordtype">int</span>, 0444);
<a name="l01016"></a>01016 MODULE_PARM_DESC(dev_perio_tx_fifo_size_14,
<a name="l01017"></a>01017                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l01018"></a>01018 module_param_named(dev_perio_tx_fifo_size_15,
<a name="l01019"></a>01019                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#aada52f0668d5d52b8ac6281c8736283">dev_perio_tx_fifo_size</a>[14], <span class="keywordtype">int</span>, 0444);
<a name="l01020"></a>01020 MODULE_PARM_DESC(dev_perio_tx_fifo_size_15,
<a name="l01021"></a>01021                  <span class="stringliteral">"Number of words in the periodic Tx FIFO 4-768"</span>);
<a name="l01022"></a>01022 module_param_named(host_rx_fifo_size, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#1f490daab4c4e08d2773f46d51f1f5f7">host_rx_fifo_size</a>,
<a name="l01023"></a>01023                    <span class="keywordtype">int</span>, 0444);
<a name="l01024"></a>01024 MODULE_PARM_DESC(host_rx_fifo_size, <span class="stringliteral">"Number of words in the Rx FIFO 16-32768"</span>);
<a name="l01025"></a>01025 module_param_named(host_nperio_tx_fifo_size,
<a name="l01026"></a>01026                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#edf2038417f58acd8dab202a8ca19d2a">host_nperio_tx_fifo_size</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01027"></a>01027 MODULE_PARM_DESC(host_nperio_tx_fifo_size,
<a name="l01028"></a>01028                  <span class="stringliteral">"Number of words in the non-periodic Tx FIFO 16-32768"</span>);
<a name="l01029"></a>01029 module_param_named(host_perio_tx_fifo_size,
<a name="l01030"></a>01030                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bdc820350ca3b6aec5ac435c9712ccd5">host_perio_tx_fifo_size</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01031"></a>01031 MODULE_PARM_DESC(host_perio_tx_fifo_size,
<a name="l01032"></a>01032                  <span class="stringliteral">"Number of words in the host periodic Tx FIFO 16-32768"</span>);
<a name="l01033"></a>01033 module_param_named(max_transfer_size, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#16cc5351ae1dfbcd81d56a7ec16e1748">max_transfer_size</a>,
<a name="l01034"></a>01034                    <span class="keywordtype">int</span>, 0444);
<a name="l01036"></a>01036 MODULE_PARM_DESC(max_transfer_size,
<a name="l01037"></a>01037                  <span class="stringliteral">"The maximum transfer size supported in bytes 2047-65535"</span>);
<a name="l01038"></a>01038 module_param_named(max_packet_count, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bb7904edc790fce40ac04ed68a64217e">max_packet_count</a>,
<a name="l01039"></a>01039                    <span class="keywordtype">int</span>, 0444);
<a name="l01040"></a>01040 MODULE_PARM_DESC(max_packet_count,
<a name="l01041"></a>01041                  <span class="stringliteral">"The maximum number of packets in a transfer 15-511"</span>);
<a name="l01042"></a>01042 module_param_named(host_channels, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#4727585082d86c52396adfde0cfffa17">host_channels</a>, <span class="keywordtype">int</span>,
<a name="l01043"></a>01043                    0444);
<a name="l01044"></a>01044 MODULE_PARM_DESC(host_channels,
<a name="l01045"></a>01045                  <span class="stringliteral">"The number of host channel registers to use 1-16"</span>);
<a name="l01046"></a>01046 module_param_named(dev_endpoints, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#c1c36daec6af25fb425c85a696c445e4">dev_endpoints</a>, <span class="keywordtype">int</span>,
<a name="l01047"></a>01047                    0444);
<a name="l01048"></a>01048 MODULE_PARM_DESC(dev_endpoints,
<a name="l01049"></a>01049                  <span class="stringliteral">"The number of endpoints in addition to EP0 available for device mode 1-15"</span>);
<a name="l01050"></a>01050 module_param_named(phy_type, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#77d1c10524440ed2e5189624157526ac">phy_type</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01051"></a>01051 MODULE_PARM_DESC(phy_type, <span class="stringliteral">"0=Reserved 1=UTMI+ 2=ULPI"</span>);
<a name="l01052"></a>01052 module_param_named(phy_utmi_width, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#f6284c33f13fe2f02491fa1a0c479b25">phy_utmi_width</a>, <span class="keywordtype">int</span>,
<a name="l01053"></a>01053                    0444);
<a name="l01054"></a>01054 MODULE_PARM_DESC(phy_utmi_width, <span class="stringliteral">"Specifies the UTMI+ Data Width 8 or 16 bits"</span>);
<a name="l01055"></a>01055 module_param_named(phy_ulpi_ddr, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#6a2b8c0c6298a7b1da23d5dd5abc4da8">phy_ulpi_ddr</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01056"></a>01056 MODULE_PARM_DESC(phy_ulpi_ddr,
<a name="l01057"></a>01057                  <span class="stringliteral">"ULPI at double or single data rate 0=Single 1=Double"</span>);
<a name="l01058"></a>01058 module_param_named(phy_ulpi_ext_vbus, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#8402de29e6ec24baa5881cb7d74914c2">phy_ulpi_ext_vbus</a>,
<a name="l01059"></a>01059                    <span class="keywordtype">int</span>, 0444);
<a name="l01060"></a>01060 MODULE_PARM_DESC(phy_ulpi_ext_vbus,
<a name="l01061"></a>01061                  <span class="stringliteral">"ULPI PHY using internal or external vbus 0=Internal"</span>);
<a name="l01062"></a>01062 module_param_named(i2c_enable, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#4e1d822cfcc6332fcaa0471bb1ca0d54">i2c_enable</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01063"></a>01063 MODULE_PARM_DESC(i2c_enable, <span class="stringliteral">"FS PHY Interface"</span>);
<a name="l01064"></a>01064 module_param_named(ulpi_fs_ls, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#33489751a5cef9e462d26e92caae3031">ulpi_fs_ls</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01065"></a>01065 MODULE_PARM_DESC(ulpi_fs_ls, <span class="stringliteral">"ULPI PHY FS/LS mode only"</span>);
<a name="l01066"></a>01066 module_param_named(ts_dline, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#25f8f9c3558aa01fecf8bcd1527ee6cc">ts_dline</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01067"></a>01067 MODULE_PARM_DESC(ts_dline, <span class="stringliteral">"Term select Dline pulsing for all PHYs"</span>);
<a name="l01068"></a>01068 module_param_named(debug, <a class="code" href="dwc__otg__dbg_8h.html#7ef4ada2ebb5f1aadf3be4d7fbf8ce62">g_dbg_lvl</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01069"></a>01069 MODULE_PARM_DESC(debug, <span class="stringliteral">""</span>);
<a name="l01070"></a>01070 
<a name="l01071"></a>01071 module_param_named(en_multiple_tx_fifo,
<a name="l01072"></a>01072                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#13860bb2c8d23e40088703289e6ae835">en_multiple_tx_fifo</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01073"></a>01073 MODULE_PARM_DESC(en_multiple_tx_fifo,
<a name="l01074"></a>01074                  <span class="stringliteral">"Dedicated Non Periodic Tx FIFOs 0=disabled 1=enabled"</span>);
<a name="l01075"></a>01075 module_param_named(dev_tx_fifo_size_1,
<a name="l01076"></a>01076                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[0], <span class="keywordtype">int</span>, 0444);
<a name="l01077"></a>01077 MODULE_PARM_DESC(dev_tx_fifo_size_1, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01078"></a>01078 module_param_named(dev_tx_fifo_size_2,
<a name="l01079"></a>01079                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[1], <span class="keywordtype">int</span>, 0444);
<a name="l01080"></a>01080 MODULE_PARM_DESC(dev_tx_fifo_size_2, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01081"></a>01081 module_param_named(dev_tx_fifo_size_3,
<a name="l01082"></a>01082                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[2], <span class="keywordtype">int</span>, 0444);
<a name="l01083"></a>01083 MODULE_PARM_DESC(dev_tx_fifo_size_3, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01084"></a>01084 module_param_named(dev_tx_fifo_size_4,
<a name="l01085"></a>01085                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[3], <span class="keywordtype">int</span>, 0444);
<a name="l01086"></a>01086 MODULE_PARM_DESC(dev_tx_fifo_size_4, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01087"></a>01087 module_param_named(dev_tx_fifo_size_5,
<a name="l01088"></a>01088                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[4], <span class="keywordtype">int</span>, 0444);
<a name="l01089"></a>01089 MODULE_PARM_DESC(dev_tx_fifo_size_5, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01090"></a>01090 module_param_named(dev_tx_fifo_size_6,
<a name="l01091"></a>01091                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[5], <span class="keywordtype">int</span>, 0444);
<a name="l01092"></a>01092 MODULE_PARM_DESC(dev_tx_fifo_size_6, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01093"></a>01093 module_param_named(dev_tx_fifo_size_7,
<a name="l01094"></a>01094                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[6], <span class="keywordtype">int</span>, 0444);
<a name="l01095"></a>01095 MODULE_PARM_DESC(dev_tx_fifo_size_7, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01096"></a>01096 module_param_named(dev_tx_fifo_size_8,
<a name="l01097"></a>01097                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[7], <span class="keywordtype">int</span>, 0444);
<a name="l01098"></a>01098 MODULE_PARM_DESC(dev_tx_fifo_size_8, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01099"></a>01099 module_param_named(dev_tx_fifo_size_9,
<a name="l01100"></a>01100                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[8], <span class="keywordtype">int</span>, 0444);
<a name="l01101"></a>01101 MODULE_PARM_DESC(dev_tx_fifo_size_9, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01102"></a>01102 module_param_named(dev_tx_fifo_size_10,
<a name="l01103"></a>01103                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[9], <span class="keywordtype">int</span>, 0444);
<a name="l01104"></a>01104 MODULE_PARM_DESC(dev_tx_fifo_size_10, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01105"></a>01105 module_param_named(dev_tx_fifo_size_11,
<a name="l01106"></a>01106                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[10], <span class="keywordtype">int</span>, 0444);
<a name="l01107"></a>01107 MODULE_PARM_DESC(dev_tx_fifo_size_11, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01108"></a>01108 module_param_named(dev_tx_fifo_size_12,
<a name="l01109"></a>01109                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[11], <span class="keywordtype">int</span>, 0444);
<a name="l01110"></a>01110 MODULE_PARM_DESC(dev_tx_fifo_size_12, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01111"></a>01111 module_param_named(dev_tx_fifo_size_13,
<a name="l01112"></a>01112                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[12], <span class="keywordtype">int</span>, 0444);
<a name="l01113"></a>01113 MODULE_PARM_DESC(dev_tx_fifo_size_13, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01114"></a>01114 module_param_named(dev_tx_fifo_size_14,
<a name="l01115"></a>01115                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[13], <span class="keywordtype">int</span>, 0444);
<a name="l01116"></a>01116 MODULE_PARM_DESC(dev_tx_fifo_size_14, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01117"></a>01117 module_param_named(dev_tx_fifo_size_15,
<a name="l01118"></a>01118                    <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#d1c3fbc5325b13e1191388b76795b848">dev_tx_fifo_size</a>[14], <span class="keywordtype">int</span>, 0444);
<a name="l01119"></a>01119 MODULE_PARM_DESC(dev_tx_fifo_size_15, <span class="stringliteral">"Number of words in the Tx FIFO 4-768"</span>);
<a name="l01120"></a>01120 
<a name="l01121"></a>01121 module_param_named(thr_ctl, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#7fe5c7ff692926fb5cbe3b10d4123594">thr_ctl</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01122"></a>01122 MODULE_PARM_DESC(thr_ctl,
<a name="l01123"></a>01123                  <span class="stringliteral">"Thresholding enable flag bit 0 - non ISO Tx thr., 1 - ISO Tx thr., 2 - Rx thr.- bit 0=disabled 1=enabled"</span>);
<a name="l01124"></a>01124 module_param_named(tx_thr_length, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#04d15f44d06c291acfeef82812bd1c65">tx_thr_length</a>, <span class="keywordtype">int</span>,
<a name="l01125"></a>01125                    0444);
<a name="l01126"></a>01126 MODULE_PARM_DESC(tx_thr_length, <span class="stringliteral">"Tx Threshold length in 32 bit DWORDs"</span>);
<a name="l01127"></a>01127 module_param_named(rx_thr_length, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#eecdc71dde5ce0543a04d541a90f79bc">rx_thr_length</a>, <span class="keywordtype">int</span>,
<a name="l01128"></a>01128                    0444);
<a name="l01129"></a>01129 MODULE_PARM_DESC(rx_thr_length, <span class="stringliteral">"Rx Threshold length in 32 bit DWORDs"</span>);
<a name="l01130"></a>01130 
<a name="l01131"></a>01131 module_param_named(pti_enable, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#2e17f84d9b07732a7fdf37b13832c54a">pti_enable</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01132"></a>01132 module_param_named(mpi_enable, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#484412984c814a6298b05b58d94bd730">mpi_enable</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01133"></a>01133 module_param_named(lpm_enable, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#bb4e33c533d53de007814f0e5a70dd8a">lpm_enable</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01134"></a>01134 MODULE_PARM_DESC(lpm_enable, <span class="stringliteral">"LPM Enable 0=LPM Disabled 1=LPM Enabled"</span>);
<a name="l01135"></a>01135 module_param_named(ic_usb_cap, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#ed3802eea4e62cd79ef7d8701d45b506">ic_usb_cap</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01136"></a>01136 MODULE_PARM_DESC(ic_usb_cap,
<a name="l01137"></a>01137                  <span class="stringliteral">"IC_USB Capability 0=IC_USB Disabled 1=IC_USB Enabled"</span>);
<a name="l01138"></a>01138 module_param_named(ahb_thr_ratio, <a class="code" href="dwc__otg__driver_8c.html#887d74166238890f65ffb620e39c759b">dwc_otg_module_params</a>.<a class="code" href="structdwc__otg__driver__module__params.html#b450246efcbc087eb36b0979040162ca">ahb_thr_ratio</a>, <span class="keywordtype">int</span>, 0444);
<a name="l01139"></a>01139 MODULE_PARM_DESC(ahb_thr_ratio, <span class="stringliteral">"AHB Threshold Ratio"</span>);
<a name="l01140"></a>01140 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:48 2009 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
