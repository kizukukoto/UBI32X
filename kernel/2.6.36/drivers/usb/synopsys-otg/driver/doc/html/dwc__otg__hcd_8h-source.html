<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_hcd.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dwc_otg_hcd.h</h1><a href="dwc__otg__hcd_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ==========================================================================</span>
<a name="l00002"></a>00002 <span class="comment"> * $File: //dwh/usb_iip/dev/software/otg/linux/drivers/dwc_otg_hcd.h $</span>
<a name="l00003"></a>00003 <span class="comment"> * $Revision: #52 $</span>
<a name="l00004"></a>00004 <span class="comment"> * $Date: 2009/04/21 $</span>
<a name="l00005"></a>00005 <span class="comment"> * $Change: 1237472 $</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * Synopsys HS OTG Linux Software Driver and documentation (hereinafter,</span>
<a name="l00008"></a>00008 <span class="comment"> * "Software") is an Unsupported proprietary work of Synopsys, Inc. unless</span>
<a name="l00009"></a>00009 <span class="comment"> * otherwise expressly agreed to in writing between Synopsys and you.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * The Software IS NOT an item of Licensed Software or Licensed Product under</span>
<a name="l00012"></a>00012 <span class="comment"> * any End User Software License Agreement or Agreement for Licensed Product</span>
<a name="l00013"></a>00013 <span class="comment"> * with Synopsys or any supplement thereto. You are permitted to use and</span>
<a name="l00014"></a>00014 <span class="comment"> * redistribute this Software in source and binary forms, with or without</span>
<a name="l00015"></a>00015 <span class="comment"> * modification, provided that redistributions of source code must retain this</span>
<a name="l00016"></a>00016 <span class="comment"> * notice. You may not view, use, disclose, copy or distribute this file or</span>
<a name="l00017"></a>00017 <span class="comment"> * any information contained herein except pursuant to this license grant from</span>
<a name="l00018"></a>00018 <span class="comment"> * Synopsys. If you do not agree with this notice, including the disclaimer</span>
<a name="l00019"></a>00019 <span class="comment"> * below, then you are not authorized to use the Software.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * THIS SOFTWARE IS BEING DISTRIBUTED BY SYNOPSYS SOLELY ON AN "AS IS" BASIS</span>
<a name="l00022"></a>00022 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00023"></a>00023 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00024"></a>00024 <span class="comment"> * ARE HEREBY DISCLAIMED. IN NO EVENT SHALL SYNOPSYS BE LIABLE FOR ANY DIRECT,</span>
<a name="l00025"></a>00025 <span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<a name="l00026"></a>00026 <span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00027"></a>00027 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00028"></a>00028 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00029"></a>00029 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00030"></a>00030 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<a name="l00031"></a>00031 <span class="comment"> * DAMAGE.</span>
<a name="l00032"></a>00032 <span class="comment"> * ========================================================================== */</span>
<a name="l00033"></a>00033 <span class="preprocessor">#ifndef DWC_DEVICE_ONLY</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#ifndef __DWC_HCD_H__</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#define __DWC_HCD_H__</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;usb.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include "<a class="code" href="dwc__otg__hcd__if_8h.html">dwc_otg_hcd_if.h</a>"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "<a class="code" href="dwc__otg__core__if_8h.html">dwc_otg_core_if.h</a>"</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include "dwc_list.h"</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include "<a class="code" href="dwc__otg__cil_8h.html">dwc_otg_cil.h</a>"</span>
<a name="l00042"></a>00042 
<a name="l00055"></a><a class="code" href="structdwc__otg__hcd__pipe__info.html">00055</a> <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> {
<a name="l00056"></a><a class="code" href="structdwc__otg__hcd__pipe__info.html#3812ead0191c9b3bebf48fe8ea370d78">00056</a>         uint8_t <a class="code" href="structdwc__otg__hcd__pipe__info.html#3812ead0191c9b3bebf48fe8ea370d78">dev_addr</a>;
<a name="l00057"></a><a class="code" href="structdwc__otg__hcd__pipe__info.html#57b54466daa38c3a77f48e94c5e30f0d">00057</a>         uint8_t <a class="code" href="structdwc__otg__hcd__pipe__info.html#57b54466daa38c3a77f48e94c5e30f0d">ep_num</a>;
<a name="l00058"></a><a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">00058</a>         uint8_t <a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">pipe_type</a>;
<a name="l00059"></a><a class="code" href="structdwc__otg__hcd__pipe__info.html#8342fc4305ea957e2fa78f2bc9e707e4">00059</a>         uint8_t <a class="code" href="structdwc__otg__hcd__pipe__info.html#8342fc4305ea957e2fa78f2bc9e707e4">pipe_dir</a>;
<a name="l00060"></a><a class="code" href="structdwc__otg__hcd__pipe__info.html#b1d585e71a4e15bc79fc5f6d87bada6a">00060</a>         uint16_t <a class="code" href="structdwc__otg__hcd__pipe__info.html#b1d585e71a4e15bc79fc5f6d87bada6a">mps</a>;
<a name="l00061"></a>00061 };
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="structdwc__otg__hcd__iso__packet__desc.html">00063</a> <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd__iso__packet__desc.html">dwc_otg_hcd_iso_packet_desc</a> {
<a name="l00064"></a><a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#246f3d147a22cd295c534253593dca4a">00064</a>         uint32_t <a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#246f3d147a22cd295c534253593dca4a">offset</a>;
<a name="l00065"></a><a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#8392d21b820df0181f4e6dca91234543">00065</a>         uint32_t <a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#8392d21b820df0181f4e6dca91234543">length</a>;
<a name="l00066"></a><a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#c00b967f4c613820b99efc0abda5178c">00066</a>         uint32_t <a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#c00b967f4c613820b99efc0abda5178c">actual_length</a>;
<a name="l00067"></a><a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#d070772c24621c47b49ad21c6acadb94">00067</a>         uint32_t <a class="code" href="structdwc__otg__hcd__iso__packet__desc.html#d070772c24621c47b49ad21c6acadb94">status</a>;
<a name="l00068"></a>00068 };
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="keyword">struct </span><a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd</a>;
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="structdwc__otg__hcd__urb.html">00072</a> <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb</a> {
<a name="l00073"></a><a class="code" href="structdwc__otg__hcd__urb.html#5ba0e393ef9768275db85c00e68be477">00073</a>         <span class="keywordtype">void</span> *<a class="code" href="structdwc__otg__hcd__urb.html#5ba0e393ef9768275db85c00e68be477">priv</a>;
<a name="l00074"></a><a class="code" href="structdwc__otg__hcd__urb.html#68dc4d459bb70aed6083553653aadaad">00074</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd</a> *<a class="code" href="structdwc__otg__hcd__urb.html#68dc4d459bb70aed6083553653aadaad">qtd</a>;
<a name="l00075"></a><a class="code" href="structdwc__otg__hcd__urb.html#99ae35ffcd6147ddb93b361ab3bcfe95">00075</a>         <span class="keywordtype">void</span> *<a class="code" href="structdwc__otg__hcd__urb.html#99ae35ffcd6147ddb93b361ab3bcfe95">buf</a>;
<a name="l00076"></a><a class="code" href="structdwc__otg__hcd__urb.html#4e177a55239e95ae2f6c8b6b913f67fc">00076</a>         dwc_dma_t <a class="code" href="structdwc__otg__hcd__urb.html#4e177a55239e95ae2f6c8b6b913f67fc">dma</a>;
<a name="l00077"></a><a class="code" href="structdwc__otg__hcd__urb.html#254afd954f3e24bb92841384183a317c">00077</a>         <span class="keywordtype">void</span> *<a class="code" href="structdwc__otg__hcd__urb.html#254afd954f3e24bb92841384183a317c">setup_packet</a>;
<a name="l00078"></a><a class="code" href="structdwc__otg__hcd__urb.html#497f61f9b3f6f77f6b844e31c047264d">00078</a>         dwc_dma_t <a class="code" href="structdwc__otg__hcd__urb.html#497f61f9b3f6f77f6b844e31c047264d">setup_dma</a>;
<a name="l00079"></a><a class="code" href="structdwc__otg__hcd__urb.html#dca57de4fdecd894241ce24167206a45">00079</a>         uint32_t <a class="code" href="structdwc__otg__hcd__urb.html#dca57de4fdecd894241ce24167206a45">length</a>;
<a name="l00080"></a><a class="code" href="structdwc__otg__hcd__urb.html#742c8a97d3867ab89148eae34e0c73a6">00080</a>         uint32_t <a class="code" href="structdwc__otg__hcd__urb.html#742c8a97d3867ab89148eae34e0c73a6">actual_length</a>;
<a name="l00081"></a><a class="code" href="structdwc__otg__hcd__urb.html#101e4a6762b9911cdb85768890fa1210">00081</a>         uint32_t <a class="code" href="structdwc__otg__hcd__urb.html#101e4a6762b9911cdb85768890fa1210">status</a>;
<a name="l00082"></a><a class="code" href="structdwc__otg__hcd__urb.html#58c7018042c94c436637ea80354e7e28">00082</a>         uint32_t <a class="code" href="structdwc__otg__hcd__urb.html#58c7018042c94c436637ea80354e7e28">error_count</a>;
<a name="l00083"></a><a class="code" href="structdwc__otg__hcd__urb.html#570583697e8c1e4398969630bc2562f8">00083</a>         uint32_t <a class="code" href="structdwc__otg__hcd__urb.html#570583697e8c1e4398969630bc2562f8">packet_count</a>;
<a name="l00084"></a><a class="code" href="structdwc__otg__hcd__urb.html#2f1d90765496d78d297b3e57ef4d781c">00084</a>         uint32_t <a class="code" href="structdwc__otg__hcd__urb.html#2f1d90765496d78d297b3e57ef4d781c">flags</a>;
<a name="l00085"></a><a class="code" href="structdwc__otg__hcd__urb.html#49c5353377e2fb173f1b34ae7be7e257">00085</a>         uint16_t <a class="code" href="structdwc__otg__hcd__urb.html#49c5353377e2fb173f1b34ae7be7e257">interval</a>;
<a name="l00086"></a><a class="code" href="structdwc__otg__hcd__urb.html#34ee3ac5931687b41dd726f00c558369">00086</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> <a class="code" href="structdwc__otg__hcd__urb.html#34ee3ac5931687b41dd726f00c558369">pipe_info</a>;
<a name="l00087"></a><a class="code" href="structdwc__otg__hcd__urb.html#ed542f6a2d99dba2f6b71b0d8012ec8a">00087</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd__iso__packet__desc.html">dwc_otg_hcd_iso_packet_desc</a> <a class="code" href="structdwc__otg__hcd__urb.html#ed542f6a2d99dba2f6b71b0d8012ec8a">iso_descs</a>[0];
<a name="l00088"></a>00088 };
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="dwc__otg__hcd_8h.html#367b79057f321cfa65023f4026d6c2c9">00090</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#367b79057f321cfa65023f4026d6c2c9">dwc_otg_hcd_get_ep_num</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)
<a name="l00091"></a>00091 {
<a name="l00092"></a>00092         <span class="keywordflow">return</span> pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#57b54466daa38c3a77f48e94c5e30f0d">ep_num</a>;
<a name="l00093"></a>00093 }
<a name="l00094"></a>00094 
<a name="l00095"></a><a class="code" href="dwc__otg__hcd_8h.html#b97cea598797e69d011ffef89989a739">00095</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#b97cea598797e69d011ffef89989a739">dwc_otg_hcd_get_pipe_type</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a>
<a name="l00096"></a>00096                                                 *pipe)
<a name="l00097"></a>00097 {
<a name="l00098"></a>00098         <span class="keywordflow">return</span> pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">pipe_type</a>;
<a name="l00099"></a>00099 }
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="dwc__otg__hcd_8h.html#e47df3e0ac1c8ccc916e0c0895568c88">00101</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint16_t <a class="code" href="dwc__otg__hcd_8h.html#e47df3e0ac1c8ccc916e0c0895568c88">dwc_otg_hcd_get_mps</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)
<a name="l00102"></a>00102 {
<a name="l00103"></a>00103         <span class="keywordflow">return</span> pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#b1d585e71a4e15bc79fc5f6d87bada6a">mps</a>;
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="dwc__otg__hcd_8h.html#0de365358ba4472d56c1ac8074ba926b">00106</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#0de365358ba4472d56c1ac8074ba926b">dwc_otg_hcd_get_dev_addr</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a>
<a name="l00107"></a>00107                                                *pipe)
<a name="l00108"></a>00108 {
<a name="l00109"></a>00109         <span class="keywordflow">return</span> pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#3812ead0191c9b3bebf48fe8ea370d78">dev_addr</a>;
<a name="l00110"></a>00110 }
<a name="l00111"></a>00111 
<a name="l00112"></a><a class="code" href="dwc__otg__hcd_8h.html#3ae411bce062f6929961046492c96330">00112</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#3ae411bce062f6929961046492c96330">dwc_otg_hcd_is_pipe_isoc</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a>
<a name="l00113"></a>00113                                                *pipe)
<a name="l00114"></a>00114 {
<a name="l00115"></a>00115         <span class="keywordflow">return</span> (pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">pipe_type</a> == UE_ISOCHRONOUS);
<a name="l00116"></a>00116 }
<a name="l00117"></a>00117 
<a name="l00118"></a><a class="code" href="dwc__otg__hcd_8h.html#9bd15e815decf74a7033c11e57d98bde">00118</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#9bd15e815decf74a7033c11e57d98bde">dwc_otg_hcd_is_pipe_int</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a>
<a name="l00119"></a>00119                                               *pipe)
<a name="l00120"></a>00120 {
<a name="l00121"></a>00121         <span class="keywordflow">return</span> (pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">pipe_type</a> == UE_INTERRUPT);
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="dwc__otg__hcd_8h.html#7e0a4084d0444c4375dd60250b860ad8">00124</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#7e0a4084d0444c4375dd60250b860ad8">dwc_otg_hcd_is_pipe_bulk</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a>
<a name="l00125"></a>00125                                                *pipe)
<a name="l00126"></a>00126 {
<a name="l00127"></a>00127         <span class="keywordflow">return</span> (pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">pipe_type</a> == UE_BULK);
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="dwc__otg__hcd_8h.html#d40e602eb8b015dc3908a23d2f8fbb7a">00130</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#d40e602eb8b015dc3908a23d2f8fbb7a">dwc_otg_hcd_is_pipe_control</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a>
<a name="l00131"></a>00131                                                   *pipe)
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133         <span class="keywordflow">return</span> (pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">pipe_type</a> == UE_CONTROL);
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="dwc__otg__hcd_8h.html#68de5629a8b45d9bec58f680fa4c820c">00136</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#68de5629a8b45d9bec58f680fa4c820c">dwc_otg_hcd_is_pipe_in</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138         <span class="keywordflow">return</span> (pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#8342fc4305ea957e2fa78f2bc9e707e4">pipe_dir</a> == UE_DIR_IN);
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="dwc__otg__hcd_8h.html#cf3e5e59a22ef6bd497e05710e39cad0">00141</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="dwc__otg__hcd_8h.html#cf3e5e59a22ef6bd497e05710e39cad0">dwc_otg_hcd_is_pipe_out</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a>
<a name="l00142"></a>00142                                               *pipe)
<a name="l00143"></a>00143 {
<a name="l00144"></a>00144         <span class="keywordflow">return</span> (!<a class="code" href="dwc__otg__hcd_8h.html#68de5629a8b45d9bec58f680fa4c820c">dwc_otg_hcd_is_pipe_in</a>(pipe));
<a name="l00145"></a>00145 }
<a name="l00146"></a>00146 
<a name="l00147"></a><a class="code" href="dwc__otg__hcd_8h.html#4806306754f0414ad9cee3067cdda8c9">00147</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#4806306754f0414ad9cee3067cdda8c9">dwc_otg_hcd_fill_pipe</a>(<span class="keyword">struct</span> <a class="code" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe,
<a name="l00148"></a>00148                                          uint8_t devaddr, uint8_t ep_num,
<a name="l00149"></a>00149                                          uint8_t pipe_type, uint8_t pipe_dir,
<a name="l00150"></a>00150                                          uint16_t mps)
<a name="l00151"></a>00151 {
<a name="l00152"></a>00152         pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#3812ead0191c9b3bebf48fe8ea370d78">dev_addr</a> = devaddr;
<a name="l00153"></a>00153         pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#57b54466daa38c3a77f48e94c5e30f0d">ep_num</a> = ep_num;
<a name="l00154"></a>00154         pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#0278c3069bc464cc4dbed8f6647f5856">pipe_type</a> = pipe_type;
<a name="l00155"></a>00155         pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#8342fc4305ea957e2fa78f2bc9e707e4">pipe_dir</a> = pipe_dir;
<a name="l00156"></a>00156         pipe-&gt;<a class="code" href="structdwc__otg__hcd__pipe__info.html#b1d585e71a4e15bc79fc5f6d87bada6a">mps</a> = mps;
<a name="l00157"></a>00157 }
<a name="l00158"></a>00158 
<a name="l00162"></a><a class="code" href="dwc__otg__hcd_8h.html#4ec934997af9e24c8eede108d399c140">00162</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="dwc__otg__hcd_8h.html#4ec934997af9e24c8eede108d399c140">dwc_otg_control_phase</a> {
<a name="l00163"></a>00163         DWC_OTG_CONTROL_SETUP,
<a name="l00164"></a>00164         DWC_OTG_CONTROL_DATA,
<a name="l00165"></a>00165         DWC_OTG_CONTROL_STATUS
<a name="l00166"></a>00166 } <a class="code" href="dwc__otg__hcd_8h.html#be7c5653ee5e9d33855d2513f31b56a5">dwc_otg_control_phase_e</a>;
<a name="l00167"></a>00167 
<a name="l00169"></a><a class="code" href="dwc__otg__hcd_8h.html#0ab043da15526ddcd3f3698505d52d83">00169</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="dwc__otg__hcd_8h.html#0ab043da15526ddcd3f3698505d52d83">dwc_otg_transaction_type</a> {
<a name="l00170"></a>00170         DWC_OTG_TRANSACTION_NONE,
<a name="l00171"></a>00171         DWC_OTG_TRANSACTION_PERIODIC,
<a name="l00172"></a>00172         DWC_OTG_TRANSACTION_NON_PERIODIC,
<a name="l00173"></a>00173         DWC_OTG_TRANSACTION_ALL
<a name="l00174"></a>00174 } <a class="code" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a>;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="keyword">struct </span><a class="code" href="structdwc__otg__qh.html">dwc_otg_qh</a>;
<a name="l00177"></a>00177 
<a name="l00191"></a><a class="code" href="structdwc__otg__qtd.html">00191</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd</a> {
<a name="l00199"></a><a class="code" href="structdwc__otg__qtd.html#e912f256e01165b573c26262247a5eff">00199</a>         uint8_t <a class="code" href="structdwc__otg__qtd.html#e912f256e01165b573c26262247a5eff">data_toggle</a>;
<a name="l00200"></a>00200 
<a name="l00202"></a><a class="code" href="structdwc__otg__qtd.html#5189ec9c992974d20477481eaf96d0bb">00202</a>         <a class="code" href="dwc__otg__hcd_8h.html#be7c5653ee5e9d33855d2513f31b56a5">dwc_otg_control_phase_e</a> <a class="code" href="structdwc__otg__qtd.html#5189ec9c992974d20477481eaf96d0bb">control_phase</a>;
<a name="l00203"></a>00203 
<a name="l00206"></a><a class="code" href="structdwc__otg__qtd.html#6355e968a4d36edce3e22c89ac7b5001">00206</a>         uint8_t <a class="code" href="structdwc__otg__qtd.html#6355e968a4d36edce3e22c89ac7b5001">complete_split</a>;
<a name="l00207"></a>00207 
<a name="l00209"></a><a class="code" href="structdwc__otg__qtd.html#badffe465e850133c62c8f7e539f3fca">00209</a>         uint32_t <a class="code" href="structdwc__otg__qtd.html#badffe465e850133c62c8f7e539f3fca">ssplit_out_xfer_count</a>;
<a name="l00210"></a>00210 
<a name="l00215"></a><a class="code" href="structdwc__otg__qtd.html#18eeb9c647049aec468bf9a7861c873f">00215</a>         uint8_t <a class="code" href="structdwc__otg__qtd.html#18eeb9c647049aec468bf9a7861c873f">error_count</a>;
<a name="l00216"></a>00216 
<a name="l00224"></a><a class="code" href="structdwc__otg__qtd.html#c67d5f885976d0698f20d113d32b4b30">00224</a>         uint16_t <a class="code" href="structdwc__otg__qtd.html#c67d5f885976d0698f20d113d32b4b30">isoc_frame_index</a>;
<a name="l00225"></a>00225 
<a name="l00227"></a><a class="code" href="structdwc__otg__qtd.html#ab224d64d72f2ef4f10e722ebcfa29a6">00227</a>         uint8_t <a class="code" href="structdwc__otg__qtd.html#ab224d64d72f2ef4f10e722ebcfa29a6">isoc_split_pos</a>;
<a name="l00228"></a>00228 
<a name="l00230"></a><a class="code" href="structdwc__otg__qtd.html#839371940a7e34365e2272f3214b7e34">00230</a>         uint16_t <a class="code" href="structdwc__otg__qtd.html#839371940a7e34365e2272f3214b7e34">isoc_split_offset</a>;
<a name="l00231"></a>00231 
<a name="l00233"></a><a class="code" href="structdwc__otg__qtd.html#7e7767808e8eb9d71de0db00f57553f9">00233</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb</a> *<a class="code" href="structdwc__otg__qtd.html#7e7767808e8eb9d71de0db00f57553f9">urb</a>;
<a name="l00234"></a>00234 
<a name="l00235"></a><a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">00235</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__qh.html">dwc_otg_qh</a> *<a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>;
<a name="l00236"></a>00236 
<a name="l00238"></a>00238          <a class="code" href="structdwc__otg__qtd.html#aac18e92835ac0678a83d023660f1560">DWC_CIRCLEQ_ENTRY</a>(<a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd</a>) qtd_list_entry;
<a name="l00239"></a>00239 
<a name="l00241"></a><a class="code" href="structdwc__otg__qtd.html#c1d73f1d48eeabbdc198ad28c0882bc1">00241</a>         uint8_t <a class="code" href="structdwc__otg__qtd.html#c1d73f1d48eeabbdc198ad28c0882bc1">in_process</a>;
<a name="l00242"></a>00242 
<a name="l00244"></a><a class="code" href="structdwc__otg__qtd.html#ef3021e617cf1f448bd23b1f7ab3859b">00244</a>         uint8_t <a class="code" href="structdwc__otg__qtd.html#ef3021e617cf1f448bd23b1f7ab3859b">n_desc</a>;
<a name="l00245"></a>00245         
<a name="l00250"></a><a class="code" href="structdwc__otg__qtd.html#c296d49e3615e35c06b83e7febc31943">00250</a>         uint16_t <a class="code" href="structdwc__otg__qtd.html#c296d49e3615e35c06b83e7febc31943">isoc_frame_index_last</a>;
<a name="l00251"></a>00251         
<a name="l00252"></a>00252 } <a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a>;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 DWC_CIRCLEQ_HEAD(dwc_otg_qtd_list, <a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd</a>);
<a name="l00255"></a>00255 
<a name="l00261"></a><a class="code" href="structdwc__otg__qh.html">00261</a> typedef struct <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh</a> {
<a name="l00270"></a><a class="code" href="structdwc__otg__qh.html#98b78ffd8dbc01be44b302e873e73a82">00270</a>         uint8_t <a class="code" href="structdwc__otg__qh.html#98b78ffd8dbc01be44b302e873e73a82">ep_type</a>;
<a name="l00271"></a><a class="code" href="structdwc__otg__qh.html#2dc622878a6617e5c803061804d5cf9f">00271</a>         uint8_t <a class="code" href="structdwc__otg__qh.html#2dc622878a6617e5c803061804d5cf9f">ep_is_in</a>;
<a name="l00272"></a>00272 
<a name="l00274"></a><a class="code" href="structdwc__otg__qh.html#5975c2bede1ca0c6cfe9a66fe0a52567">00274</a>         uint16_t <a class="code" href="structdwc__otg__qh.html#5975c2bede1ca0c6cfe9a66fe0a52567">maxp</a>;
<a name="l00275"></a>00275 
<a name="l00283"></a><a class="code" href="structdwc__otg__qh.html#42459dd91e199807783000b6dc358a7d">00283</a>         uint8_t <a class="code" href="structdwc__otg__qh.html#42459dd91e199807783000b6dc358a7d">dev_speed</a>;
<a name="l00284"></a>00284 
<a name="l00292"></a><a class="code" href="structdwc__otg__qh.html#b0e001bfd76f5781926795ac47ef2c25">00292</a>         uint8_t <a class="code" href="structdwc__otg__qtd.html#e912f256e01165b573c26262247a5eff">data_toggle</a>;
<a name="l00293"></a>00293 
<a name="l00295"></a><a class="code" href="structdwc__otg__qh.html#2c115474978a808c797c8975d72e419d">00295</a>         uint8_t <a class="code" href="structdwc__otg__qh.html#2c115474978a808c797c8975d72e419d">ping_state</a>;
<a name="l00296"></a>00296 
<a name="l00300"></a><a class="code" href="structdwc__otg__qh.html#9567d266da8e796d3467fb16ae867f8e">00300</a>         <span class="keyword">struct </span>dwc_otg_qtd_list qtd_list;
<a name="l00301"></a>00301 
<a name="l00303"></a><a class="code" href="structdwc__otg__qh.html#bbdb7d30b60b6c326301f33b35088bb4">00303</a>         <span class="keyword">struct </span><a class="code" href="structdwc__hc.html">dwc_hc</a> *channel;
<a name="l00304"></a>00304 
<a name="l00306"></a><a class="code" href="structdwc__otg__qh.html#8708dd009988ce20b8a8d52a4a96c5a3">00306</a>         uint8_t <a class="code" href="structdwc__hc.html#4365ef67d517a621a626ac5392545c6d">do_split</a>;
<a name="l00307"></a>00307 
<a name="l00312"></a><a class="code" href="structdwc__otg__qh.html#401de6aadcfc2f99773f44c6731c4646">00312</a>         uint16_t usecs;
<a name="l00313"></a>00313 
<a name="l00315"></a><a class="code" href="structdwc__otg__qh.html#cdbce86d457f0ea08e2efedc47c9b315">00315</a>         uint16_t interval;
<a name="l00316"></a>00316 
<a name="l00321"></a><a class="code" href="structdwc__otg__qh.html#977a8032f08e45a9e9bdcd558a6965d3">00321</a>         uint16_t sched_frame;
<a name="l00322"></a>00322 
<a name="l00324"></a><a class="code" href="structdwc__otg__qh.html#a92b9ff45f0eca459b41ca20e4d8e99c">00324</a>         uint16_t start_split_frame;
<a name="l00325"></a>00325 
<a name="l00332"></a><a class="code" href="structdwc__otg__qh.html#aac9f90a6afd9056dce79d013dd2168b">00332</a>         uint8_t *dw_align_buf;
<a name="l00333"></a><a class="code" href="structdwc__otg__qh.html#b0b008f9d25f5e3b6e285d2830cfdca1">00333</a>         dwc_dma_t dw_align_buf_dma;
<a name="l00334"></a>00334         
<a name="l00336"></a><a class="code" href="structdwc__otg__qh.html#3e1cb9863dc72139e1832c04244c25ff">00336</a>         dwc_list_link_t qh_list_entry;
<a name="l00337"></a>00337         
<a name="l00342"></a><a class="code" href="structdwc__otg__qh.html#0e5f35688e54ba97054a1a7576e81150">00342</a>         <a class="code" href="structdwc__otg__host__dma__desc.html">dwc_otg_host_dma_desc_t</a> *desc_list;
<a name="l00343"></a>00343         
<a name="l00345"></a><a class="code" href="structdwc__otg__qh.html#c31412bb35362e77c697352fd4c3eeaf">00345</a>         dwc_dma_t desc_list_dma;
<a name="l00346"></a>00346         
<a name="l00352"></a><a class="code" href="structdwc__otg__qh.html#6b625d870c7854ccaff5c28fad87482a">00352</a>         uint32_t *n_bytes;
<a name="l00353"></a>00353         
<a name="l00355"></a><a class="code" href="structdwc__otg__qh.html#6da0f75ffa49c8ffadde42e9618ed8c8">00355</a>         uint16_t <a class="code" href="structdwc__hc.html#9a3a483b9c4e45d1ec5f475beb6a10a3">ntd</a>;
<a name="l00356"></a>00356         
<a name="l00358"></a><a class="code" href="structdwc__otg__qh.html#3b20e91c00b1de8d42612a8b1250b403">00358</a>         uint8_t td_first;
<a name="l00360"></a><a class="code" href="structdwc__otg__qh.html#9bd6dc808af3f1cab76ae7819af479f9">00360</a>         uint8_t td_last;
<a name="l00361"></a>00361         
<a name="l00364"></a>00364 } <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a>;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 DWC_CIRCLEQ_HEAD(hc_list, <a class="code" href="structdwc__hc.html">dwc_hc</a>);
<a name="l00367"></a>00367 
<a name="l00372"></a><a class="code" href="structdwc__otg__hcd.html">00372</a> <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a> {
<a name="l00374"></a><a class="code" href="structdwc__otg__hcd.html#e36b9560ce538a7d2ea9bd266d4041f0">00374</a>         <a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if;
<a name="l00375"></a>00375 
<a name="l00377"></a><a class="code" href="structdwc__otg__hcd.html#ffefbd33a59a14b8b46406f5aaeaa2f4">00377</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd__function__ops.html">dwc_otg_hcd_function_ops</a> *<a class="code" href="dwc__otg__pcd__linux_8c.html#9ce9b5e49c60906c189bee157dd68acd">fops</a>;
<a name="l00378"></a>00378 
<a name="l00380"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html">00380</a>         <span class="keyword">volatile</span> <span class="keyword">union </span><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html">dwc_otg_hcd_internal_flags</a> {
<a name="l00381"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#95ad2033c30d79c28ffcfa6df44af1d5">00381</a>                 uint32_t d32;
<a name="l00382"></a>00382                 <span class="keyword">struct </span>{
<a name="l00383"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#cd31ac4b9658265e90773448f354f0e1">00383</a>                         <span class="keywordtype">unsigned</span> port_connect_status_change:1;
<a name="l00384"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#9314ac02ed140807687793b512f78c63">00384</a>                         <span class="keywordtype">unsigned</span> port_connect_status:1;
<a name="l00385"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#d0d63f32ed35315e8a02549521fb386e">00385</a>                         <span class="keywordtype">unsigned</span> port_reset_change:1;
<a name="l00386"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#d222ae08372109a312f6649f77b650e8">00386</a>                         <span class="keywordtype">unsigned</span> port_enable_change:1;
<a name="l00387"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#2a6e323cb4c01153aff1adc6269c74c7">00387</a>                         <span class="keywordtype">unsigned</span> port_suspend_change:1;
<a name="l00388"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#bc96cf12e2bc5b61ce05f15ae3297bd6">00388</a>                         <span class="keywordtype">unsigned</span> port_over_current_change:1;
<a name="l00389"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#1900375ccea165f0efc40725f507a0bf">00389</a>                         <span class="keywordtype">unsigned</span> port_l1_change:1;
<a name="l00390"></a><a class="code" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#763f58f20d7103f86b4f40f37f501f33">00390</a>                         <span class="keywordtype">unsigned</span> reserved:26;
<a name="l00391"></a>00391                 } b;
<a name="l00392"></a>00392         } flags;
<a name="l00393"></a>00393 
<a name="l00399"></a><a class="code" href="structdwc__otg__hcd.html#64c96c47a36d71bad6e4360cec9d07ad">00399</a>         dwc_list_link_t non_periodic_sched_inactive;
<a name="l00400"></a>00400 
<a name="l00406"></a><a class="code" href="structdwc__otg__hcd.html#ffa3041ad517da9519aa2159cdec3f61">00406</a>         dwc_list_link_t non_periodic_sched_active;
<a name="l00407"></a>00407 
<a name="l00412"></a><a class="code" href="structdwc__otg__hcd.html#01ab5791d6269b6b5d506f2113b94231">00412</a>         dwc_list_link_t *non_periodic_qh_ptr;
<a name="l00413"></a>00413 
<a name="l00428"></a><a class="code" href="structdwc__otg__hcd.html#2a747cacd6bdbacbef86d4157c34a312">00428</a>         dwc_list_link_t periodic_sched_inactive;
<a name="l00429"></a>00429 
<a name="l00437"></a><a class="code" href="structdwc__otg__hcd.html#74b089e094911a558f7b5f24681d3242">00437</a>         dwc_list_link_t periodic_sched_ready;
<a name="l00438"></a>00438 
<a name="l00446"></a><a class="code" href="structdwc__otg__hcd.html#4b8deae798f771135c4a99693b26873f">00446</a>         dwc_list_link_t periodic_sched_assigned;
<a name="l00447"></a>00447 
<a name="l00457"></a><a class="code" href="structdwc__otg__hcd.html#e127912880eb487b3a2f38778c0de238">00457</a>         dwc_list_link_t periodic_sched_queued;
<a name="l00458"></a>00458 
<a name="l00464"></a><a class="code" href="structdwc__otg__hcd.html#1f2ce690c8ded506eff8d1b567747235">00464</a>         uint16_t periodic_usecs;
<a name="l00465"></a>00465 
<a name="l00470"></a><a class="code" href="structdwc__otg__hcd.html#f79fefeb7908c0ddf702331253acb292">00470</a>         uint16_t frame_number;
<a name="l00471"></a>00471 
<a name="l00476"></a><a class="code" href="structdwc__otg__hcd.html#1761f2e6b8f6ba82c0e0c4e561813f0f">00476</a>         <span class="keyword">struct </span>hc_list free_hc_list;
<a name="l00483"></a><a class="code" href="structdwc__otg__hcd.html#5754b87bd4644fbb7b90cf843c638f1c">00483</a>         <span class="keywordtype">int</span> periodic_channels;
<a name="l00484"></a>00484 
<a name="l00488"></a><a class="code" href="structdwc__otg__hcd.html#e7fff26b5cce7c6c520c89f9e3c75617">00488</a>         <span class="keywordtype">int</span> non_periodic_channels;
<a name="l00489"></a>00489 
<a name="l00495"></a><a class="code" href="structdwc__otg__hcd.html#cb393f6a676fb106e0e3d35396fb97f9">00495</a>         <span class="keyword">struct </span><a class="code" href="structdwc__hc.html">dwc_hc</a> *hc_ptr_array[<a class="code" href="dwc__otg__core__if_8h.html#bfb88b45545f7685f668ac2f545674ec">MAX_EPS_CHANNELS</a>];
<a name="l00496"></a>00496 
<a name="l00502"></a><a class="code" href="structdwc__otg__hcd.html#68627912f0d3672096e6a98be38f66ab">00502</a>         uint8_t *status_buf;
<a name="l00503"></a>00503 
<a name="l00507"></a><a class="code" href="structdwc__otg__hcd.html#3e752b2c5d632d848f3b1fadf543e7a4">00507</a>         dma_addr_t status_buf_dma;
<a name="l00508"></a><a class="code" href="dwc__otg__hcd_8h.html#d8ae8e24a91bb0b076390e96a8abee18">00508</a> <span class="preprocessor">#define DWC_OTG_HCD_STATUS_BUF_SIZE 64</span>
<a name="l00509"></a>00509 <span class="preprocessor"></span>
<a name="l00515"></a><a class="code" href="structdwc__otg__hcd.html#de7796a41bb7d1e45ed9dbc20c995342">00515</a>         dwc_timer_t *conn_timer;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517         <span class="comment">/* Tasket to do a reset */</span>
<a name="l00518"></a><a class="code" href="structdwc__otg__hcd.html#4f2b2c551e4ac9f49afcbdbde1ddf55d">00518</a>         dwc_tasklet_t *reset_tasklet;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520         <span class="comment">/*  */</span>
<a name="l00521"></a><a class="code" href="structdwc__otg__hcd.html#34f29e9c035009476495f7701c1813fd">00521</a>         dwc_spinlock_t *lock;
<a name="l00522"></a>00522 
<a name="l00526"></a><a class="code" href="structdwc__otg__hcd.html#c019b908f209d577ccc19d29030926a1">00526</a>         <span class="keywordtype">void</span> *priv;
<a name="l00527"></a>00527 
<a name="l00528"></a><a class="code" href="structdwc__otg__hcd.html#9231b4c3dce89a1506a5e501ec5c7a39">00528</a>         uint8_t otg_port;
<a name="l00529"></a>00529 
<a name="l00531"></a><a class="code" href="structdwc__otg__hcd.html#77f16d5530f50556ed01fe7f69a135fd">00531</a>         uint32_t *frame_list;
<a name="l00532"></a>00532 
<a name="l00534"></a><a class="code" href="structdwc__otg__hcd.html#3421063dcac9d4e200b5d9bbb0508f3d">00534</a>         dma_addr_t frame_list_dma;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00537"></a>00537 <span class="preprocessor"></span>        uint32_t frrem_samples;
<a name="l00538"></a>00538         uint64_t frrem_accum;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540         uint32_t hfnum_7_samples_a;
<a name="l00541"></a>00541         uint64_t hfnum_7_frrem_accum_a;
<a name="l00542"></a>00542         uint32_t hfnum_0_samples_a;
<a name="l00543"></a>00543         uint64_t hfnum_0_frrem_accum_a;
<a name="l00544"></a>00544         uint32_t hfnum_other_samples_a;
<a name="l00545"></a>00545         uint64_t hfnum_other_frrem_accum_a;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547         uint32_t hfnum_7_samples_b;
<a name="l00548"></a>00548         uint64_t hfnum_7_frrem_accum_b;
<a name="l00549"></a>00549         uint32_t hfnum_0_samples_b;
<a name="l00550"></a>00550         uint64_t hfnum_0_frrem_accum_b;
<a name="l00551"></a>00551         uint32_t hfnum_other_samples_b;
<a name="l00552"></a>00552         uint64_t hfnum_other_frrem_accum_b;
<a name="l00553"></a>00553 <span class="preprocessor">#endif</span>
<a name="l00554"></a>00554 <span class="preprocessor"></span>};
<a name="l00555"></a>00555 
<a name="l00558"></a>00558 <span class="keyword">extern</span> <a class="code" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a> <a class="code" href="dwc__otg__hcd_8c.html#96cc299f4f0478187ed7ba49b975ffc3">dwc_otg_hcd_select_transactions</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a>
<a name="l00559"></a>00559                                                                   * hcd);
<a name="l00560"></a>00560 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8c.html#2f57bf2fc3013d63101f112702b913a0">dwc_otg_hcd_queue_transactions</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd,
<a name="l00561"></a>00561                                     <a class="code" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a> tr_type);
<a name="l00562"></a>00562 
<a name="l00567"></a>00567 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#b9dde24773f2741b9ff67e2d46760dc0">dwc_otg_hcd_handle_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00568"></a>00568 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#0eea8527657802e9cf0a62a00bd44a1d">dwc_otg_hcd_handle_sof_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00569"></a>00569 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#9d979e33e04fc694a72242dec63aeb89">dwc_otg_hcd_handle_rx_status_q_level_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *
<a name="l00570"></a>00570                                                          <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00571"></a>00571 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#51c953aefbc2382adee9f585fdb26f35">dwc_otg_hcd_handle_np_tx_fifo_empty_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *
<a name="l00572"></a>00572                                                         <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00573"></a>00573 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#dcfa21f80c7732df9aaf3db59a86eb1d">dwc_otg_hcd_handle_perio_tx_fifo_empty_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *
<a name="l00574"></a>00574                                                            <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00575"></a>00575 <span class="keyword">extern</span> int32_t dwc_otg_hcd_handle_incomplete_periodic_intr(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *
<a name="l00576"></a>00576                                                            <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00577"></a>00577 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#18bb807c86935a45f5fe5940e5ded70c">dwc_otg_hcd_handle_port_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00578"></a>00578 <span class="keyword">extern</span> int32_t dwc_otg_hcd_handle_conn_id_status_change_intr(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *
<a name="l00579"></a>00579                                                              <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00580"></a>00580 <span class="keyword">extern</span> int32_t dwc_otg_hcd_handle_disconnect_intr(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00581"></a>00581 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#1f28e296c0bc4146da309385d95b5d7e">dwc_otg_hcd_handle_hc_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00582"></a>00582 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd_8h.html#019c9cc38ec85275a7ef0b0d38bf53ab">dwc_otg_hcd_handle_hc_n_intr</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>,
<a name="l00583"></a>00583                                             uint32_t num);
<a name="l00584"></a>00584 <span class="keyword">extern</span> int32_t dwc_otg_hcd_handle_session_req_intr(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00585"></a>00585 <span class="keyword">extern</span> int32_t dwc_otg_hcd_handle_wakeup_detected_intr(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *
<a name="l00586"></a>00586                                                        <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
<a name="l00592"></a>00592 <span class="comment">/* Implemented in dwc_otg_hcd_queue.c */</span>
<a name="l00593"></a>00593 <span class="keyword">extern</span> <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *<a class="code" href="dwc__otg__hcd_8h.html#187194b7a9f28e7f7a09ac3e345c7253">dwc_otg_hcd_qh_create</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd,
<a name="l00594"></a>00594                                            <a class="code" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> * <a class="code" href="structdwc__otg__qtd.html#7e7767808e8eb9d71de0db00f57553f9">urb</a>);
<a name="l00595"></a>00595 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#1ac731c0691ac3851edddc558fae79e0">dwc_otg_hcd_qh_free</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd, <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00596"></a>00596 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd_8h.html#75cad4c6010d88086ddedf739db55d6b">dwc_otg_hcd_qh_add</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd, <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00597"></a>00597 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#506b89b01ee7692885daff1c17c894f8">dwc_otg_hcd_qh_remove</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd, <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00598"></a>00598 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#f88bc5b6beb674c909d1c09a819ba9d9">dwc_otg_hcd_qh_deactivate</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd, <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>,
<a name="l00599"></a>00599                                       <span class="keywordtype">int</span> sched_csplit);
<a name="l00600"></a>00600 
<a name="l00602"></a><a class="code" href="dwc__otg__hcd_8h.html#64eb3490186ebd94fd8204d74c089a51">00602</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#64eb3490186ebd94fd8204d74c089a51">dwc_otg_hcd_qh_remove_and_free</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd,
<a name="l00603"></a>00603                                                   <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>)
<a name="l00604"></a>00604 {
<a name="l00605"></a>00605         <a class="code" href="dwc__otg__hcd_8h.html#506b89b01ee7692885daff1c17c894f8">dwc_otg_hcd_qh_remove</a>(hcd, <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00606"></a>00606         <a class="code" href="dwc__otg__hcd_8h.html#1ac731c0691ac3851edddc558fae79e0">dwc_otg_hcd_qh_free</a>(hcd, <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00607"></a>00607 }
<a name="l00608"></a>00608 
<a name="l00611"></a><a class="code" href="dwc__otg__hcd_8h.html#3252be9fc489fbaa293b2404642caab0">00611</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *<a class="code" href="dwc__otg__hcd_8h.html#3252be9fc489fbaa293b2404642caab0">dwc_otg_hcd_qh_alloc</a>(<span class="keywordtype">void</span>)
<a name="l00612"></a>00612 {
<a name="l00613"></a>00613         <span class="keywordflow">return</span> (<a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *) dwc_alloc(<span class="keyword">sizeof</span>(<a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a>));
<a name="l00614"></a>00614 }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616 <span class="keyword">extern</span> <a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *<a class="code" href="dwc__otg__hcd_8h.html#5c4da8822ae027f70eda33cb783644fc">dwc_otg_hcd_qtd_create</a>(<a class="code" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> * <a class="code" href="structdwc__otg__qtd.html#7e7767808e8eb9d71de0db00f57553f9">urb</a>);
<a name="l00617"></a>00617 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#9ebb534f604aa8f693da162f32cf1ba4">dwc_otg_hcd_qtd_init</a>(<a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> * qtd, <a class="code" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> * <a class="code" href="structdwc__otg__qtd.html#7e7767808e8eb9d71de0db00f57553f9">urb</a>);
<a name="l00618"></a>00618 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd_8h.html#748ba77769387bfe4295cb10265053f0">dwc_otg_hcd_qtd_add</a>(<a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> * qtd, <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>,
<a name="l00619"></a>00619                                <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> ** <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00620"></a>00620 
<a name="l00623"></a><a class="code" href="dwc__otg__hcd_8h.html#ad58f04f541929d521f9acde9e465577">00623</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *<a class="code" href="dwc__otg__hcd_8h.html#ad58f04f541929d521f9acde9e465577">dwc_otg_hcd_qtd_alloc</a>(<span class="keywordtype">void</span>)
<a name="l00624"></a>00624 {
<a name="l00625"></a>00625         <span class="keywordflow">return</span> (<a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *) dwc_alloc(<span class="keyword">sizeof</span>(<a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a>));
<a name="l00626"></a>00626 }
<a name="l00627"></a>00627 
<a name="l00631"></a><a class="code" href="dwc__otg__hcd_8h.html#34434d836361462c04fb45ba9ab89fb9">00631</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#34434d836361462c04fb45ba9ab89fb9">dwc_otg_hcd_qtd_free</a>(<a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> * qtd)
<a name="l00632"></a>00632 {
<a name="l00633"></a>00633         dwc_free(qtd);
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00641"></a><a class="code" href="dwc__otg__hcd_8h.html#2a721977443fb6bd453fbc2e8ae5355d">00641</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#2a721977443fb6bd453fbc2e8ae5355d">dwc_otg_hcd_qtd_remove</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd,
<a name="l00642"></a>00642                                           <a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> * qtd,
<a name="l00643"></a>00643                                           <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>)
<a name="l00644"></a>00644 {
<a name="l00645"></a>00645         uint64_t flags;
<a name="l00646"></a>00646         DWC_SPINLOCK_IRQSAVE(hcd-&gt;<a class="code" href="structdwc__otg__hcd.html#34f29e9c035009476495f7701c1813fd">lock</a>, &amp;flags);
<a name="l00647"></a>00647         DWC_CIRCLEQ_REMOVE(&amp;<a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>-&gt;<a class="code" href="structdwc__otg__qh.html#9567d266da8e796d3467fb16ae867f8e">qtd_list</a>, qtd, qtd_list_entry);
<a name="l00648"></a>00648         DWC_SPINUNLOCK_IRQRESTORE(hcd-&gt;<a class="code" href="structdwc__otg__hcd.html#34f29e9c035009476495f7701c1813fd">lock</a>, flags);
<a name="l00649"></a>00649 }
<a name="l00650"></a>00650 
<a name="l00652"></a><a class="code" href="dwc__otg__hcd_8h.html#19adb6641f95448a956015b2d69ba96a">00652</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#19adb6641f95448a956015b2d69ba96a">dwc_otg_hcd_qtd_remove_and_free</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd,
<a name="l00653"></a>00653                                                    <a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> * qtd,
<a name="l00654"></a>00654                                                    <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>)
<a name="l00655"></a>00655 {
<a name="l00656"></a>00656         <a class="code" href="dwc__otg__hcd_8h.html#2a721977443fb6bd453fbc2e8ae5355d">dwc_otg_hcd_qtd_remove</a>(hcd, qtd, <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00657"></a>00657         <a class="code" href="dwc__otg__hcd_8h.html#34434d836361462c04fb45ba9ab89fb9">dwc_otg_hcd_qtd_free</a>(qtd);
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00665"></a>00665 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#9b051bad5e81a6b6d74b817c741bfaf3">dwc_otg_hcd_start_xfer_ddma</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd, <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00666"></a>00666 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#ca94cde3142ff1121bb0ff9bd44fa762">dwc_otg_hcd_complete_xfer_ddma</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd,
<a name="l00667"></a>00667                                            <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * hc,
<a name="l00668"></a>00668                                            <a class="code" href="structdwc__otg__hc__regs.html">dwc_otg_hc_regs_t</a> * hc_regs,
<a name="l00669"></a>00669                                            dwc_otg_halt_status_e <a class="code" href="structdwc__hc.html#07eca0fa02105ddaa1719387f5558b23">halt_status</a>);
<a name="l00670"></a>00670 
<a name="l00671"></a>00671 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd_8h.html#1c5498d173c5461865a5042789927ed1">dwc_otg_hcd_qh_init_ddma</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd, <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00672"></a>00672 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#78738afd0ca62e394753f1cf196476c9">dwc_otg_hcd_qh_free_ddma</a>(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd, <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> * <a class="code" href="structdwc__otg__qtd.html#f80ddcfb6edbe83a3991dd67c93a47e4">qh</a>);
<a name="l00673"></a>00673 
<a name="l00678"></a>00678 <a class="code" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *dwc_urb_to_qh(<a class="code" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> * <a class="code" href="structdwc__otg__qtd.html#7e7767808e8eb9d71de0db00f57553f9">urb</a>);
<a name="l00681"></a>00681 <span class="preprocessor">#ifdef CONFIG_USB_DWC_OTG_LPM</span>
<a name="l00682"></a>00682 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">int</span> dwc_otg_hcd_get_hc_for_lpm_tran(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd,
<a name="l00683"></a>00683                                            uint8_t devaddr);
<a name="l00684"></a>00684 <span class="keyword">extern</span> <span class="keywordtype">void</span> dwc_otg_hcd_free_hc_from_lpm(<a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> * hcd);
<a name="l00685"></a>00685 <span class="preprocessor">#endif</span>
<a name="l00686"></a>00686 <span class="preprocessor"></span>
<a name="l00688"></a><a class="code" href="dwc__otg__hcd_8h.html#3b2ecfb8dfc0ef59a71aee04313b3a61">00688</a> <span class="preprocessor">#define dwc_list_to_qh(_list_head_ptr_) container_of(_list_head_ptr_, dwc_otg_qh_t, qh_list_entry)</span>
<a name="l00689"></a>00689 <span class="preprocessor"></span>
<a name="l00691"></a><a class="code" href="dwc__otg__hcd_8h.html#1cd61c91155aa665057d471f8a020485">00691</a> <span class="preprocessor">#define dwc_list_to_qtd(_list_head_ptr_) container_of(_list_head_ptr_, dwc_otg_qtd_t, qtd_list_entry)</span>
<a name="l00692"></a>00692 <span class="preprocessor"></span>
<a name="l00694"></a><a class="code" href="dwc__otg__hcd_8h.html#4621f3eac09a9fc1363d286bff2de06b">00694</a> <span class="preprocessor">#define dwc_qh_is_non_per(_qh_ptr_) ((_qh_ptr_-&gt;ep_type == UE_BULK) || \</span>
<a name="l00695"></a>00695 <span class="preprocessor">                                     (_qh_ptr_-&gt;ep_type == UE_CONTROL))</span>
<a name="l00696"></a>00696 <span class="preprocessor"></span>
<a name="l00698"></a><a class="code" href="dwc__otg__hcd_8h.html#a371dfcb8a66214c8fe226190fc1a323">00698</a> <span class="preprocessor">#define dwc_hb_mult(wMaxPacketSize) (1 + (((wMaxPacketSize) &gt;&gt; 11) &amp; 0x03))</span>
<a name="l00699"></a>00699 <span class="preprocessor"></span>
<a name="l00701"></a><a class="code" href="dwc__otg__hcd_8h.html#bd2189f881088fe7f4ca9112ee24549b">00701</a> <span class="preprocessor">#define dwc_max_packet(wMaxPacketSize) ((wMaxPacketSize) &amp; 0x07ff)</span>
<a name="l00702"></a>00702 <span class="preprocessor"></span>
<a name="l00708"></a><a class="code" href="dwc__otg__hcd_8h.html#02aa5e9853fcc705b9b5c839a249e2f8">00708</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd_8h.html#02aa5e9853fcc705b9b5c839a249e2f8">dwc_frame_num_le</a>(uint16_t frame1, uint16_t frame2)
<a name="l00709"></a>00709 {
<a name="l00710"></a>00710         <span class="keywordflow">return</span> ((frame2 - frame1) &amp; <a class="code" href="dwc__otg__regs_8h.html#4903938414e67044883b7df5582d6eed">DWC_HFNUM_MAX_FRNUM</a>) &lt;=
<a name="l00711"></a>00711             (DWC_HFNUM_MAX_FRNUM &gt;&gt; 1);
<a name="l00712"></a>00712 }
<a name="l00713"></a>00713 
<a name="l00719"></a><a class="code" href="dwc__otg__hcd_8h.html#98e0d4310430b84fa660ab5f6e7c24b9">00719</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd_8h.html#98e0d4310430b84fa660ab5f6e7c24b9">dwc_frame_num_gt</a>(uint16_t frame1, uint16_t frame2)
<a name="l00720"></a>00720 {
<a name="l00721"></a>00721         <span class="keywordflow">return</span> (frame1 != frame2) &amp;&amp;
<a name="l00722"></a>00722             (((frame1 - frame2) &amp; <a class="code" href="dwc__otg__regs_8h.html#4903938414e67044883b7df5582d6eed">DWC_HFNUM_MAX_FRNUM</a>) &lt;
<a name="l00723"></a>00723              (DWC_HFNUM_MAX_FRNUM &gt;&gt; 1));
<a name="l00724"></a>00724 }
<a name="l00725"></a>00725 
<a name="l00730"></a><a class="code" href="dwc__otg__hcd_8h.html#cb175759a6b2cd291eedc276c022b500">00730</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint16_t <a class="code" href="dwc__otg__hcd_8h.html#cb175759a6b2cd291eedc276c022b500">dwc_frame_num_inc</a>(uint16_t frame, uint16_t inc)
<a name="l00731"></a>00731 {
<a name="l00732"></a>00732         <span class="keywordflow">return</span> (frame + inc) &amp; <a class="code" href="dwc__otg__regs_8h.html#4903938414e67044883b7df5582d6eed">DWC_HFNUM_MAX_FRNUM</a>;
<a name="l00733"></a>00733 }
<a name="l00734"></a>00734 
<a name="l00735"></a><a class="code" href="dwc__otg__hcd_8h.html#d6248403619d099d04320cb1b7c7ee99">00735</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint16_t <a class="code" href="dwc__otg__hcd_8h.html#d6248403619d099d04320cb1b7c7ee99">dwc_full_frame_num</a>(uint16_t frame)
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737         <span class="keywordflow">return</span> (frame &amp; <a class="code" href="dwc__otg__regs_8h.html#4903938414e67044883b7df5582d6eed">DWC_HFNUM_MAX_FRNUM</a>) &gt;&gt; 3;
<a name="l00738"></a>00738 }
<a name="l00739"></a>00739 
<a name="l00740"></a><a class="code" href="dwc__otg__hcd_8h.html#62ca1eeef0a58428b2a105092290c0a4">00740</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint16_t <a class="code" href="dwc__otg__hcd_8h.html#62ca1eeef0a58428b2a105092290c0a4">dwc_micro_frame_num</a>(uint16_t frame)
<a name="l00741"></a>00741 {
<a name="l00742"></a>00742         <span class="keywordflow">return</span> frame &amp; 0x7;
<a name="l00743"></a>00743 }
<a name="l00744"></a>00744 
<a name="l00745"></a>00745 <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd_8h.html#8bce109004d7869bfdd9aa1075c6bd2c">dwc_otg_hcd_save_data_toggle</a>(<a class="code" href="structdwc__hc.html">dwc_hc_t</a> * hc,
<a name="l00746"></a>00746                                   <a class="code" href="structdwc__otg__hc__regs.html">dwc_otg_hc_regs_t</a> * hc_regs, 
<a name="l00747"></a>00747                                   <a class="code" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> * qtd);
<a name="l00748"></a>00748 
<a name="l00749"></a>00749 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00750"></a>00750 <span class="preprocessor"></span>
<a name="l00759"></a>00759 <span class="preprocessor">#define dwc_sample_frrem(_hcd, _qh, _letter) \</span>
<a name="l00760"></a>00760 <span class="preprocessor">{ \</span>
<a name="l00761"></a>00761 <span class="preprocessor">        hfnum_data_t hfnum; \</span>
<a name="l00762"></a>00762 <span class="preprocessor">        dwc_otg_qtd_t *qtd; \</span>
<a name="l00763"></a>00763 <span class="preprocessor">        qtd = list_entry(_qh-&gt;qtd_list.next, dwc_otg_qtd_t, qtd_list_entry); \</span>
<a name="l00764"></a>00764 <span class="preprocessor">        if (usb_pipeint(qtd-&gt;urb-&gt;pipe) &amp;&amp; _qh-&gt;start_split_frame != 0 &amp;&amp; !qtd-&gt;complete_split) { \</span>
<a name="l00765"></a>00765 <span class="preprocessor">                hfnum.d32 = dwc_read_reg32(&amp;_hcd-&gt;core_if-&gt;host_if-&gt;host_global_regs-&gt;hfnum); \</span>
<a name="l00766"></a>00766 <span class="preprocessor">                switch (hfnum.b.frnum &amp; 0x7) { \</span>
<a name="l00767"></a>00767 <span class="preprocessor">                case 7: \</span>
<a name="l00768"></a>00768 <span class="preprocessor">                        _hcd-&gt;hfnum_7_samples_##_letter++; \</span>
<a name="l00769"></a>00769 <span class="preprocessor">                        _hcd-&gt;hfnum_7_frrem_accum_##_letter += hfnum.b.frrem; \</span>
<a name="l00770"></a>00770 <span class="preprocessor">                        break; \</span>
<a name="l00771"></a>00771 <span class="preprocessor">                case 0: \</span>
<a name="l00772"></a>00772 <span class="preprocessor">                        _hcd-&gt;hfnum_0_samples_##_letter++; \</span>
<a name="l00773"></a>00773 <span class="preprocessor">                        _hcd-&gt;hfnum_0_frrem_accum_##_letter += hfnum.b.frrem; \</span>
<a name="l00774"></a>00774 <span class="preprocessor">                        break; \</span>
<a name="l00775"></a>00775 <span class="preprocessor">                default: \</span>
<a name="l00776"></a>00776 <span class="preprocessor">                        _hcd-&gt;hfnum_other_samples_##_letter++; \</span>
<a name="l00777"></a>00777 <span class="preprocessor">                        _hcd-&gt;hfnum_other_frrem_accum_##_letter += hfnum.b.frrem; \</span>
<a name="l00778"></a>00778 <span class="preprocessor">                        break; \</span>
<a name="l00779"></a>00779 <span class="preprocessor">                } \</span>
<a name="l00780"></a>00780 <span class="preprocessor">        } \</span>
<a name="l00781"></a>00781 <span class="preprocessor">}</span>
<a name="l00782"></a>00782 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00783"></a><a class="code" href="dwc__otg__hcd_8h.html#7bdda6719cefc42f2302c5c34084ba69">00783</a> <span class="preprocessor"></span><span class="preprocessor">#define dwc_sample_frrem(_hcd, _qh, _letter)</span>
<a name="l00784"></a>00784 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00785"></a>00785 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00786"></a>00786 <span class="preprocessor"></span><span class="preprocessor">#endif                          </span><span class="comment">/* DWC_DEVICE_ONLY */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:48 2009 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
