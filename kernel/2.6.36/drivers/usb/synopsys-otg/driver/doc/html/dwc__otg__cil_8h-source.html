<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_cil.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dwc_otg_cil.h</h1><a href="dwc__otg__cil_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ==========================================================================</span>
<a name="l00002"></a>00002 <span class="comment"> * $File: //dwh/usb_iip/dev/software/otg/linux/drivers/dwc_otg_cil.h $</span>
<a name="l00003"></a>00003 <span class="comment"> * $Revision: #99 $</span>
<a name="l00004"></a>00004 <span class="comment"> * $Date: 2009/04/21 $</span>
<a name="l00005"></a>00005 <span class="comment"> * $Change: 1237466 $</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * Synopsys HS OTG Linux Software Driver and documentation (hereinafter,</span>
<a name="l00008"></a>00008 <span class="comment"> * "Software") is an Unsupported proprietary work of Synopsys, Inc. unless</span>
<a name="l00009"></a>00009 <span class="comment"> * otherwise expressly agreed to in writing between Synopsys and you.</span>
<a name="l00010"></a>00010 <span class="comment"> * </span>
<a name="l00011"></a>00011 <span class="comment"> * The Software IS NOT an item of Licensed Software or Licensed Product under</span>
<a name="l00012"></a>00012 <span class="comment"> * any End User Software License Agreement or Agreement for Licensed Product</span>
<a name="l00013"></a>00013 <span class="comment"> * with Synopsys or any supplement thereto. You are permitted to use and</span>
<a name="l00014"></a>00014 <span class="comment"> * redistribute this Software in source and binary forms, with or without</span>
<a name="l00015"></a>00015 <span class="comment"> * modification, provided that redistributions of source code must retain this</span>
<a name="l00016"></a>00016 <span class="comment"> * notice. You may not view, use, disclose, copy or distribute this file or</span>
<a name="l00017"></a>00017 <span class="comment"> * any information contained herein except pursuant to this license grant from</span>
<a name="l00018"></a>00018 <span class="comment"> * Synopsys. If you do not agree with this notice, including the disclaimer</span>
<a name="l00019"></a>00019 <span class="comment"> * below, then you are not authorized to use the Software.</span>
<a name="l00020"></a>00020 <span class="comment"> * </span>
<a name="l00021"></a>00021 <span class="comment"> * THIS SOFTWARE IS BEING DISTRIBUTED BY SYNOPSYS SOLELY ON AN "AS IS" BASIS</span>
<a name="l00022"></a>00022 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00023"></a>00023 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00024"></a>00024 <span class="comment"> * ARE HEREBY DISCLAIMED. IN NO EVENT SHALL SYNOPSYS BE LIABLE FOR ANY DIRECT,</span>
<a name="l00025"></a>00025 <span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<a name="l00026"></a>00026 <span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00027"></a>00027 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00028"></a>00028 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00029"></a>00029 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00030"></a>00030 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<a name="l00031"></a>00031 <span class="comment"> * DAMAGE.</span>
<a name="l00032"></a>00032 <span class="comment"> * ========================================================================== */</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#if !defined(__DWC_CIL_H__)</span>
<a name="l00035"></a><a class="code" href="dwc__otg__cil_8h.html#c9555551bb7f2d0a51be23d54463f2ec">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define __DWC_CIL_H__</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "dwc_os.h"</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include "dwc_list.h"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "<a class="code" href="dwc__otg__dbg_8h.html">dwc_otg_dbg.h</a>"</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include "<a class="code" href="dwc__otg__regs_8h.html">dwc_otg_regs.h</a>"</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#include "<a class="code" href="dwc__otg__core__if_8h.html">dwc_otg_core_if.h</a>"</span>
<a name="l00043"></a>00043 
<a name="l00049"></a>00049 <span class="preprocessor">#ifdef DWC_UTE_CFI</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 <span class="preprocessor">#define MAX_DMA_DESCS_PER_EP    256</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00056"></a>00056 <span class="keyword">typedef</span> <span class="keyword">enum</span> _data_buffer_mode {
<a name="l00057"></a>00057         BM_STANDARD = 0,        <span class="comment">/* data buffer is in normal mode */</span>
<a name="l00058"></a>00058         BM_SG = 1,              <span class="comment">/* data buffer uses the scatter/gather mode */</span>
<a name="l00059"></a>00059         BM_CONCAT = 2,          <span class="comment">/* data buffer uses the concatenation mode */</span>
<a name="l00060"></a>00060         BM_CIRCULAR = 3,        <span class="comment">/* data buffer uses the circular DMA mode */</span>
<a name="l00061"></a>00061         BM_ALIGN = 4            <span class="comment">/* data buffer is in buffer alignment mode */</span>
<a name="l00062"></a>00062 } data_buffer_mode_e;
<a name="l00063"></a>00063 <span class="preprocessor">#endif                          //DWC_UTE_CFI</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00067"></a><a class="code" href="dwc__otg__cil_8h.html#51536e4844fe9022b60531eebca32a26">00067</a> <span class="preprocessor">#define OTG_CORE_REV_2_60a      0x4F54260A</span>
<a name="l00068"></a><a class="code" href="dwc__otg__cil_8h.html#aac1e3cc465029aa0a2965b7c6d9fc50">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define OTG_CORE_REV_2_71a      0x4F54271A</span>
<a name="l00069"></a><a class="code" href="dwc__otg__cil_8h.html#3d25615a19f95042bcc3512b4855cebe">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define OTG_CORE_REV_2_72a      0x4F54272A</span>
<a name="l00070"></a><a class="code" href="dwc__otg__cil_8h.html#02c75ff58b0b88ae59c89063478648dd">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define OTG_CORE_REV_2_80a      0x4F54280A</span>
<a name="l00071"></a><a class="code" href="dwc__otg__cil_8h.html#ceb592db3a34e7435e6bd9fc4cf5627c">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define OTG_CORE_REV_2_81a      0x4F54281A</span>
<a name="l00072"></a><a class="code" href="dwc__otg__cil_8h.html#c2f4aa7b1cfc164330925404c5029724">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define OTG_CORE_REV_2_90a      0x4F54290A              </span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00077"></a><a class="code" href="structiso__pkt__info.html">00077</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structiso__pkt__info.html">iso_pkt_info</a> {
<a name="l00078"></a><a class="code" href="structiso__pkt__info.html#0c72a0585ccc93555da4db7e168f75f8">00078</a>         uint32_t <a class="code" href="structiso__pkt__info.html#0c72a0585ccc93555da4db7e168f75f8">offset</a>;
<a name="l00079"></a><a class="code" href="structiso__pkt__info.html#ced82142e81778345016841e15020eb8">00079</a>         uint32_t <a class="code" href="structiso__pkt__info.html#ced82142e81778345016841e15020eb8">length</a>;
<a name="l00080"></a><a class="code" href="structiso__pkt__info.html#1317c3b425c0ef55dbde153b04c28dd4">00080</a>         int32_t <a class="code" href="structiso__pkt__info.html#1317c3b425c0ef55dbde153b04c28dd4">status</a>;
<a name="l00081"></a>00081 } <a class="code" href="structiso__pkt__info.html">iso_pkt_info_t</a>;
<a name="l00082"></a>00082 
<a name="l00088"></a><a class="code" href="structdwc__ep.html">00088</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structdwc__ep.html">dwc_ep</a> {
<a name="l00090"></a><a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">00090</a>         uint8_t <a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>;
<a name="l00092"></a><a class="code" href="structdwc__ep.html#b882b6b7c857100ed20600e94ea37760">00092</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#b882b6b7c857100ed20600e94ea37760">is_in</a>:1;
<a name="l00094"></a><a class="code" href="structdwc__ep.html#63b7a1a3ee32df393ff10d8bfc5c8648">00094</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#63b7a1a3ee32df393ff10d8bfc5c8648">active</a>:1;
<a name="l00095"></a>00095 
<a name="l00098"></a><a class="code" href="structdwc__ep.html#ffa14f48094778143353b845b5d238cd">00098</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#ffa14f48094778143353b845b5d238cd">tx_fifo_num</a>:4;
<a name="l00100"></a><a class="code" href="structdwc__ep.html#17b10677bd9b0a1d612dd4ce2fb0eb0f">00100</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#17b10677bd9b0a1d612dd4ce2fb0eb0f">type</a>:2;
<a name="l00101"></a><a class="code" href="dwc__otg__cil_8h.html#64e5cd756330f5adab79b25cc8067bdc">00101</a> <span class="preprocessor">#define DWC_OTG_EP_TYPE_CONTROL    0</span>
<a name="l00102"></a><a class="code" href="dwc__otg__cil_8h.html#152a3a5e1433bd2197672f0b5105e7a4">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_EP_TYPE_ISOC       1</span>
<a name="l00103"></a><a class="code" href="dwc__otg__cil_8h.html#9b079858cda0b917316ad9161b3881e0">00103</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_EP_TYPE_BULK       2</span>
<a name="l00104"></a><a class="code" href="dwc__otg__cil_8h.html#1401d1264f88530232cf51ab31cc5347">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_EP_TYPE_INTR       3</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span>
<a name="l00107"></a><a class="code" href="structdwc__ep.html#4ceafa9e067ba462ab38c20ffcf8d597">00107</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#4ceafa9e067ba462ab38c20ffcf8d597">data_pid_start</a>:1;
<a name="l00109"></a><a class="code" href="structdwc__ep.html#0692ad9970f4ff48b4210577a6bf86ee">00109</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#0692ad9970f4ff48b4210577a6bf86ee">even_odd_frame</a>:1;
<a name="l00111"></a><a class="code" href="structdwc__ep.html#d17473ece3c9a34f5e7a230d3315de94">00111</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#d17473ece3c9a34f5e7a230d3315de94">maxpacket</a>:11;
<a name="l00112"></a>00112 
<a name="l00114"></a><a class="code" href="structdwc__ep.html#f60095e5ebedf7f98f3bfea77ce9a755">00114</a>         uint32_t <a class="code" href="structdwc__ep.html#f60095e5ebedf7f98f3bfea77ce9a755">maxxfer</a>;
<a name="l00115"></a>00115 
<a name="l00124"></a><a class="code" href="structdwc__ep.html#b40ce70422b6d105a855a8df4b33d45d">00124</a>         dwc_dma_t <a class="code" href="structdwc__ep.html#b40ce70422b6d105a855a8df4b33d45d">dma_addr</a>;
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="structdwc__ep.html#1a43e464429530e874472092e0e1af09">00126</a>         dwc_dma_t <a class="code" href="structdwc__ep.html#1a43e464429530e874472092e0e1af09">dma_desc_addr</a>;
<a name="l00127"></a><a class="code" href="structdwc__ep.html#57e934b26e76939912eaa76321075a0d">00127</a>         <a class="code" href="structdwc__otg__dev__dma__desc.html">dwc_otg_dev_dma_desc_t</a> *<a class="code" href="structdwc__ep.html#57e934b26e76939912eaa76321075a0d">desc_addr</a>;
<a name="l00128"></a>00128 
<a name="l00129"></a><a class="code" href="structdwc__ep.html#d0cda8ded2e5142d9a1c9c17efc5812f">00129</a>         uint8_t *<a class="code" href="structdwc__ep.html#d0cda8ded2e5142d9a1c9c17efc5812f">start_xfer_buff</a>;
<a name="l00131"></a><a class="code" href="structdwc__ep.html#97fa9bf5c31ba734d54f70e6fe6ae8eb">00131</a>         uint8_t *<a class="code" href="structdwc__ep.html#97fa9bf5c31ba734d54f70e6fe6ae8eb">xfer_buff</a>;
<a name="l00133"></a><a class="code" href="structdwc__ep.html#36d4010478ceb27479c0b12b376a7924">00133</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#36d4010478ceb27479c0b12b376a7924">xfer_len</a>:19;
<a name="l00135"></a><a class="code" href="structdwc__ep.html#23d4871510b5bcb54fbf0674d8f122bd">00135</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#23d4871510b5bcb54fbf0674d8f122bd">xfer_count</a>:19;
<a name="l00137"></a><a class="code" href="structdwc__ep.html#8c6340435beba0b8c025a4677602acab">00137</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#8c6340435beba0b8c025a4677602acab">sent_zlp</a>:1;
<a name="l00139"></a><a class="code" href="structdwc__ep.html#5a218f200cff0491b735f43fed5176bf">00139</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#5a218f200cff0491b735f43fed5176bf">total_len</a>:19;
<a name="l00140"></a>00140 
<a name="l00142"></a><a class="code" href="structdwc__ep.html#0d30d306e370810fc819f6ef735c7e67">00142</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__ep.html#0d30d306e370810fc819f6ef735c7e67">stall_clear_flag</a>:1;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 <span class="preprocessor">#ifdef DWC_UTE_CFI</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span>        <span class="comment">/* The buffer mode */</span>
<a name="l00146"></a>00146         data_buffer_mode_e buff_mode;
<a name="l00147"></a>00147 
<a name="l00148"></a>00148         <span class="comment">/* The chain of DMA descriptors.</span>
<a name="l00149"></a>00149 <span class="comment">         * MAX_DMA_DESCS_PER_EP will be allocated for each active EP.</span>
<a name="l00150"></a>00150 <span class="comment">         */</span>
<a name="l00151"></a>00151         dwc_otg_dma_desc_t *descs;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153         <span class="comment">/* The DMA address of the descriptors chain start */</span>
<a name="l00154"></a>00154         dma_addr_t descs_dma_addr;
<a name="l00156"></a>00156         uint32_t cfi_req_len;
<a name="l00157"></a>00157 <span class="preprocessor">#endif                          //DWC_UTE_CFI</span>
<a name="l00158"></a>00158 <span class="preprocessor"></span>
<a name="l00160"></a><a class="code" href="structdwc__ep.html#5e5bfcc93d41670bc0d29ad5f0f35871">00160</a>         uint32_t <a class="code" href="structdwc__ep.html#5e5bfcc93d41670bc0d29ad5f0f35871">desc_cnt</a>;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="preprocessor">#ifdef DWC_EN_ISOC</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span>
<a name="l00168"></a><a class="code" href="structdwc__ep.html#553936d1d003413d00a24330274887f9">00168</a>         dwc_dma_t <a class="code" href="structdwc__ep.html#553936d1d003413d00a24330274887f9">dma_addr0</a>;
<a name="l00169"></a><a class="code" href="structdwc__ep.html#02dc1be77d505b19f14651fe9805c97f">00169</a>         dwc_dma_t <a class="code" href="structdwc__ep.html#02dc1be77d505b19f14651fe9805c97f">dma_addr1</a>;
<a name="l00170"></a>00170 
<a name="l00171"></a><a class="code" href="structdwc__ep.html#d571f49545171ea167193edac7984173">00171</a>         dwc_dma_t <a class="code" href="structdwc__ep.html#d571f49545171ea167193edac7984173">iso_dma_desc_addr</a>;
<a name="l00172"></a><a class="code" href="structdwc__ep.html#a4e11d12099ad64dd5048a3a210fc9f6">00172</a>         <a class="code" href="structdwc__otg__dev__dma__desc.html">dwc_otg_dev_dma_desc_t</a> *<a class="code" href="structdwc__ep.html#a4e11d12099ad64dd5048a3a210fc9f6">iso_desc_addr</a>;
<a name="l00173"></a>00173 
<a name="l00175"></a><a class="code" href="structdwc__ep.html#b6d727e366ac589d304256c758d2d44a">00175</a>         uint8_t *<a class="code" href="structdwc__ep.html#b6d727e366ac589d304256c758d2d44a">xfer_buff0</a>;
<a name="l00176"></a><a class="code" href="structdwc__ep.html#36ff87362a0da5bce95eaf85522d49ff">00176</a>         uint8_t *<a class="code" href="structdwc__ep.html#36ff87362a0da5bce95eaf85522d49ff">xfer_buff1</a>;
<a name="l00177"></a>00177 
<a name="l00179"></a><a class="code" href="structdwc__ep.html#53033f174854701986545f05502e1cad">00179</a>         uint32_t <a class="code" href="structdwc__ep.html#53033f174854701986545f05502e1cad">proc_buf_num</a>;
<a name="l00181"></a><a class="code" href="structdwc__ep.html#4638b25387e59a5a4721a503b5279dfc">00181</a>         uint32_t <a class="code" href="structdwc__ep.html#4638b25387e59a5a4721a503b5279dfc">buf_proc_intrvl</a>;
<a name="l00183"></a><a class="code" href="structdwc__ep.html#4672369f4724db642856d72d5048213e">00183</a>         uint32_t <a class="code" href="structdwc__ep.html#4672369f4724db642856d72d5048213e">data_per_frame</a>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185         <span class="comment">/* todo - pattern data support is to be implemented in the future */</span>
<a name="l00187"></a><a class="code" href="structdwc__ep.html#c505483882bd67a7b0076851f693f2cc">00187</a>         uint32_t <a class="code" href="structdwc__ep.html#c505483882bd67a7b0076851f693f2cc">data_pattern_frame</a>;
<a name="l00189"></a><a class="code" href="structdwc__ep.html#1b9094ddfba3cddf397fd308cdbf4c81">00189</a>         uint32_t <a class="code" href="structdwc__ep.html#1b9094ddfba3cddf397fd308cdbf4c81">sync_frame</a>;
<a name="l00190"></a>00190 
<a name="l00192"></a><a class="code" href="structdwc__ep.html#d9e9ffe348764ababc3165ed04f9ec6c">00192</a>         uint32_t <a class="code" href="structdwc__ep.html#d9e9ffe348764ababc3165ed04f9ec6c">bInterval</a>;
<a name="l00194"></a><a class="code" href="structdwc__ep.html#fe51420474de8a9d74fc9c4adc811c4b">00194</a>         uint32_t <a class="code" href="structdwc__ep.html#fe51420474de8a9d74fc9c4adc811c4b">pkt_per_frm</a>;
<a name="l00196"></a><a class="code" href="structdwc__ep.html#1e9f4d08454c973c17acb3e52a2c3689">00196</a>         uint32_t <a class="code" href="structdwc__ep.html#1e9f4d08454c973c17acb3e52a2c3689">next_frame</a>;
<a name="l00198"></a><a class="code" href="structdwc__ep.html#46349fb0608d8c6849ced211b0628c15">00198</a>         uint32_t <a class="code" href="structdwc__ep.html#46349fb0608d8c6849ced211b0628c15">pkt_cnt</a>;
<a name="l00200"></a><a class="code" href="structdwc__ep.html#a8ed15a24123a2dad6861da7d61dfb48">00200</a>         <a class="code" href="structiso__pkt__info.html">iso_pkt_info_t</a> *<a class="code" href="structdwc__ep.html#a8ed15a24123a2dad6861da7d61dfb48">pkt_info</a>;
<a name="l00202"></a><a class="code" href="structdwc__ep.html#d4e63c7d944c2b48260b4a75c2b58925">00202</a>         uint32_t <a class="code" href="structdwc__ep.html#d4e63c7d944c2b48260b4a75c2b58925">cur_pkt</a>;
<a name="l00204"></a><a class="code" href="structdwc__ep.html#d3bc23598a77d3cca52c70a28afc6b5e">00204</a>         uint8_t *<a class="code" href="structdwc__ep.html#d3bc23598a77d3cca52c70a28afc6b5e">cur_pkt_addr</a>;
<a name="l00206"></a><a class="code" href="structdwc__ep.html#ed4594c9f6c2bcbcf6f1bbe9e9c64061">00206</a>         uint32_t <a class="code" href="structdwc__ep.html#ed4594c9f6c2bcbcf6f1bbe9e9c64061">cur_pkt_dma_addr</a>;
<a name="l00207"></a>00207 <span class="preprocessor">#endif                          </span><span class="comment">/* DWC_EN_ISOC */</span>
<a name="l00208"></a>00208 
<a name="l00210"></a>00210 } <a class="code" href="structdwc__ep.html">dwc_ep_t</a>;
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="comment">/*</span>
<a name="l00213"></a>00213 <span class="comment"> * Reasons for halting a host channel.</span>
<a name="l00214"></a>00214 <span class="comment"> */</span>
<a name="l00215"></a><a class="code" href="dwc__otg__cil_8h.html#5535f5641e4293d3ecca5c863863d60d">00215</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="dwc__otg__cil_8h.html#5535f5641e4293d3ecca5c863863d60d">dwc_otg_halt_status</a> {
<a name="l00216"></a>00216         DWC_OTG_HC_XFER_NO_HALT_STATUS,
<a name="l00217"></a>00217         DWC_OTG_HC_XFER_COMPLETE,
<a name="l00218"></a>00218         DWC_OTG_HC_XFER_URB_COMPLETE,
<a name="l00219"></a>00219         DWC_OTG_HC_XFER_ACK,
<a name="l00220"></a>00220         DWC_OTG_HC_XFER_NAK,
<a name="l00221"></a>00221         DWC_OTG_HC_XFER_NYET,
<a name="l00222"></a>00222         DWC_OTG_HC_XFER_STALL,
<a name="l00223"></a>00223         DWC_OTG_HC_XFER_XACT_ERR,
<a name="l00224"></a>00224         DWC_OTG_HC_XFER_FRAME_OVERRUN,
<a name="l00225"></a>00225         DWC_OTG_HC_XFER_BABBLE_ERR,
<a name="l00226"></a>00226         DWC_OTG_HC_XFER_DATA_TOGGLE_ERR,
<a name="l00227"></a>00227         DWC_OTG_HC_XFER_AHB_ERR,
<a name="l00228"></a>00228         DWC_OTG_HC_XFER_PERIODIC_INCOMPLETE,
<a name="l00229"></a>00229         DWC_OTG_HC_XFER_URB_DEQUEUE
<a name="l00230"></a>00230 } dwc_otg_halt_status_e;
<a name="l00231"></a>00231 
<a name="l00237"></a><a class="code" href="structdwc__hc.html">00237</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structdwc__hc.html">dwc_hc</a> {
<a name="l00239"></a><a class="code" href="structdwc__hc.html#df0c2b93e5c84cfaba6f06eaeaece5a1">00239</a>         uint8_t <a class="code" href="structdwc__hc.html#df0c2b93e5c84cfaba6f06eaeaece5a1">hc_num</a>;
<a name="l00240"></a>00240 
<a name="l00242"></a><a class="code" href="structdwc__hc.html#b2c7e8baff70104375f4916e9b76cef7">00242</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#b2c7e8baff70104375f4916e9b76cef7">dev_addr</a>:7;
<a name="l00243"></a>00243 
<a name="l00245"></a><a class="code" href="structdwc__hc.html#70b755f76a00b81679aeb1e0db8b2e60">00245</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#70b755f76a00b81679aeb1e0db8b2e60">ep_num</a>:4;
<a name="l00246"></a>00246 
<a name="l00248"></a><a class="code" href="structdwc__hc.html#c5088d431f5efc382121f201f5d571aa">00248</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#c5088d431f5efc382121f201f5d571aa">ep_is_in</a>:1;
<a name="l00249"></a>00249 
<a name="l00257"></a><a class="code" href="structdwc__hc.html#570b78178975193edb921af1ef36d37b">00257</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#570b78178975193edb921af1ef36d37b">speed</a>:2;
<a name="l00258"></a><a class="code" href="dwc__otg__cil_8h.html#1a25260b2e1a06850c26f7b7e5128f31">00258</a> <span class="preprocessor">#define DWC_OTG_EP_SPEED_LOW    0</span>
<a name="l00259"></a><a class="code" href="dwc__otg__cil_8h.html#2ec9a7665a34074eedf1f40681d124ef">00259</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_EP_SPEED_FULL   1</span>
<a name="l00260"></a><a class="code" href="dwc__otg__cil_8h.html#b9dc03c6bc3c1113a935a73cf7021fbe">00260</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_EP_SPEED_HIGH   2</span>
<a name="l00261"></a>00261 <span class="preprocessor"></span>
<a name="l00270"></a><a class="code" href="structdwc__hc.html#e6169fbc92e4d79686097742ad646f5c">00270</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#e6169fbc92e4d79686097742ad646f5c">ep_type</a>:2;
<a name="l00271"></a>00271 
<a name="l00273"></a><a class="code" href="structdwc__hc.html#bd88f02eb286ba01d8d1b049e8975ccb">00273</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#bd88f02eb286ba01d8d1b049e8975ccb">max_packet</a>:11;
<a name="l00274"></a>00274 
<a name="l00283"></a><a class="code" href="structdwc__hc.html#513427c5e8c4603ba344d4e7f9191064">00283</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#513427c5e8c4603ba344d4e7f9191064">data_pid_start</a>:2;
<a name="l00284"></a><a class="code" href="dwc__otg__cil_8h.html#0e843d08e80c29e82962ce9170a02a52">00284</a> <span class="preprocessor">#define DWC_OTG_HC_PID_DATA0 0</span>
<a name="l00285"></a><a class="code" href="dwc__otg__cil_8h.html#5a78ac2f42a7e583d849903fa4570fb8">00285</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_HC_PID_DATA2 1</span>
<a name="l00286"></a><a class="code" href="dwc__otg__cil_8h.html#e623eb446c55928b324e9636111315e1">00286</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_HC_PID_DATA1 2</span>
<a name="l00287"></a><a class="code" href="dwc__otg__cil_8h.html#3cea7ef8aa1cfeb50060f07e08fa6aff">00287</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_HC_PID_MDATA 3</span>
<a name="l00288"></a><a class="code" href="dwc__otg__cil_8h.html#8d329f92a5ff6f9a72fc755b6b1a4e17">00288</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_HC_PID_SETUP 3</span>
<a name="l00289"></a>00289 <span class="preprocessor"></span>
<a name="l00291"></a><a class="code" href="structdwc__hc.html#9a01b904f7ccc7178cdb80c20e8a9b0c">00291</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structdwc__hc.html#9a01b904f7ccc7178cdb80c20e8a9b0c">multi_count</a>:2;
<a name="l00292"></a>00292 
<a name="l00297"></a><a class="code" href="structdwc__hc.html#9dc781cb9e4bc639765beee37ce76673">00297</a>         uint8_t *<a class="code" href="structdwc__hc.html#9dc781cb9e4bc639765beee37ce76673">xfer_buff</a>;
<a name="l00302"></a><a class="code" href="structdwc__hc.html#e0c3ba51a04b36656baa4e70fc63cf77">00302</a>         dwc_dma_t <a class="code" href="structdwc__hc.html#e0c3ba51a04b36656baa4e70fc63cf77">align_buff</a>;
<a name="l00304"></a><a class="code" href="structdwc__hc.html#ce32fe93214f1686896e924fbf61cac7">00304</a>         uint32_t <a class="code" href="structdwc__hc.html#ce32fe93214f1686896e924fbf61cac7">xfer_len</a>;
<a name="l00306"></a><a class="code" href="structdwc__hc.html#6199aaeab2d64954311c410b30270293">00306</a>         uint32_t <a class="code" href="structdwc__hc.html#6199aaeab2d64954311c410b30270293">xfer_count</a>;
<a name="l00308"></a><a class="code" href="structdwc__hc.html#6c030bc725f43025d3046d17b4fbee4e">00308</a>         uint16_t <a class="code" href="structdwc__hc.html#6c030bc725f43025d3046d17b4fbee4e">start_pkt_count</a>;
<a name="l00309"></a>00309 
<a name="l00314"></a><a class="code" href="structdwc__hc.html#78a1cf134604b24bfdedb4f4df9f2c1f">00314</a>         uint8_t <a class="code" href="structdwc__hc.html#78a1cf134604b24bfdedb4f4df9f2c1f">xfer_started</a>;
<a name="l00315"></a>00315 
<a name="l00320"></a><a class="code" href="structdwc__hc.html#ae7184275dbb23b3a5d2af20ed224920">00320</a>         uint8_t <a class="code" href="structdwc__hc.html#ae7184275dbb23b3a5d2af20ed224920">do_ping</a>;
<a name="l00321"></a>00321 
<a name="l00326"></a><a class="code" href="structdwc__hc.html#ab0855754930fdc74978fa71772982ed">00326</a>         uint8_t <a class="code" href="structdwc__hc.html#ab0855754930fdc74978fa71772982ed">error_state</a>;
<a name="l00327"></a>00327 
<a name="l00334"></a><a class="code" href="structdwc__hc.html#c3b27b33fae73aff43a9834a1ed585da">00334</a>         uint8_t <a class="code" href="structdwc__hc.html#c3b27b33fae73aff43a9834a1ed585da">halt_on_queue</a>;
<a name="l00335"></a>00335 
<a name="l00340"></a><a class="code" href="structdwc__hc.html#2177dcde6dbb17b6bc7d0fb34e8ec95a">00340</a>         uint8_t <a class="code" href="structdwc__hc.html#2177dcde6dbb17b6bc7d0fb34e8ec95a">halt_pending</a>;
<a name="l00341"></a>00341 
<a name="l00345"></a><a class="code" href="structdwc__hc.html#07eca0fa02105ddaa1719387f5558b23">00345</a>         dwc_otg_halt_status_e <a class="code" href="structdwc__hc.html#07eca0fa02105ddaa1719387f5558b23">halt_status</a>;
<a name="l00346"></a>00346 
<a name="l00347"></a>00347         <span class="comment">/*</span>
<a name="l00348"></a>00348 <span class="comment">         * Split settings for the host channel</span>
<a name="l00349"></a>00349 <span class="comment">         */</span>
<a name="l00350"></a><a class="code" href="structdwc__hc.html#4365ef67d517a621a626ac5392545c6d">00350</a>         uint8_t <a class="code" href="structdwc__hc.html#4365ef67d517a621a626ac5392545c6d">do_split</a>;                  
<a name="l00351"></a><a class="code" href="structdwc__hc.html#21e00df6fb9a555975879526118d599e">00351</a>         uint8_t <a class="code" href="structdwc__hc.html#21e00df6fb9a555975879526118d599e">complete_split</a>;    
<a name="l00352"></a><a class="code" href="structdwc__hc.html#19d0302b6e3769eada2466b8e5e0dd91">00352</a>         uint8_t <a class="code" href="structdwc__hc.html#19d0302b6e3769eada2466b8e5e0dd91">hub_addr</a>;                  
<a name="l00354"></a><a class="code" href="structdwc__hc.html#9f597e05c37d7292f4c0d965c67ee3dd">00354</a>         uint8_t <a class="code" href="structdwc__hc.html#9f597e05c37d7292f4c0d965c67ee3dd">port_addr</a>;                 
<a name="l00361"></a><a class="code" href="structdwc__hc.html#3cde49a724756e16eb11a027360b2d4b">00361</a>         uint8_t <a class="code" href="structdwc__hc.html#3cde49a724756e16eb11a027360b2d4b">xact_pos</a>;
<a name="l00362"></a>00362 
<a name="l00364"></a><a class="code" href="structdwc__hc.html#83e9a3cc9075b1fe21a6fa5190fa78c1">00364</a>         uint8_t <a class="code" href="structdwc__hc.html#83e9a3cc9075b1fe21a6fa5190fa78c1">short_read</a>;
<a name="l00365"></a>00365 
<a name="l00370"></a><a class="code" href="structdwc__hc.html#961e8eae7a18c503e370c4bc513d3e55">00370</a>         uint8_t <a class="code" href="structdwc__hc.html#961e8eae7a18c503e370c4bc513d3e55">requests</a>;
<a name="l00371"></a>00371 
<a name="l00375"></a><a class="code" href="structdwc__hc.html#d338f8db131745d9921f51c30f26cd3c">00375</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__qh.html">dwc_otg_qh</a> *<a class="code" href="structdwc__hc.html#d338f8db131745d9921f51c30f26cd3c">qh</a>;
<a name="l00376"></a>00376 
<a name="l00380"></a>00380          <a class="code" href="structdwc__hc.html#bf81e1a0c0ae06faf445a61b950e24f5">DWC_CIRCLEQ_ENTRY</a>(<a class="code" href="structdwc__hc.html">dwc_hc</a>) hc_list_entry;
<a name="l00381"></a>00381         
<a name="l00386"></a><a class="code" href="structdwc__hc.html#9a3a483b9c4e45d1ec5f475beb6a10a3">00386</a>         uint16_t <a class="code" href="structdwc__hc.html#9a3a483b9c4e45d1ec5f475beb6a10a3">ntd</a>;
<a name="l00387"></a>00387         
<a name="l00389"></a><a class="code" href="structdwc__hc.html#f3001addf65df4d3c6a5c685d7637efd">00389</a>         dwc_dma_t <a class="code" href="structdwc__hc.html#f3001addf65df4d3c6a5c685d7637efd">desc_list_addr</a>;
<a name="l00390"></a>00390         
<a name="l00392"></a><a class="code" href="structdwc__hc.html#42c5f7b0264ee050df79dc1fe57464b7">00392</a>         uint8_t <a class="code" href="structdwc__hc.html#42c5f7b0264ee050df79dc1fe57464b7">schinfo</a>;
<a name="l00393"></a>00393         
<a name="l00395"></a>00395 } <a class="code" href="structdwc__hc.html">dwc_hc_t</a>;
<a name="l00396"></a>00396 
<a name="l00401"></a><a class="code" href="structdwc__otg__core__params.html">00401</a> typedef struct <a class="code" href="structdwc__otg__core__params.html">dwc_otg_core_params</a> {
<a name="l00402"></a><a class="code" href="structdwc__otg__core__params.html#6d67db1b1152d788bf2fc7fdc6363f78">00402</a>         int32_t opt;
<a name="l00403"></a>00403 
<a name="l00411"></a><a class="code" href="structdwc__otg__core__params.html#b6960c28e9c7d82dca37645726c8f7ce">00411</a>         int32_t otg_cap;
<a name="l00412"></a>00412 
<a name="l00420"></a><a class="code" href="structdwc__otg__core__params.html#3c791cb4898379d156acc47c5b9a84fc">00420</a>         int32_t dma_enable;
<a name="l00421"></a>00421 
<a name="l00429"></a><a class="code" href="structdwc__otg__core__params.html#36c5bcf00d0f776b5c9e84e5d8ae408d">00429</a>         int32_t dma_desc_enable;
<a name="l00433"></a><a class="code" href="structdwc__otg__core__params.html#f9d2a8cd9b36d24de89121d19f693ccb">00433</a>         int32_t dma_burst_size; <span class="comment">/* Translate this to GAHBCFG values */</span>
<a name="l00434"></a>00434 
<a name="l00443"></a><a class="code" href="structdwc__otg__core__params.html#d2c4f622f1c14f68c6e60e2603acd09d">00443</a>         int32_t <a class="code" href="structdwc__hc.html#570b78178975193edb921af1ef36d37b">speed</a>;
<a name="l00449"></a><a class="code" href="structdwc__otg__core__params.html#85cad588a450b8497347af9cf166bfde">00449</a>         int32_t host_support_fs_ls_low_power;
<a name="l00450"></a>00450 
<a name="l00459"></a><a class="code" href="structdwc__otg__core__params.html#98f413798f20dc40036a2ec527935a7d">00459</a>         int32_t host_ls_low_power_phy_clk;
<a name="l00460"></a>00460 
<a name="l00465"></a><a class="code" href="structdwc__otg__core__params.html#8c169633d4a6f28e964cef9f597c6e03">00465</a>         int32_t enable_dynamic_fifo;
<a name="l00466"></a>00466 
<a name="l00473"></a><a class="code" href="structdwc__otg__core__params.html#3d8dc206f54165f52c7f8599731d0f95">00473</a>         int32_t data_fifo_size;
<a name="l00474"></a>00474 
<a name="l00479"></a><a class="code" href="structdwc__otg__core__params.html#24ea6f9329f64ac0ad2d31dafe0d1d8c">00479</a>         int32_t dev_rx_fifo_size;
<a name="l00480"></a>00480 
<a name="l00485"></a><a class="code" href="structdwc__otg__core__params.html#d08d9aee1fb4e6508089415d6150176e">00485</a>         int32_t dev_nperio_tx_fifo_size;
<a name="l00486"></a>00486 
<a name="l00491"></a><a class="code" href="structdwc__otg__core__params.html#2958d325289f4a77b6435cda729e5f6e">00491</a>         uint32_t dev_perio_tx_fifo_size[<a class="code" href="dwc__otg__core__if_8h.html#13bb22067644d357537c2905fe5ffb8c">MAX_PERIO_FIFOS</a>];
<a name="l00492"></a>00492 
<a name="l00497"></a><a class="code" href="structdwc__otg__core__params.html#2b2ab9c2fe16db70b136515b2e981f6b">00497</a>         int32_t host_rx_fifo_size;
<a name="l00498"></a>00498 
<a name="l00503"></a><a class="code" href="structdwc__otg__core__params.html#6ff00857d99f72c0cfd6198cbcfab9a7">00503</a>         int32_t host_nperio_tx_fifo_size;
<a name="l00504"></a>00504 
<a name="l00509"></a><a class="code" href="structdwc__otg__core__params.html#5bc3cac5c81fd8d6fd291ca4b7de3e28">00509</a>         int32_t host_perio_tx_fifo_size;
<a name="l00510"></a>00510 
<a name="l00514"></a><a class="code" href="structdwc__otg__core__params.html#e614d1d2ee740cd972ca76ed0dffec74">00514</a>         int32_t max_transfer_size;
<a name="l00515"></a>00515 
<a name="l00519"></a><a class="code" href="structdwc__otg__core__params.html#e17230afa013a15beda38565d19fa933">00519</a>         int32_t max_packet_count;
<a name="l00520"></a>00520 
<a name="l00525"></a><a class="code" href="structdwc__otg__core__params.html#c1b433c6965aa7d48f6ca6818c592039">00525</a>         int32_t host_channels;
<a name="l00526"></a>00526 
<a name="l00533"></a><a class="code" href="structdwc__otg__core__params.html#17d0dda7fe2cd51726cd1dd34c57b94a">00533</a>         int32_t dev_endpoints;
<a name="l00534"></a>00534 
<a name="l00543"></a><a class="code" href="structdwc__otg__core__params.html#8b5d4e0c98c46d0d4e80b6faf66daf72">00543</a>         int32_t phy_type;
<a name="l00544"></a>00544 
<a name="l00556"></a><a class="code" href="structdwc__otg__core__params.html#41f5a03ab1b68564b240e03f33a09dde">00556</a>         int32_t phy_utmi_width;
<a name="l00557"></a>00557 
<a name="l00568"></a><a class="code" href="structdwc__otg__core__params.html#6fc9a3fbe3c36cbbc231f1642ee96cfe">00568</a>         int32_t phy_ulpi_ddr;
<a name="l00569"></a>00569 
<a name="l00574"></a><a class="code" href="structdwc__otg__core__params.html#3b6fa0a7fe7d7f87326894fdbe0aa375">00574</a>         int32_t phy_ulpi_ext_vbus;
<a name="l00575"></a>00575 
<a name="l00582"></a><a class="code" href="structdwc__otg__core__params.html#6b0a0ab15284a541ae079beecaf3e617">00582</a>         int32_t i2c_enable;
<a name="l00583"></a>00583 
<a name="l00584"></a><a class="code" href="structdwc__otg__core__params.html#3d7cfc3c416010102b2c671dfaa828d5">00584</a>         int32_t ulpi_fs_ls;
<a name="l00585"></a>00585 
<a name="l00586"></a><a class="code" href="structdwc__otg__core__params.html#879afefd6e13233a78d74ee71d3ee75e">00586</a>         int32_t ts_dline;
<a name="l00587"></a>00587 
<a name="l00594"></a><a class="code" href="structdwc__otg__core__params.html#d61279dcea66973b2915e335efb07fe3">00594</a>         int32_t en_multiple_tx_fifo;
<a name="l00595"></a>00595 
<a name="l00600"></a><a class="code" href="structdwc__otg__core__params.html#6e0c5d06467fbf3458f11f7eb8153a8b">00600</a>         uint32_t dev_tx_fifo_size[<a class="code" href="dwc__otg__core__if_8h.html#050db6129005b993e573311dc42bc1a8">MAX_TX_FIFOS</a>];
<a name="l00601"></a>00601 
<a name="l00607"></a><a class="code" href="structdwc__otg__core__params.html#1610a4b28bea581c46f251d995bf4a51">00607</a>         uint32_t thr_ctl;
<a name="l00608"></a>00608 
<a name="l00612"></a><a class="code" href="structdwc__otg__core__params.html#c92fc907d503f9b8bb3600164c520b0e">00612</a>         uint32_t tx_thr_length;
<a name="l00613"></a>00613 
<a name="l00617"></a><a class="code" href="structdwc__otg__core__params.html#2cb1f83013e357828fbf55ac91971d44">00617</a>         uint32_t rx_thr_length;
<a name="l00618"></a>00618 
<a name="l00622"></a><a class="code" href="structdwc__otg__core__params.html#8b906ba765a10dd9fcfa1c02dbc0184e">00622</a>         int32_t lpm_enable;
<a name="l00623"></a>00623 
<a name="l00629"></a><a class="code" href="structdwc__otg__core__params.html#b601fde03b371b74deab1205e1329a7d">00629</a>         int32_t pti_enable;
<a name="l00630"></a>00630 
<a name="l00636"></a><a class="code" href="structdwc__otg__core__params.html#740e50199a75b3877b7db630d49c36aa">00636</a>         int32_t mpi_enable;
<a name="l00637"></a>00637 
<a name="l00642"></a><a class="code" href="structdwc__otg__core__params.html#359a3cb3a7b4800a0c32750005c9fd1b">00642</a>         int32_t ic_usb_cap;
<a name="l00643"></a>00643 
<a name="l00650"></a><a class="code" href="structdwc__otg__core__params.html#8787af52f8d70a9100ab1fa2b0f69bfb">00650</a>         int32_t ahb_thr_ratio;
<a name="l00651"></a>00651 
<a name="l00652"></a>00652 } <a class="code" href="structdwc__otg__core__params.html">dwc_otg_core_params_t</a>;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00655"></a>00655 <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if</a>;
<a name="l00656"></a>00656 <span class="keyword">typedef</span> <span class="keyword">struct </span>hc_xfer_info {
<a name="l00657"></a>00657         <span class="keyword">struct </span><a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if</a> *core_if;
<a name="l00658"></a>00658         <a class="code" href="structdwc__hc.html">dwc_hc_t</a> *hc;
<a name="l00659"></a>00659 } hc_xfer_info_t;
<a name="l00660"></a>00660 <span class="preprocessor">#endif</span>
<a name="l00661"></a>00661 <span class="preprocessor"></span><span class="comment">/*</span>
<a name="l00662"></a>00662 <span class="comment"> * Device States</span>
<a name="l00663"></a>00663 <span class="comment"> */</span>
<a name="l00664"></a><a class="code" href="dwc__otg__cil_8h.html#8442e49b7c783099ac17bda4f8b3bc3c">00664</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="dwc__otg__cil_8h.html#8442e49b7c783099ac17bda4f8b3bc3c">dwc_otg_lx_state</a> {
<a name="l00666"></a>00666         <a class="code" href="dwc__otg__cil_8h.html#8442e49b7c783099ac17bda4f8b3bc3c9743a36d9b0b8c66a11a0714fdd27fb5">DWC_OTG_L0</a>,
<a name="l00668"></a>00668         <a class="code" href="dwc__otg__cil_8h.html#8442e49b7c783099ac17bda4f8b3bc3cf5b112742a8103f3489107ad26c0ff58">DWC_OTG_L1</a>,
<a name="l00670"></a>00670         <a class="code" href="dwc__otg__cil_8h.html#8442e49b7c783099ac17bda4f8b3bc3cd1fadb6fa31de73e8176316a0e0ba905">DWC_OTG_L2</a>,
<a name="l00672"></a>00672         <a class="code" href="dwc__otg__cil_8h.html#8442e49b7c783099ac17bda4f8b3bc3c86715d528a59b114b95aaafa8f2142f6">DWC_OTG_L3</a>
<a name="l00673"></a>00673 } dwc_otg_lx_state_e;
<a name="l00674"></a>00674 
<a name="l00680"></a><a class="code" href="structdwc__otg__core__if.html">00680</a> <span class="keyword">struct </span><a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if</a> {
<a name="l00682"></a><a class="code" href="structdwc__otg__core__if.html#63ffc9b8e36340bd59bf1fab9ca490ad">00682</a>         <a class="code" href="structdwc__otg__core__params.html">dwc_otg_core_params_t</a> *core_params;
<a name="l00683"></a>00683 
<a name="l00685"></a><a class="code" href="structdwc__otg__core__if.html#909eae7e3b9432ca1e278b99f7811f52">00685</a>         <a class="code" href="structdwc__otg__core__global__regs.html">dwc_otg_core_global_regs_t</a> *core_global_regs;
<a name="l00686"></a>00686 
<a name="l00688"></a><a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">00688</a>         <a class="code" href="structdwc__otg__dev__if.html">dwc_otg_dev_if_t</a> *dev_if;
<a name="l00690"></a><a class="code" href="structdwc__otg__core__if.html#51bac71891b5f6f435d7fc4582b974c1">00690</a>         <a class="code" href="structdwc__otg__host__if.html">dwc_otg_host_if_t</a> *host_if;
<a name="l00691"></a>00691 
<a name="l00693"></a><a class="code" href="structdwc__otg__core__if.html#afc495591efa54c74c1dd50278b57ffe">00693</a>         uint32_t snpsid;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695         <span class="comment">/*</span>
<a name="l00696"></a>00696 <span class="comment">         * Set to 1 if the core PHY interface bits in USBCFG have been</span>
<a name="l00697"></a>00697 <span class="comment">         * initialized.</span>
<a name="l00698"></a>00698 <span class="comment">         */</span>
<a name="l00699"></a><a class="code" href="structdwc__otg__core__if.html#24dd9dec510e5edac930538b81004b74">00699</a>         uint8_t phy_init_done;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701         <span class="comment">/*</span>
<a name="l00702"></a>00702 <span class="comment">         * SRP Success flag, set by srp success interrupt in FS I2C mode</span>
<a name="l00703"></a>00703 <span class="comment">         */</span>
<a name="l00704"></a><a class="code" href="structdwc__otg__core__if.html#c2bb1913ed3fcc082a06d70242e9768a">00704</a>         uint8_t srp_success;
<a name="l00705"></a><a class="code" href="structdwc__otg__core__if.html#749cdeef193b7590b036a9b1d1442b73">00705</a>         uint8_t srp_timer_started;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707         <span class="comment">/* Common configuration information */</span>
<a name="l00709"></a><a class="code" href="structdwc__otg__core__if.html#348ed2c9aeae6fc608f1bb813978b3f9">00709</a>         <span class="keyword">volatile</span> uint32_t *pcgcctl;
<a name="l00710"></a><a class="code" href="dwc__otg__cil_8h.html#1e6c4a07594b33ba981e3664a2f3366c">00710</a> <span class="preprocessor">#define DWC_OTG_PCGCCTL_OFFSET 0xE00</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>
<a name="l00713"></a><a class="code" href="structdwc__otg__core__if.html#f99c868784a8269073bc251f88d92ee4">00713</a>         uint32_t *data_fifo[<a class="code" href="dwc__otg__core__if_8h.html#bfb88b45545f7685f668ac2f545674ec">MAX_EPS_CHANNELS</a>];
<a name="l00714"></a><a class="code" href="dwc__otg__cil_8h.html#921e7968f6c39c1d7c8d3b4b95a4f4eb">00714</a> <span class="preprocessor">#define DWC_OTG_DATA_FIFO_OFFSET 0x1000</span>
<a name="l00715"></a><a class="code" href="dwc__otg__cil_8h.html#b7aa34c1f7efae9b69e2891fea7b615f">00715</a> <span class="preprocessor"></span><span class="preprocessor">#define DWC_OTG_DATA_FIFO_SIZE 0x1000</span>
<a name="l00716"></a>00716 <span class="preprocessor"></span>
<a name="l00718"></a><a class="code" href="structdwc__otg__core__if.html#cae59008a554cb7de24bd4f2afea7532">00718</a>         uint16_t total_fifo_size;
<a name="l00720"></a><a class="code" href="structdwc__otg__core__if.html#50bbb76c3818ada9ed2ea5527edabcd4">00720</a>         uint16_t rx_fifo_size;
<a name="l00722"></a><a class="code" href="structdwc__otg__core__if.html#fb77b09f04a5687d2087726edd8dece6">00722</a>         uint16_t nperio_tx_fifo_size;
<a name="l00723"></a>00723 
<a name="l00725"></a><a class="code" href="structdwc__otg__core__if.html#5ade18c62c5101c603247691d3047a19">00725</a>         uint8_t dma_enable;
<a name="l00726"></a>00726 
<a name="l00728"></a><a class="code" href="structdwc__otg__core__if.html#7e3b96c6167eceeeb1090798f8297f1f">00728</a>         uint8_t dma_desc_enable;
<a name="l00729"></a>00729 
<a name="l00731"></a><a class="code" href="structdwc__otg__core__if.html#34540b79e9a14bfa234a52ac132c5cd1">00731</a>         uint8_t pti_enh_enable;
<a name="l00732"></a>00732 
<a name="l00734"></a><a class="code" href="structdwc__otg__core__if.html#5675c8d8dd7df746fda9157dc39ba5c2">00734</a>         uint8_t multiproc_int_enable;
<a name="l00735"></a>00735 
<a name="l00737"></a><a class="code" href="structdwc__otg__core__if.html#31d08d1ebcd290b05139b0fcd24048ec">00737</a>         uint8_t en_multiple_tx_fifo;
<a name="l00738"></a>00738 
<a name="l00741"></a><a class="code" href="structdwc__otg__core__if.html#5a6a90b40bc80e71d40f107b68f1e84c">00741</a>         uint8_t queuing_high_bandwidth;
<a name="l00742"></a>00742 
<a name="l00744"></a><a class="code" href="structdwc__otg__core__if.html#d7c6a00c6d7c157ff60a044a28ec8b95">00744</a>         <a class="code" href="unionhwcfg1__data.html">hwcfg1_data_t</a> hwcfg1;
<a name="l00745"></a><a class="code" href="structdwc__otg__core__if.html#e5782c3dc6b5b7a25dfebd4b9bf258c5">00745</a>         <a class="code" href="unionhwcfg2__data.html">hwcfg2_data_t</a> hwcfg2;
<a name="l00746"></a><a class="code" href="structdwc__otg__core__if.html#91d0e0a5e8e048024c8846d12e00cecc">00746</a>         <a class="code" href="unionhwcfg3__data.html">hwcfg3_data_t</a> hwcfg3;
<a name="l00747"></a><a class="code" href="structdwc__otg__core__if.html#9c1394f3c46adde2fa7be79bf0237f9b">00747</a>         <a class="code" href="unionhwcfg4__data.html">hwcfg4_data_t</a> hwcfg4;
<a name="l00748"></a>00748 
<a name="l00750"></a><a class="code" href="structdwc__otg__core__if.html#447a626f22ad64a90c68a6f49e624eb8">00750</a>         <a class="code" href="unionhcfg__data.html">hcfg_data_t</a> hcfg;
<a name="l00751"></a><a class="code" href="structdwc__otg__core__if.html#fcce854acc5b4afca80bd5667ecc4ef2">00751</a>         <a class="code" href="uniondcfg__data.html">dcfg_data_t</a> dcfg;
<a name="l00752"></a>00752 
<a name="l00758"></a><a class="code" href="structdwc__otg__core__if.html#5a5c5c1cf8d870101cc1fffac56d88c0">00758</a>         uint8_t op_state;
<a name="l00759"></a>00759 
<a name="l00765"></a><a class="code" href="structdwc__otg__core__if.html#05b4c81b19338fc64090cf22d635517a">00765</a>         uint8_t restart_hcd_on_session_req;
<a name="l00766"></a>00766 
<a name="l00769"></a><a class="code" href="dwc__otg__cil_8h.html#a0732b344b6571a4554968e4ee2214dd">00769</a> <span class="preprocessor">#define A_HOST          (1)</span>
<a name="l00770"></a>00770 <span class="preprocessor"></span>
<a name="l00771"></a><a class="code" href="dwc__otg__cil_8h.html#da9f5eb506da71435e8976ceb38bc14d">00771</a> <span class="preprocessor">#define A_SUSPEND       (2)</span>
<a name="l00772"></a>00772 <span class="preprocessor"></span>
<a name="l00773"></a><a class="code" href="dwc__otg__cil_8h.html#7528970c03451cfc85e86ab92bbaf554">00773</a> <span class="preprocessor">#define A_PERIPHERAL    (3)</span>
<a name="l00774"></a>00774 <span class="preprocessor"></span>
<a name="l00775"></a><a class="code" href="dwc__otg__cil_8h.html#622c3b95c9a587f518a787c05c50ffb7">00775</a> <span class="preprocessor">#define B_PERIPHERAL    (4)</span>
<a name="l00776"></a>00776 <span class="preprocessor"></span>
<a name="l00777"></a><a class="code" href="dwc__otg__cil_8h.html#02d6d4d9a0fdcc4fc8c5cf8e6c8577aa">00777</a> <span class="preprocessor">#define B_HOST          (5)</span>
<a name="l00778"></a>00778 <span class="preprocessor"></span>
<a name="l00780"></a><a class="code" href="structdwc__otg__core__if.html#9a8568a762af68c9b0d97e0278cc26ba">00780</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks</a> *hcd_cb;
<a name="l00782"></a><a class="code" href="structdwc__otg__core__if.html#83bca1e02fafc4bbfa9c1f2eeb19b245">00782</a>         <span class="keyword">struct </span><a class="code" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks</a> *pcd_cb;
<a name="l00783"></a>00783 
<a name="l00785"></a><a class="code" href="structdwc__otg__core__if.html#0683b28ebf5247a60247d27a1a714d27">00785</a>         uint32_t p_tx_msk;
<a name="l00787"></a><a class="code" href="structdwc__otg__core__if.html#b558bae74403677f08e45c692a88d4e2">00787</a>         uint32_t tx_msk;
<a name="l00788"></a>00788 
<a name="l00790"></a><a class="code" href="structdwc__otg__core__if.html#7e3716f6d6bc6f956a45efbe6e308386">00790</a>         dwc_workq_t *wq_otg;
<a name="l00791"></a>00791 
<a name="l00793"></a><a class="code" href="structdwc__otg__core__if.html#c914461f460deacd426bea7a05ebb204">00793</a>         dwc_timer_t *wkp_timer;
<a name="l00794"></a>00794 
<a name="l00795"></a>00795 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00796"></a>00796 <span class="preprocessor"></span>        uint32_t start_hcchar_val[<a class="code" href="dwc__otg__core__if_8h.html#bfb88b45545f7685f668ac2f545674ec">MAX_EPS_CHANNELS</a>];
<a name="l00797"></a>00797 
<a name="l00798"></a>00798         hc_xfer_info_t hc_xfer_info[<a class="code" href="dwc__otg__core__if_8h.html#bfb88b45545f7685f668ac2f545674ec">MAX_EPS_CHANNELS</a>];
<a name="l00799"></a>00799         dwc_timer_t *hc_xfer_timer[<a class="code" href="dwc__otg__core__if_8h.html#bfb88b45545f7685f668ac2f545674ec">MAX_EPS_CHANNELS</a>];
<a name="l00800"></a>00800 
<a name="l00801"></a>00801         uint32_t hfnum_7_samples;
<a name="l00802"></a>00802         uint64_t hfnum_7_frrem_accum;
<a name="l00803"></a>00803         uint32_t hfnum_0_samples;
<a name="l00804"></a>00804         uint64_t hfnum_0_frrem_accum;
<a name="l00805"></a>00805         uint32_t hfnum_other_samples;
<a name="l00806"></a>00806         uint64_t hfnum_other_frrem_accum;
<a name="l00807"></a>00807 <span class="preprocessor">#endif</span>
<a name="l00808"></a>00808 <span class="preprocessor"></span>
<a name="l00809"></a>00809 <span class="preprocessor">#ifdef DWC_UTE_CFI</span>
<a name="l00810"></a>00810 <span class="preprocessor"></span>        uint16_t pwron_rxfsiz;
<a name="l00811"></a>00811         uint16_t pwron_gnptxfsiz;
<a name="l00812"></a>00812         uint16_t pwron_txfsiz[15];
<a name="l00813"></a>00813 
<a name="l00814"></a>00814         uint16_t init_rxfsiz;
<a name="l00815"></a>00815         uint16_t init_gnptxfsiz;
<a name="l00816"></a>00816         uint16_t init_txfsiz[15];
<a name="l00817"></a>00817 <span class="preprocessor">#endif</span>
<a name="l00818"></a>00818 <span class="preprocessor"></span>
<a name="l00820"></a><a class="code" href="structdwc__otg__core__if.html#2b0701d814069ec69897e08374366c7b">00820</a>         dwc_otg_lx_state_e lx_state;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822 };
<a name="l00823"></a>00823 
<a name="l00824"></a>00824 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00825"></a>00825 <span class="preprocessor"></span><span class="comment">/*</span>
<a name="l00826"></a>00826 <span class="comment"> * This function is called when transfer is timed out.</span>
<a name="l00827"></a>00827 <span class="comment"> */</span>
<a name="l00828"></a>00828 <span class="keyword">extern</span> <span class="keywordtype">void</span> hc_xfer_timeout(<span class="keywordtype">void</span> *ptr);
<a name="l00829"></a>00829 <span class="preprocessor">#endif</span>
<a name="l00830"></a>00830 <span class="preprocessor"></span>
<a name="l00831"></a>00831 <span class="comment">/*</span>
<a name="l00832"></a>00832 <span class="comment"> * The following functions are functions for works </span>
<a name="l00833"></a>00833 <span class="comment"> * using during handling some interrupts</span>
<a name="l00834"></a>00834 <span class="comment"> */</span>
<a name="l00835"></a>00835 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8h.html#9ef061e0e79210e6c2a2c2b9cc45bd45">w_conn_id_status_change</a>(<span class="keywordtype">void</span> *<a class="code" href="structdwc__otg__cil__callbacks.html#a486473d73fb104dc3a37e963a8ef8e5">p</a>);
<a name="l00836"></a>00836 
<a name="l00837"></a>00837 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8h.html#07f0b189448c71e7ea4c7b121320fb89">w_wakeup_detected</a>(<span class="keywordtype">void</span> *<a class="code" href="structdwc__otg__cil__callbacks.html#a486473d73fb104dc3a37e963a8ef8e5">p</a>);
<a name="l00838"></a>00838 
<a name="l00839"></a>00839 <span class="comment">/*</span>
<a name="l00840"></a>00840 <span class="comment"> * The following functions support initialization of the CIL driver component</span>
<a name="l00841"></a>00841 <span class="comment"> * and the DWC_otg controller.</span>
<a name="l00842"></a>00842 <span class="comment"> */</span>
<a name="l00843"></a>00843 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#04ad276f20faad71333f6293c952744e">dwc_otg_core_host_init</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00844"></a>00844 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#f79b0f3b5b96b0535e33627ee3a66eba">dwc_otg_core_dev_init</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00845"></a>00845 
<a name="l00851"></a>00851 <span class="keyword">extern</span> <span class="keywordtype">void</span> dwc_otg_wakeup(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00852"></a>00852 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#b56e0d90c67bbf2829e630cafd630f17">dwc_otg_read_setup_packet</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00853"></a>00853                                       uint32_t * _dest);
<a name="l00854"></a>00854 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__cil_8c.html#78f20f3acf6245b189abde83d9ce78f2">dwc_otg_get_frame_number</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00855"></a>00855 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#8ebf5023c783a2ec48a18a5b9aef4a87">dwc_otg_ep0_activate</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00856"></a>00856 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#5e5a1fb1ff70d5c42d8cf4a1c5d12b7f">dwc_otg_ep_activate</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00857"></a>00857 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#94789f2d72adb5daf65c99eadced66b3">dwc_otg_ep_deactivate</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00858"></a>00858 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#1278f6d58a4a2bc780e90e0b6c9b9a68">dwc_otg_ep_start_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00859"></a>00859                                       <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00860"></a>00860 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#fcc9f9b12c040c3649f0b8273a24ddf7">dwc_otg_ep_start_zl_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00861"></a>00861                                          <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00862"></a>00862 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#ee4989b24826b2a6592535282853e556">dwc_otg_ep0_start_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00863"></a>00863                                        <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00864"></a>00864 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#d8c1e6f7860c482df84db003b52c369c">dwc_otg_ep0_continue_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00865"></a>00865                                           <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00866"></a>00866 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#97a11808b8b12a365a91f02b6d686d0c">dwc_otg_ep_write_packet</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00867"></a>00867                                     <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep, <span class="keywordtype">int</span> _dma);
<a name="l00868"></a>00868 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#5edca13178261136209ed51360c850b4">dwc_otg_ep_set_stall</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00869"></a>00869 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#a5f77318fb1c589406927a606844007f">dwc_otg_ep_clear_stall</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00870"></a>00870                                    <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep);
<a name="l00871"></a>00871 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#3d60e58f32be881047ac61bc852f60f7">dwc_otg_enable_device_interrupts</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00872"></a>00872 
<a name="l00873"></a>00873 <span class="preprocessor">#ifdef DWC_EN_ISOC</span>
<a name="l00874"></a>00874 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#0f0894ae9890260e1da839aa10af35cc">dwc_otg_iso_ep_start_frm_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if,
<a name="l00875"></a>00875                                               <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * ep);
<a name="l00876"></a>00876 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8h.html#0b13a31a7ddc82b53862cd06cfed6393">dwc_otg_iso_ep_start_buf_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if,
<a name="l00877"></a>00877                                               <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * ep);
<a name="l00878"></a>00878 <span class="preprocessor">#endif                          </span><span class="comment">/* DWC_EN_ISOC */</span>
<a name="l00879"></a>00879 
<a name="l00886"></a>00886 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#7b04d5b3b31c79c73d577cfbb231998c">dwc_otg_hc_init</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc);
<a name="l00887"></a>00887 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#de044bf6b96c1bac92259a447ae85c0f">dwc_otg_hc_halt</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00888"></a>00888                             <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc, dwc_otg_halt_status_e _halt_status);
<a name="l00889"></a>00889 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#f05341f811fba7f6183db66faf50a867">dwc_otg_hc_cleanup</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc);
<a name="l00890"></a>00890 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#025af79d6a2255dba4578588be510444">dwc_otg_hc_start_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00891"></a>00891                                       <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc);
<a name="l00892"></a>00892 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__cil_8c.html#d848c41cdd739edd9271e1e207af9c9c">dwc_otg_hc_continue_transfer</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00893"></a>00893                                         <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc);
<a name="l00894"></a>00894 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#4185d0b9bb4a49d28894f957c2e41117">dwc_otg_hc_do_ping</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc);
<a name="l00895"></a>00895 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#c4ccce95ab4067e03c089519c1b54a94">dwc_otg_hc_write_packet</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l00896"></a>00896                                     <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc);
<a name="l00897"></a>00897 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#373701240c023fda03eed98cf093df74">dwc_otg_enable_host_interrupts</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00898"></a>00898 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#4dd4a30dd75a819e9da38d6410cbb0a4">dwc_otg_disable_host_interrupts</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00899"></a>00899 
<a name="l00900"></a>00900 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#dbc20e9f9cadbdf4df65db3f82bbb820">dwc_otg_hc_start_transfer_ddma</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if, <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * hc);
<a name="l00901"></a>00901 
<a name="l00902"></a>00902 <span class="comment">/* Macro used to clear one channel interrupt */</span>
<a name="l00903"></a><a class="code" href="dwc__otg__cil_8h.html#071cb1f3f29f9a52775e9fff270b1c7c">00903</a> <span class="preprocessor">#define clear_hc_int(_hc_regs_, _intr_) \</span>
<a name="l00904"></a>00904 <span class="preprocessor">do { \</span>
<a name="l00905"></a>00905 <span class="preprocessor">        hcint_data_t hcint_clear = {.d32 = 0}; \</span>
<a name="l00906"></a>00906 <span class="preprocessor">        hcint_clear.b._intr_ = 1; \</span>
<a name="l00907"></a>00907 <span class="preprocessor">        dwc_write_reg32(&amp;(_hc_regs_)-&gt;hcint, hcint_clear.d32); \</span>
<a name="l00908"></a>00908 <span class="preprocessor">} while (0)</span>
<a name="l00909"></a>00909 <span class="preprocessor"></span>
<a name="l00910"></a>00910 <span class="comment">/*</span>
<a name="l00911"></a>00911 <span class="comment"> * Macro used to disable one channel interrupt. Channel interrupts are</span>
<a name="l00912"></a>00912 <span class="comment"> * disabled when the channel is halted or released by the interrupt handler.</span>
<a name="l00913"></a>00913 <span class="comment"> * There is no need to handle further interrupts of that type until the</span>
<a name="l00914"></a>00914 <span class="comment"> * channel is re-assigned. In fact, subsequent handling may cause crashes</span>
<a name="l00915"></a>00915 <span class="comment"> * because the channel structures are cleaned up when the channel is released.</span>
<a name="l00916"></a>00916 <span class="comment"> */</span>
<a name="l00917"></a><a class="code" href="dwc__otg__cil_8h.html#e530fa4a6ed31f67cad65969355651ef">00917</a> <span class="preprocessor">#define disable_hc_int(_hc_regs_, _intr_) \</span>
<a name="l00918"></a>00918 <span class="preprocessor">do { \</span>
<a name="l00919"></a>00919 <span class="preprocessor">        hcintmsk_data_t hcintmsk = {.d32 = 0}; \</span>
<a name="l00920"></a>00920 <span class="preprocessor">        hcintmsk.b._intr_ = 1; \</span>
<a name="l00921"></a>00921 <span class="preprocessor">        dwc_modify_reg32(&amp;(_hc_regs_)-&gt;hcintmsk, hcintmsk.d32, 0); \</span>
<a name="l00922"></a>00922 <span class="preprocessor">} while (0)</span>
<a name="l00923"></a>00923 <span class="preprocessor"></span>                
<a name="l00929"></a><a class="code" href="dwc__otg__cil_8h.html#ce67da6af4023cffd25333d20992438e">00929</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#ce67da6af4023cffd25333d20992438e">dwc_otg_read_hprt0</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if)
<a name="l00930"></a>00930 {
<a name="l00931"></a>00931         <a class="code" href="unionhprt0__data.html">hprt0_data_t</a> hprt0;
<a name="l00932"></a>00932         hprt0.<a class="code" href="unionhprt0__data.html#88e9271f697d2ec209fc6a6da67fe216">d32</a> = dwc_read_reg32(_core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#51bac71891b5f6f435d7fc4582b974c1">host_if</a>-&gt;<a class="code" href="structdwc__otg__host__if.html#dc8fe33e0bb3829cafa884d5fc603c4d">hprt0</a>);
<a name="l00933"></a>00933         hprt0.<a class="code" href="unionhprt0__data.html#08cd86ce6da6462fc53601db7e2b73f3">b</a>.<a class="code" href="unionhprt0__data.html#a964274b5d22e89ca4490f66dff3c763">prtena</a> = 0;
<a name="l00934"></a>00934         hprt0.<a class="code" href="unionhprt0__data.html#08cd86ce6da6462fc53601db7e2b73f3">b</a>.<a class="code" href="unionhprt0__data.html#5124a40eeafd92c9632c91a2c3132937">prtconndet</a> = 0;
<a name="l00935"></a>00935         hprt0.<a class="code" href="unionhprt0__data.html#08cd86ce6da6462fc53601db7e2b73f3">b</a>.<a class="code" href="unionhprt0__data.html#75eae10eb537e49cc1ae2dc01c18aa47">prtenchng</a> = 0;
<a name="l00936"></a>00936         hprt0.<a class="code" href="unionhprt0__data.html#08cd86ce6da6462fc53601db7e2b73f3">b</a>.<a class="code" href="unionhprt0__data.html#cc51da1d52cb824d419ef3feb6ba70b6">prtovrcurrchng</a> = 0;
<a name="l00937"></a>00937         <span class="keywordflow">return</span> hprt0.<a class="code" href="unionhprt0__data.html#88e9271f697d2ec209fc6a6da67fe216">d32</a>;
<a name="l00938"></a>00938 }
<a name="l00939"></a>00939 
<a name="l00948"></a>00948 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#68f59dd23ccfffa9aa1dc590e99b7668">dwc_otg_read_packet</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if,
<a name="l00949"></a>00949                                 uint8_t * dest, uint16_t bytes);
<a name="l00950"></a>00950 
<a name="l00951"></a>00951 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#039e387cd0e0282727da3c5a36f4cdda">dwc_otg_flush_tx_fifo</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if, <span class="keyword">const</span> <span class="keywordtype">int</span> _num);
<a name="l00952"></a>00952 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#fb275f0f9923cc30629fce5e3753025c">dwc_otg_flush_rx_fifo</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00953"></a>00953 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#1edfc5634dd76db76e30f20affc10f0c">dwc_otg_core_reset</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if);
<a name="l00954"></a>00954 
<a name="l00958"></a><a class="code" href="dwc__otg__cil_8h.html#639809e3c27026b8f956c2a133b1d433">00958</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#639809e3c27026b8f956c2a133b1d433">dwc_otg_read_core_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if)
<a name="l00959"></a>00959 {
<a name="l00960"></a>00960         <span class="keywordflow">return</span> (dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#909eae7e3b9432ca1e278b99f7811f52">core_global_regs</a>-&gt;<a class="code" href="structdwc__otg__core__global__regs.html#aa1d909e3b0a60a56bf612968ff09019">gintsts</a>) &amp;
<a name="l00961"></a>00961                 dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#909eae7e3b9432ca1e278b99f7811f52">core_global_regs</a>-&gt;<a class="code" href="structdwc__otg__core__global__regs.html#48827c76da2c6b18f369e2f2483cc4b6">gintmsk</a>));
<a name="l00962"></a>00962 }
<a name="l00963"></a>00963 
<a name="l00967"></a><a class="code" href="dwc__otg__cil_8h.html#6f5d7863a0e519c8e2e331da3029b579">00967</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#6f5d7863a0e519c8e2e331da3029b579">dwc_otg_read_otg_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if)
<a name="l00968"></a>00968 {
<a name="l00969"></a>00969         <span class="keywordflow">return</span> (dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#909eae7e3b9432ca1e278b99f7811f52">core_global_regs</a>-&gt;<a class="code" href="structdwc__otg__core__global__regs.html#69cc290cfdfe6900890f7a5a16b3137c">gotgint</a>));
<a name="l00970"></a>00970 }
<a name="l00971"></a>00971 
<a name="l00976"></a><a class="code" href="dwc__otg__cil_8h.html#574c9a2a3f7fa76d93e735daf2c64e2f">00976</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#574c9a2a3f7fa76d93e735daf2c64e2f">dwc_otg_read_dev_all_in_ep_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *
<a name="l00977"></a>00977                                                        core_if)
<a name="l00978"></a>00978 {
<a name="l00979"></a>00979 
<a name="l00980"></a>00980         uint32_t v;
<a name="l00981"></a>00981 
<a name="l00982"></a>00982         <span class="keywordflow">if</span> (core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#5675c8d8dd7df746fda9157dc39ba5c2">multiproc_int_enable</a>) {
<a name="l00983"></a>00983                 v = dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;
<a name="l00984"></a>00984                                    deachint) &amp; dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;
<a name="l00985"></a>00985                                                               dev_global_regs-&gt;
<a name="l00986"></a>00986                                                               deachintmsk);
<a name="l00987"></a>00987         } <span class="keywordflow">else</span> {
<a name="l00988"></a>00988                 v = dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;<a class="code" href="structdwc__otg__dev__global__regs.html#2e25df2fbec9d398742709524056cbd5">daint</a>) &amp;
<a name="l00989"></a>00989                     dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;<a class="code" href="structdwc__otg__dev__global__regs.html#5def6c3850c041928b9a662422ee0679">daintmsk</a>);
<a name="l00990"></a>00990         }
<a name="l00991"></a>00991         <span class="keywordflow">return</span> (v &amp; 0xffff);
<a name="l00992"></a>00992 }
<a name="l00993"></a>00993 
<a name="l00998"></a><a class="code" href="dwc__otg__cil_8h.html#43d4fc3ed87fc91c58c0299a9f3e82fe">00998</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#43d4fc3ed87fc91c58c0299a9f3e82fe">dwc_otg_read_dev_all_out_ep_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *
<a name="l00999"></a>00999                                                         core_if)
<a name="l01000"></a>01000 {
<a name="l01001"></a>01001         uint32_t v;
<a name="l01002"></a>01002 
<a name="l01003"></a>01003         <span class="keywordflow">if</span> (core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#5675c8d8dd7df746fda9157dc39ba5c2">multiproc_int_enable</a>) {
<a name="l01004"></a>01004                 v = dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;
<a name="l01005"></a>01005                                    deachint) &amp; dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;
<a name="l01006"></a>01006                                                               dev_global_regs-&gt;
<a name="l01007"></a>01007                                                               deachintmsk);
<a name="l01008"></a>01008         } <span class="keywordflow">else</span> {
<a name="l01009"></a>01009                 v = dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;<a class="code" href="structdwc__otg__dev__global__regs.html#2e25df2fbec9d398742709524056cbd5">daint</a>) &amp;
<a name="l01010"></a>01010                     dwc_read_reg32(&amp;core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;<a class="code" href="structdwc__otg__dev__global__regs.html#5def6c3850c041928b9a662422ee0679">daintmsk</a>);
<a name="l01011"></a>01011         }
<a name="l01012"></a>01012 
<a name="l01013"></a>01013         <span class="keywordflow">return</span> ((v &amp; 0xffff0000) &gt;&gt; 16);
<a name="l01014"></a>01014 }
<a name="l01015"></a>01015 
<a name="l01019"></a><a class="code" href="dwc__otg__cil_8h.html#d14e93e73613cfa13336db4da4ee2f20">01019</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#d14e93e73613cfa13336db4da4ee2f20">dwc_otg_read_dev_in_ep_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if,
<a name="l01020"></a>01020                                                    <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * ep)
<a name="l01021"></a>01021 {
<a name="l01022"></a>01022         <a class="code" href="structdwc__otg__dev__if.html">dwc_otg_dev_if_t</a> *dev_if = core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>;
<a name="l01023"></a>01023         uint32_t v, msk, emp;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025         <span class="keywordflow">if</span> (core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#5675c8d8dd7df746fda9157dc39ba5c2">multiproc_int_enable</a>) {
<a name="l01026"></a>01026                 msk =
<a name="l01027"></a>01027                     dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;
<a name="l01028"></a>01028                                    diepeachintmsk[ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>]);
<a name="l01029"></a>01029                 emp =
<a name="l01030"></a>01030                     dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;
<a name="l01031"></a>01031                                    dtknqr4_fifoemptymsk);
<a name="l01032"></a>01032                 msk |= ((emp &gt;&gt; ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>) &amp; 0x1) &lt;&lt; 7;
<a name="l01033"></a>01033                 v = dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#7329ead96344810d718f63738b54a4ca">in_ep_regs</a>[ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>]-&gt;diepint) &amp; msk;
<a name="l01034"></a>01034         } <span class="keywordflow">else</span> {
<a name="l01035"></a>01035                 msk = dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;<a class="code" href="structdwc__otg__dev__global__regs.html#02e44cb182548d78c5b7d27929ca5f11">diepmsk</a>);
<a name="l01036"></a>01036                 emp =
<a name="l01037"></a>01037                     dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;
<a name="l01038"></a>01038                                    dtknqr4_fifoemptymsk);
<a name="l01039"></a>01039                 msk |= ((emp &gt;&gt; ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>) &amp; 0x1) &lt;&lt; 7;
<a name="l01040"></a>01040                 v = dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#7329ead96344810d718f63738b54a4ca">in_ep_regs</a>[ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>]-&gt;diepint) &amp; msk;
<a name="l01041"></a>01041         }
<a name="l01042"></a>01042 
<a name="l01043"></a>01043         <span class="keywordflow">return</span> v;
<a name="l01044"></a>01044 }
<a name="l01045"></a>01045 
<a name="l01049"></a><a class="code" href="dwc__otg__cil_8h.html#01199eaadd2a7b875c1841d13ee3728b">01049</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#01199eaadd2a7b875c1841d13ee3728b">dwc_otg_read_dev_out_ep_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *
<a name="l01050"></a>01050                                                     _core_if, <a class="code" href="structdwc__ep.html">dwc_ep_t</a> * _ep)
<a name="l01051"></a>01051 {
<a name="l01052"></a>01052         <a class="code" href="structdwc__otg__dev__if.html">dwc_otg_dev_if_t</a> *dev_if = _core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#a0ed84d057445e2acd4c793f10f91078">dev_if</a>;
<a name="l01053"></a>01053         uint32_t v;
<a name="l01054"></a>01054         <a class="code" href="uniondoepint__data.html">doepmsk_data_t</a> msk = {.d32 = 0 };
<a name="l01055"></a>01055 
<a name="l01056"></a>01056         <span class="keywordflow">if</span> (_core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#5675c8d8dd7df746fda9157dc39ba5c2">multiproc_int_enable</a>) {
<a name="l01057"></a>01057                 msk.<a class="code" href="uniondoepint__data.html#94f8c8fc116b430565f9322e3621b3a5">d32</a> =
<a name="l01058"></a>01058                     dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;
<a name="l01059"></a>01059                                    doepeachintmsk[_ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>]);
<a name="l01060"></a>01060                 <span class="keywordflow">if</span> (_core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#34540b79e9a14bfa234a52ac132c5cd1">pti_enh_enable</a>) {
<a name="l01061"></a>01061                         msk.<a class="code" href="uniondoepint__data.html#9e966d9f85589f278dc2c0d0c7833856">b</a>.<a class="code" href="uniondoepint__data.html#0c8fc4f5245a9874c0c3b61d1c6f719d">pktdrpsts</a> = 1;
<a name="l01062"></a>01062                 }
<a name="l01063"></a>01063                 v = dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#9cc0e6b18b00e44c5d4b46a8ff460384">out_ep_regs</a>[_ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>]-&gt;
<a name="l01064"></a>01064                                    doepint) &amp; msk.<a class="code" href="uniondoepint__data.html#94f8c8fc116b430565f9322e3621b3a5">d32</a>;
<a name="l01065"></a>01065         } <span class="keywordflow">else</span> {
<a name="l01066"></a>01066                 msk.<a class="code" href="uniondoepint__data.html#94f8c8fc116b430565f9322e3621b3a5">d32</a> = dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#e261921bab2e67ccc69007fc485d7f82">dev_global_regs</a>-&gt;<a class="code" href="structdwc__otg__dev__global__regs.html#d6947be9d84a1d87156f81a10ebb036b">doepmsk</a>);
<a name="l01067"></a>01067                 <span class="keywordflow">if</span> (_core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#34540b79e9a14bfa234a52ac132c5cd1">pti_enh_enable</a>) {
<a name="l01068"></a>01068                         msk.<a class="code" href="uniondoepint__data.html#9e966d9f85589f278dc2c0d0c7833856">b</a>.<a class="code" href="uniondoepint__data.html#0c8fc4f5245a9874c0c3b61d1c6f719d">pktdrpsts</a> = 1;
<a name="l01069"></a>01069                 }
<a name="l01070"></a>01070                 v = dwc_read_reg32(&amp;dev_if-&gt;<a class="code" href="structdwc__otg__dev__if.html#9cc0e6b18b00e44c5d4b46a8ff460384">out_ep_regs</a>[_ep-&gt;<a class="code" href="structdwc__ep.html#1dd76dafde9ac2a466d64a5acbc35214">num</a>]-&gt;
<a name="l01071"></a>01071                                    doepint) &amp; msk.<a class="code" href="uniondoepint__data.html#94f8c8fc116b430565f9322e3621b3a5">d32</a>;
<a name="l01072"></a>01072         }
<a name="l01073"></a>01073         <span class="keywordflow">return</span> v;
<a name="l01074"></a>01074 }
<a name="l01075"></a>01075 
<a name="l01079"></a><a class="code" href="dwc__otg__cil_8h.html#ddc68d442228b5b0600e7ee26c641700">01079</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#ddc68d442228b5b0600e7ee26c641700">dwc_otg_read_host_all_channels_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *
<a name="l01080"></a>01080                                                            _core_if)
<a name="l01081"></a>01081 {
<a name="l01082"></a>01082         <span class="keywordflow">return</span> (dwc_read_reg32(&amp;_core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#51bac71891b5f6f435d7fc4582b974c1">host_if</a>-&gt;<a class="code" href="structdwc__otg__host__if.html#ff9692c2e10ca2bc7e24f981f25179c2">host_global_regs</a>-&gt;<a class="code" href="structdwc__otg__host__global__regs.html#7c41808b0a69ed7d2125eb3afbbf6c14">haint</a>));
<a name="l01083"></a>01083 }
<a name="l01084"></a>01084 
<a name="l01085"></a><a class="code" href="dwc__otg__cil_8h.html#65dda5b1d8f94672a6123536574448c4">01085</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#65dda5b1d8f94672a6123536574448c4">dwc_otg_read_host_channel_intr</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *
<a name="l01086"></a>01086                                                       _core_if, <a class="code" href="structdwc__hc.html">dwc_hc_t</a> * _hc)
<a name="l01087"></a>01087 {
<a name="l01088"></a>01088         <span class="keywordflow">return</span> (dwc_read_reg32
<a name="l01089"></a>01089                 (&amp;_core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#51bac71891b5f6f435d7fc4582b974c1">host_if</a>-&gt;<a class="code" href="structdwc__otg__host__if.html#7f7c107d4720641eb4141cd817211ac0">hc_regs</a>[_hc-&gt;<a class="code" href="structdwc__hc.html#df0c2b93e5c84cfaba6f06eaeaece5a1">hc_num</a>]-&gt;hcint));
<a name="l01090"></a>01090 }
<a name="l01091"></a>01091 
<a name="l01097"></a><a class="code" href="dwc__otg__cil_8h.html#de0ac73b05fc306b04614f73b890a364">01097</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="dwc__otg__cil_8h.html#de0ac73b05fc306b04614f73b890a364">dwc_otg_mode</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if)
<a name="l01098"></a>01098 {
<a name="l01099"></a>01099         <span class="keywordflow">return</span> (dwc_read_reg32(&amp;_core_if-&gt;<a class="code" href="structdwc__otg__core__if.html#909eae7e3b9432ca1e278b99f7811f52">core_global_regs</a>-&gt;<a class="code" href="structdwc__otg__core__global__regs.html#aa1d909e3b0a60a56bf612968ff09019">gintsts</a>) &amp; 0x1);
<a name="l01100"></a>01100 }
<a name="l01101"></a>01101 
<a name="l01109"></a><a class="code" href="structdwc__otg__cil__callbacks.html">01109</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks</a> {
<a name="l01111"></a>01111         int (*start) (<span class="keywordtype">void</span> *_p);
<a name="l01113"></a>01113         int (*stop) (<span class="keywordtype">void</span> *_p);
<a name="l01115"></a>01115         int (*disconnect) (<span class="keywordtype">void</span> *_p);
<a name="l01117"></a>01117         int (*resume_wakeup) (<span class="keywordtype">void</span> *_p);
<a name="l01119"></a>01119         int (*suspend) (<span class="keywordtype">void</span> *_p);
<a name="l01121"></a>01121         int (*session_start) (<span class="keywordtype">void</span> *_p);
<a name="l01122"></a>01122 <span class="preprocessor">#ifdef CONFIG_USB_DWC_OTG_LPM</span>
<a name="l01123"></a>01123 <span class="preprocessor"></span>
<a name="l01124"></a>01124         int (*sleep) (<span class="keywordtype">void</span> *_p);
<a name="l01125"></a>01125 <span class="preprocessor">#endif</span>
<a name="l01126"></a>01126 <span class="preprocessor"></span>
<a name="l01127"></a><a class="code" href="structdwc__otg__cil__callbacks.html#a486473d73fb104dc3a37e963a8ef8e5">01127</a>         <span class="keywordtype">void</span> *p;
<a name="l01128"></a>01128 } <a class="code" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks_t</a>;
<a name="l01129"></a>01129 
<a name="l01130"></a>01130 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#d2a92003214f444d7ec35dd0c4bb4bc0">dwc_otg_cil_register_pcd_callbacks</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l01131"></a>01131                                                <a class="code" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks_t</a> * _cb,
<a name="l01132"></a>01132                                                <span class="keywordtype">void</span> *_p);
<a name="l01133"></a>01133 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__cil_8c.html#97c9b9d68211477e486848203def0d0f">dwc_otg_cil_register_hcd_callbacks</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * _core_if,
<a name="l01134"></a>01134                                                <a class="code" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks_t</a> * _cb,
<a name="l01135"></a>01135                                                <span class="keywordtype">void</span> *_p);
<a name="l01136"></a>01136 
<a name="l01137"></a>01137 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:48 2009 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
