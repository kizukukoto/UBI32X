<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_hcd.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dwc_otg_hcd.h File Reference</h1>This file contains the structures, constants, and interfaces for the Host Contoller Driver (HCD). <a href="#_details">More...</a>
<p>
<code>#include &lt;usb.h&gt;</code><br>
<code>#include &quot;<a class="el" href="dwc__otg__hcd__if_8h-source.html">dwc_otg_hcd_if.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="dwc__otg__core__if_8h-source.html">dwc_otg_core_if.h</a>&quot;</code><br>
<code>#include &quot;dwc_list.h&quot;</code><br>
<code>#include &quot;<a class="el" href="dwc__otg__cil_8h-source.html">dwc_otg_cil.h</a>&quot;</code><br>

<p>
<a href="dwc__otg__hcd_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdwc__otg__hcd__iso__packet__desc.html">dwc_otg_hcd_iso_packet_desc</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A Queue Transfer Descriptor (QTD) holds the state of a bulk, control, interrupt, or isochronous transfer.  <a href="structdwc__otg__qtd.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A Queue Head (QH) holds the static characteristics of an endpoint and maintains a list of transfers (QTDs) for that endpoint.  <a href="structdwc__otg__qh.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This structure holds the state of the HCD, including the non-periodic and periodic schedules.  <a href="structdwc__otg__hcd.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html">dwc_otg_hcd::dwc_otg_hcd_internal_flags</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal DWC HCD Flags.  <a href="uniondwc__otg__hcd_1_1dwc__otg__hcd__internal__flags.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Transaction Execution Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#96cc299f4f0478187ed7ba49b975ffc3">dwc_otg_hcd_select_transactions</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function selects transactions from the HCD transfer schedule and assigns them to available host channels.  <a href="#96cc299f4f0478187ed7ba49b975ffc3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#2f57bf2fc3013d63101f112702b913a0">dwc_otg_hcd_queue_transactions</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a> tr_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function processes the currently active host channels and queues transactions for these channels to the DWC_otg controller.  <a href="#2f57bf2fc3013d63101f112702b913a0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Interrupt Handler Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#b9dde24773f2741b9ff67e2d46760dc0">dwc_otg_hcd_handle_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles interrupts for the HCD.  <a href="#b9dde24773f2741b9ff67e2d46760dc0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#0eea8527657802e9cf0a62a00bd44a1d">dwc_otg_hcd_handle_sof_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles the start-of-frame interrupt in host mode.  <a href="#0eea8527657802e9cf0a62a00bd44a1d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#9d979e33e04fc694a72242dec63aeb89">dwc_otg_hcd_handle_rx_status_q_level_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles the Rx Status Queue Level Interrupt, which indicates that there is at least one packet in the Rx FIFO.  <a href="#9d979e33e04fc694a72242dec63aeb89"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#51c953aefbc2382adee9f585fdb26f35">dwc_otg_hcd_handle_np_tx_fifo_empty_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt occurs when the non-periodic Tx FIFO is half-empty.  <a href="#51c953aefbc2382adee9f585fdb26f35"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#dcfa21f80c7732df9aaf3db59a86eb1d">dwc_otg_hcd_handle_perio_tx_fifo_empty_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt occurs when the periodic Tx FIFO is half-empty.  <a href="#dcfa21f80c7732df9aaf3db59a86eb1d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="153ffb1f85a83625614dac76886a1e07"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_incomplete_periodic_intr" ref="153ffb1f85a83625614dac76886a1e07" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_otg_hcd_handle_incomplete_periodic_intr</b> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#18bb807c86935a45f5fe5940e5ded70c">dwc_otg_hcd_handle_port_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">There are multiple conditions that can cause a port interrupt.  <a href="#18bb807c86935a45f5fe5940e5ded70c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="720154a1193b6668bbc2f2df5e6b9f27"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_conn_id_status_change_intr" ref="720154a1193b6668bbc2f2df5e6b9f27" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_otg_hcd_handle_conn_id_status_change_intr</b> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="02c77bd38ea59ba2a786392df4ecb5b8"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_disconnect_intr" ref="02c77bd38ea59ba2a786392df4ecb5b8" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_otg_hcd_handle_disconnect_intr</b> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#1f28e296c0bc4146da309385d95b5d7e">dwc_otg_hcd_handle_hc_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that one or more host channels has a pending interrupt.  <a href="#1f28e296c0bc4146da309385d95b5d7e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="019c9cc38ec85275a7ef0b0d38bf53ab"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_hc_n_intr" ref="019c9cc38ec85275a7ef0b0d38bf53ab" args="(dwc_otg_hcd_t *dwc_otg_hcd, uint32_t num)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#019c9cc38ec85275a7ef0b0d38bf53ab">dwc_otg_hcd_handle_hc_n_intr</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>, uint32_t num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles interrupt for a specific Host Channel. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="93406a45cbba24014f85e2b7074f07d2"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_session_req_intr" ref="93406a45cbba24014f85e2b7074f07d2" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_otg_hcd_handle_session_req_intr</b> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9781fc0cab04bd26af3016d8094ef760"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_wakeup_detected_intr" ref="9781fc0cab04bd26af3016d8094ef760" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_otg_hcd_handle_wakeup_detected_intr</b> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>)</td></tr>

<tr><td colspan="2"><br><h2>Schedule Queue Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#187194b7a9f28e7f7a09ac3e345c7253">dwc_otg_hcd_qh_create</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *urb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function allocates and initializes a QH.  <a href="#187194b7a9f28e7f7a09ac3e345c7253"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#1ac731c0691ac3851edddc558fae79e0">dwc_otg_hcd_qh_free</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free each QTD in the QH's QTD-list then free the QH.  <a href="#1ac731c0691ac3851edddc558fae79e0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#75cad4c6010d88086ddedf739db55d6b">dwc_otg_hcd_qh_add</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function adds a QH to either the non periodic or periodic schedule if it is not already in the schedule.  <a href="#75cad4c6010d88086ddedf739db55d6b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#506b89b01ee7692885daff1c17c894f8">dwc_otg_hcd_qh_remove</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes a QH from either the non-periodic or periodic schedule.  <a href="#506b89b01ee7692885daff1c17c894f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#f88bc5b6beb674c909d1c09a819ba9d9">dwc_otg_hcd_qh_deactivate</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh, int sched_csplit)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deactivates a QH.  <a href="#f88bc5b6beb674c909d1c09a819ba9d9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="64eb3490186ebd94fd8204d74c089a51"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_remove_and_free" ref="64eb3490186ebd94fd8204d74c089a51" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#64eb3490186ebd94fd8204d74c089a51">dwc_otg_hcd_qh_remove_and_free</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove and free a QH. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#3252be9fc489fbaa293b2404642caab0">dwc_otg_hcd_qh_alloc</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocates memory for a QH structure.  <a href="#3252be9fc489fbaa293b2404642caab0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#5c4da8822ae027f70eda33cb783644fc">dwc_otg_hcd_qtd_create</a> (<a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *urb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function allocates and initializes a QTD.  <a href="#5c4da8822ae027f70eda33cb783644fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#9ebb534f604aa8f693da162f32cf1ba4">dwc_otg_hcd_qtd_init</a> (<a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *qtd, <a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *urb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a QTD structure.  <a href="#9ebb534f604aa8f693da162f32cf1ba4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#748ba77769387bfe4295cb10265053f0">dwc_otg_hcd_qtd_add</a> (<a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *qtd, <a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> **qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function adds a QTD to the QTD-list of a QH.  <a href="#748ba77769387bfe4295cb10265053f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#ad58f04f541929d521f9acde9e465577">dwc_otg_hcd_qtd_alloc</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocates memory for a QTD structure.  <a href="#ad58f04f541929d521f9acde9e465577"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#34434d836361462c04fb45ba9ab89fb9">dwc_otg_hcd_qtd_free</a> (<a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *qtd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Frees the memory for a QTD structure.  <a href="#34434d836361462c04fb45ba9ab89fb9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#2a721977443fb6bd453fbc2e8ae5355d">dwc_otg_hcd_qtd_remove</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *qtd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes a QTD from list.  <a href="#2a721977443fb6bd453fbc2e8ae5355d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="19adb6641f95448a956015b2d69ba96a"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qtd_remove_and_free" ref="19adb6641f95448a956015b2d69ba96a" args="(dwc_otg_hcd_t *hcd, dwc_otg_qtd_t *qtd, dwc_otg_qh_t *qh)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#19adb6641f95448a956015b2d69ba96a">dwc_otg_hcd_qtd_remove_and_free</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *qtd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove and free a QTD. <br></td></tr>
<tr><td colspan="2"><br><h2>Descriptor DMA Supporting Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#9b051bad5e81a6b6d74b817c741bfaf3">dwc_otg_hcd_start_xfer_ddma</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For Control and Bulk endpoints initializes descriptor list and starts the transfer.  <a href="#9b051bad5e81a6b6d74b817c741bfaf3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#ca94cde3142ff1121bb0ff9bd44fa762">dwc_otg_hcd_complete_xfer_ddma</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__hc.html">dwc_hc_t</a> *hc, <a class="el" href="structdwc__otg__hc__regs.html">dwc_otg_hc_regs_t</a> *hc_regs, dwc_otg_halt_status_e halt_status)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called from interrupt handlers.  <a href="#ca94cde3142ff1121bb0ff9bd44fa762"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#1c5498d173c5461865a5042789927ed1">dwc_otg_hcd_qh_init_ddma</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a QH structure's Descriptor DMA related members.  <a href="#1c5498d173c5461865a5042789927ed1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#78738afd0ca62e394753f1cf196476c9">dwc_otg_hcd_qh_free_ddma</a> (<a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *hcd, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *qh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Frees descriptor list memory associated with the QH.  <a href="#78738afd0ca62e394753f1cf196476c9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Internal Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="041e0339d432cb37501a9dfde9ea6701"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_urb_to_qh" ref="041e0339d432cb37501a9dfde9ea6701" args="(dwc_otg_hcd_urb_t *urb)" -->
<a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_urb_to_qh</b> (<a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *urb)</td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d8ae8e24a91bb0b076390e96a8abee18"></a><!-- doxytag: member="dwc_otg_hcd.h::DWC_OTG_HCD_STATUS_BUF_SIZE" ref="d8ae8e24a91bb0b076390e96a8abee18" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#d8ae8e24a91bb0b076390e96a8abee18">DWC_OTG_HCD_STATUS_BUF_SIZE</a>&nbsp;&nbsp;&nbsp;64</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3b2ecfb8dfc0ef59a71aee04313b3a61"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_list_to_qh" ref="3b2ecfb8dfc0ef59a71aee04313b3a61" args="(_list_head_ptr_)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#3b2ecfb8dfc0ef59a71aee04313b3a61">dwc_list_to_qh</a>(_list_head_ptr_)&nbsp;&nbsp;&nbsp;container_of(_list_head_ptr_, <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a>, qh_list_entry)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the QH that contains the list_head. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1cd61c91155aa665057d471f8a020485"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_list_to_qtd" ref="1cd61c91155aa665057d471f8a020485" args="(_list_head_ptr_)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#1cd61c91155aa665057d471f8a020485">dwc_list_to_qtd</a>(_list_head_ptr_)&nbsp;&nbsp;&nbsp;container_of(_list_head_ptr_, <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a>, qtd_list_entry)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the QTD that contains the list_head. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#4621f3eac09a9fc1363d286bff2de06b">dwc_qh_is_non_per</a>(_qh_ptr_)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if QH is non-periodic.  <a href="#4621f3eac09a9fc1363d286bff2de06b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a371dfcb8a66214c8fe226190fc1a323"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_hb_mult" ref="a371dfcb8a66214c8fe226190fc1a323" args="(wMaxPacketSize)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#a371dfcb8a66214c8fe226190fc1a323">dwc_hb_mult</a>(wMaxPacketSize)&nbsp;&nbsp;&nbsp;(1 + (((wMaxPacketSize) &gt;&gt; 11) &amp; 0x03))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">High bandwidth multiplier as encoded in highspeed endpoint descriptors. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bd2189f881088fe7f4ca9112ee24549b"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_max_packet" ref="bd2189f881088fe7f4ca9112ee24549b" args="(wMaxPacketSize)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#bd2189f881088fe7f4ca9112ee24549b">dwc_max_packet</a>(wMaxPacketSize)&nbsp;&nbsp;&nbsp;((wMaxPacketSize) &amp; 0x07ff)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Packet size for any kind of endpoint descriptor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7bdda6719cefc42f2302c5c34084ba69"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_sample_frrem" ref="7bdda6719cefc42f2302c5c34084ba69" args="(_hcd, _qh, _letter)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#7bdda6719cefc42f2302c5c34084ba69">dwc_sample_frrem</a>(_hcd, _qh, _letter)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="be7c5653ee5e9d33855d2513f31b56a5"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_control_phase_e" ref="be7c5653ee5e9d33855d2513f31b56a5" args="" -->
typedef enum <a class="el" href="dwc__otg__hcd_8h.html#4ec934997af9e24c8eede108d399c140">dwc_otg_control_phase</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#be7c5653ee5e9d33855d2513f31b56a5">dwc_otg_control_phase_e</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Phases for control transfers. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="92c49783eebc5bcffa8b8a51c2127be9"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_transaction_type_e" ref="92c49783eebc5bcffa8b8a51c2127be9" args="" -->
typedef enum <a class="el" href="dwc__otg__hcd_8h.html#0ab043da15526ddcd3f3698505d52d83">dwc_otg_transaction_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transaction types. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#05542225d8dd075a2b981fa565bdfccc">dwc_otg_qtd_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A Queue Transfer Descriptor (QTD) holds the state of a bulk, control, interrupt, or isochronous transfer.  <a href="#05542225d8dd075a2b981fa565bdfccc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#7d1300eb1d7683e646af1094fe418c0b">dwc_otg_qh_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A Queue Head (QH) holds the static characteristics of an endpoint and maintains a list of transfers (QTDs) for that endpoint.  <a href="#7d1300eb1d7683e646af1094fe418c0b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#4ec934997af9e24c8eede108d399c140">dwc_otg_control_phase</a> { <b>DWC_OTG_CONTROL_SETUP</b>, 
<b>DWC_OTG_CONTROL_DATA</b>, 
<b>DWC_OTG_CONTROL_STATUS</b>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Phases for control transfers. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#0ab043da15526ddcd3f3698505d52d83">dwc_otg_transaction_type</a> { <b>DWC_OTG_TRANSACTION_NONE</b>, 
<b>DWC_OTG_TRANSACTION_PERIODIC</b>, 
<b>DWC_OTG_TRANSACTION_NON_PERIODIC</b>, 
<b>DWC_OTG_TRANSACTION_ALL</b>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transaction types. <br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="367b79057f321cfa65023f4026d6c2c9"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_get_ep_num" ref="367b79057f321cfa65023f4026d6c2c9" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#367b79057f321cfa65023f4026d6c2c9">dwc_otg_hcd_get_ep_num</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b97cea598797e69d011ffef89989a739"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_get_pipe_type" ref="b97cea598797e69d011ffef89989a739" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#b97cea598797e69d011ffef89989a739">dwc_otg_hcd_get_pipe_type</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e47df3e0ac1c8ccc916e0c0895568c88"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_get_mps" ref="e47df3e0ac1c8ccc916e0c0895568c88" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#e47df3e0ac1c8ccc916e0c0895568c88">dwc_otg_hcd_get_mps</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0de365358ba4472d56c1ac8074ba926b"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_get_dev_addr" ref="0de365358ba4472d56c1ac8074ba926b" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#0de365358ba4472d56c1ac8074ba926b">dwc_otg_hcd_get_dev_addr</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3ae411bce062f6929961046492c96330"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_is_pipe_isoc" ref="3ae411bce062f6929961046492c96330" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#3ae411bce062f6929961046492c96330">dwc_otg_hcd_is_pipe_isoc</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9bd15e815decf74a7033c11e57d98bde"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_is_pipe_int" ref="9bd15e815decf74a7033c11e57d98bde" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#9bd15e815decf74a7033c11e57d98bde">dwc_otg_hcd_is_pipe_int</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7e0a4084d0444c4375dd60250b860ad8"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_is_pipe_bulk" ref="7e0a4084d0444c4375dd60250b860ad8" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#7e0a4084d0444c4375dd60250b860ad8">dwc_otg_hcd_is_pipe_bulk</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d40e602eb8b015dc3908a23d2f8fbb7a"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_is_pipe_control" ref="d40e602eb8b015dc3908a23d2f8fbb7a" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#d40e602eb8b015dc3908a23d2f8fbb7a">dwc_otg_hcd_is_pipe_control</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="68de5629a8b45d9bec58f680fa4c820c"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_is_pipe_in" ref="68de5629a8b45d9bec58f680fa4c820c" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#68de5629a8b45d9bec58f680fa4c820c">dwc_otg_hcd_is_pipe_in</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cf3e5e59a22ef6bd497e05710e39cad0"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_is_pipe_out" ref="cf3e5e59a22ef6bd497e05710e39cad0" args="(struct dwc_otg_hcd_pipe_info *pipe)" -->
static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#cf3e5e59a22ef6bd497e05710e39cad0">dwc_otg_hcd_is_pipe_out</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4806306754f0414ad9cee3067cdda8c9"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_fill_pipe" ref="4806306754f0414ad9cee3067cdda8c9" args="(struct dwc_otg_hcd_pipe_info *pipe, uint8_t devaddr, uint8_t ep_num, uint8_t pipe_type, uint8_t pipe_dir, uint16_t mps)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#4806306754f0414ad9cee3067cdda8c9">dwc_otg_hcd_fill_pipe</a> (struct <a class="el" href="structdwc__otg__hcd__pipe__info.html">dwc_otg_hcd_pipe_info</a> *pipe, uint8_t devaddr, uint8_t ep_num, uint8_t pipe_type, uint8_t pipe_dir, uint16_t mps)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ec4587fa46d9a511753a19d686721596"></a><!-- doxytag: member="dwc_otg_hcd.h::DWC_CIRCLEQ_HEAD" ref="ec4587fa46d9a511753a19d686721596" args="(dwc_otg_qtd_list, dwc_otg_qtd)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>DWC_CIRCLEQ_HEAD</b> (dwc_otg_qtd_list, <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="178f3f9a015344c0560140b5f5b8b83a"></a><!-- doxytag: member="dwc_otg_hcd.h::DWC_CIRCLEQ_HEAD" ref="178f3f9a015344c0560140b5f5b8b83a" args="(hc_list, dwc_hc)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>DWC_CIRCLEQ_HEAD</b> (hc_list, <a class="el" href="structdwc__hc.html">dwc_hc</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#02aa5e9853fcc705b9b5c839a249e2f8">dwc_frame_num_le</a> (uint16_t frame1, uint16_t frame2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if _frame1 is less than or equal to _frame2.  <a href="#02aa5e9853fcc705b9b5c839a249e2f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#98e0d4310430b84fa660ab5f6e7c24b9">dwc_frame_num_gt</a> (uint16_t frame1, uint16_t frame2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if _frame1 is greater than _frame2.  <a href="#98e0d4310430b84fa660ab5f6e7c24b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#cb175759a6b2cd291eedc276c022b500">dwc_frame_num_inc</a> (uint16_t frame, uint16_t inc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Increments _frame by the amount specified by _inc.  <a href="#cb175759a6b2cd291eedc276c022b500"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d6248403619d099d04320cb1b7c7ee99"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_full_frame_num" ref="d6248403619d099d04320cb1b7c7ee99" args="(uint16_t frame)" -->
static uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#d6248403619d099d04320cb1b7c7ee99">dwc_full_frame_num</a> (uint16_t frame)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="62ca1eeef0a58428b2a105092290c0a4"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_micro_frame_num" ref="62ca1eeef0a58428b2a105092290c0a4" args="(uint16_t frame)" -->
static uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#62ca1eeef0a58428b2a105092290c0a4">dwc_micro_frame_num</a> (uint16_t frame)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8bce109004d7869bfdd9aa1075c6bd2c"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_save_data_toggle" ref="8bce109004d7869bfdd9aa1075c6bd2c" args="(dwc_hc_t *hc, dwc_otg_hc_regs_t *hc_regs, dwc_otg_qtd_t *qtd)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__hcd_8h.html#8bce109004d7869bfdd9aa1075c6bd2c">dwc_otg_hcd_save_data_toggle</a> (<a class="el" href="structdwc__hc.html">dwc_hc_t</a> *hc, <a class="el" href="structdwc__otg__hc__regs.html">dwc_otg_hc_regs_t</a> *hc_regs, <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *qtd)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the structures, constants, and interfaces for the Host Contoller Driver (HCD). 
<p>
The Host Controller Driver (HCD) is responsible for translating requests from the USB Driver into the appropriate actions on the DWC_otg controller. It isolates the USBD from the specifics of the controller by providing an API to the USBD. 
<p>
Definition in file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="4621f3eac09a9fc1363d286bff2de06b"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_qh_is_non_per" ref="4621f3eac09a9fc1363d286bff2de06b" args="(_qh_ptr_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dwc_qh_is_non_per          </td>
          <td>(</td>
          <td class="paramtype">_qh_ptr_&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((_qh_ptr_-&gt;ep_type == UE_BULK) || \
                                     (_qh_ptr_-&gt;ep_type == UE_CONTROL))
</pre></div>Check if QH is non-periodic. 
<p>

<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00694">694</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="05542225d8dd075a2b981fa565bdfccc"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_qtd_t" ref="05542225d8dd075a2b981fa565bdfccc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd</a>  <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A Queue Transfer Descriptor (QTD) holds the state of a bulk, control, interrupt, or isochronous transfer. 
<p>
A single QTD is created for each URB (of one of these types) submitted to the HCD. The transfer associated with a QTD may require one or multiple transactions.<p>
A QTD is linked to a Queue Head, which is entered in either the non-periodic or periodic schedule for execution. When a QTD is chosen for execution, some or all of its transactions may be executed. After execution, the state of the QTD is updated. The QTD may be retired if all its transactions are complete or if an error occurred. Otherwise, it remains in the schedule so more transactions can be executed later. 
</div>
</div><p>
<a class="anchor" name="7d1300eb1d7683e646af1094fe418c0b"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_qh_t" ref="7d1300eb1d7683e646af1094fe418c0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh</a>  <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A Queue Head (QH) holds the static characteristics of an endpoint and maintains a list of transfers (QTDs) for that endpoint. 
<p>
A QH structure may be entered in either the non-periodic or periodic schedule. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="96cc299f4f0478187ed7ba49b975ffc3"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_select_transactions" ref="96cc299f4f0478187ed7ba49b975ffc3" args="(dwc_otg_hcd_t *hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a> dwc_otg_hcd_select_transactions           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function selects transactions from the HCD transfer schedule and assigns them to available host channels. 
<p>
It is called from HCD interrupt handler functions.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The types of new transactions that were assigned to host channels. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd_8c-source.html#l01055">1055</a> of file <a class="el" href="dwc__otg__hcd_8c-source.html">dwc_otg_hcd.c</a>.
</div>
</div><p>
<a class="anchor" name="2f57bf2fc3013d63101f112702b913a0"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_queue_transactions" ref="2f57bf2fc3013d63101f112702b913a0" args="(dwc_otg_hcd_t *hcd, dwc_otg_transaction_type_e tr_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_queue_transactions           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dwc__otg__hcd_8h.html#92c49783eebc5bcffa8b8a51c2127be9">dwc_otg_transaction_type_e</a>&nbsp;</td>
          <td class="paramname"> <em>tr_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function processes the currently active host channels and queues transactions for these channels to the DWC_otg controller. 
<p>
It is called from HCD interrupt handler functions.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tr_type</em>&nbsp;</td><td>The type(s) of transactions to queue (non-periodic, periodic, or both). </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd_8c-source.html#l01426">1426</a> of file <a class="el" href="dwc__otg__hcd_8c-source.html">dwc_otg_hcd.c</a>.
</div>
</div><p>
<a class="anchor" name="b9dde24773f2741b9ff67e2d46760dc0"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_intr" ref="b9dde24773f2741b9ff67e2d46760dc0" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_hcd_handle_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_otg_hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function handles interrupts for the HCD. 
<p>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000016">Todo:</a></b></dt><dd>Implement i2cintr handler. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__intr_8c-source.html#l00043">43</a> of file <a class="el" href="dwc__otg__hcd__intr_8c-source.html">dwc_otg_hcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="0eea8527657802e9cf0a62a00bd44a1d"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_sof_intr" ref="0eea8527657802e9cf0a62a00bd44a1d" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_hcd_handle_sof_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles the start-of-frame interrupt in host mode. 
<p>
Non-periodic transactions may be queued to the DWC_otg controller for the current (micro)frame. Periodic transactions may be queued to the controller for the next (micro)frame. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__intr_8c-source.html#l00169">169</a> of file <a class="el" href="dwc__otg__hcd__intr_8c-source.html">dwc_otg_hcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="9d979e33e04fc694a72242dec63aeb89"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_rx_status_q_level_intr" ref="9d979e33e04fc694a72242dec63aeb89" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_hcd_handle_rx_status_q_level_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_otg_hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles the Rx Status Queue Level Interrupt, which indicates that there is at least one packet in the Rx FIFO. 
<p>
The packets are moved from the FIFO to memory if the DWC_otg controller is operating in Slave mode. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__intr_8c-source.html#l00222">222</a> of file <a class="el" href="dwc__otg__hcd__intr_8c-source.html">dwc_otg_hcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="51c953aefbc2382adee9f585fdb26f35"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_np_tx_fifo_empty_intr" ref="51c953aefbc2382adee9f585fdb26f35" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_hcd_handle_np_tx_fifo_empty_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_otg_hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt occurs when the non-periodic Tx FIFO is half-empty. 
<p>
More data packets may be written to the FIFO for OUT transfers. More requests may be written to the non-periodic request queue for IN transfers. This interrupt is enabled only in Slave mode. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__intr_8c-source.html#l00271">271</a> of file <a class="el" href="dwc__otg__hcd__intr_8c-source.html">dwc_otg_hcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="dcfa21f80c7732df9aaf3db59a86eb1d"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_perio_tx_fifo_empty_intr" ref="dcfa21f80c7732df9aaf3db59a86eb1d" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_hcd_handle_perio_tx_fifo_empty_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_otg_hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt occurs when the periodic Tx FIFO is half-empty. 
<p>
More data packets may be written to the FIFO for OUT transfers. More requests may be written to the periodic request queue for IN transfers. This interrupt is enabled only in Slave mode. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__intr_8c-source.html#l00283">283</a> of file <a class="el" href="dwc__otg__hcd__intr_8c-source.html">dwc_otg_hcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="18bb807c86935a45f5fe5940e5ded70c"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_port_intr" ref="18bb807c86935a45f5fe5940e5ded70c" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_hcd_handle_port_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_otg_hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
There are multiple conditions that can cause a port interrupt. 
<p>
This function determines which interrupt conditions have occurred and handles them appropriately. 
<p>
Overcurrent Change Interrupt 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__intr_8c-source.html#l00294">294</a> of file <a class="el" href="dwc__otg__hcd__intr_8c-source.html">dwc_otg_hcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="1f28e296c0bc4146da309385d95b5d7e"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_handle_hc_intr" ref="1f28e296c0bc4146da309385d95b5d7e" args="(dwc_otg_hcd_t *dwc_otg_hcd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dwc_otg_hcd_handle_hc_intr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dwc_otg_hcd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This interrupt indicates that one or more host channels has a pending interrupt. 
<p>
There are multiple conditions that can cause each host channel interrupt. This function determines which conditions have occurred for each host channel interrupt and handles them appropriately. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__intr_8c-source.html#l00453">453</a> of file <a class="el" href="dwc__otg__hcd__intr_8c-source.html">dwc_otg_hcd_intr.c</a>.
</div>
</div><p>
<a class="anchor" name="187194b7a9f28e7f7a09ac3e345c7253"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_create" ref="187194b7a9f28e7f7a09ac3e345c7253" args="(dwc_otg_hcd_t *hcd, dwc_otg_hcd_urb_t *urb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a>* dwc_otg_hcd_qh_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *&nbsp;</td>
          <td class="paramname"> <em>urb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function allocates and initializes a QH. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure for the DWC OTG controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>urb</em>&nbsp;</td><td>Holds the information about the device/endpoint that we need to initialize the QH.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Returns pointer to the newly allocated QH, or NULL on error. </dd></dl>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000020">Todo:</a></b></dt><dd>add memflags argument </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00296">296</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="1ac731c0691ac3851edddc558fae79e0"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_free" ref="1ac731c0691ac3851edddc558fae79e0" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_qh_free           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free each QTD in the QH's QTD-list then free the QH. 
<p>
QH should already be removed from a list. QTD list should already be empty if called from URB Dequeue.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>HCD instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qh</em>&nbsp;</td><td>The QH to free. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00053">53</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="75cad4c6010d88086ddedf739db55d6b"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_add" ref="75cad4c6010d88086ddedf739db55d6b" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dwc_otg_hcd_qh_add           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function adds a QH to either the non periodic or periodic schedule if it is not already in the schedule. 
<p>
If the QH is already in the schedule, no action is taken.<p>
<dl compact><dt><b>Returns:</b></dt><dd>0 if successful, negative error code otherwise. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00472">472</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="506b89b01ee7692885daff1c17c894f8"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_remove" ref="506b89b01ee7692885daff1c17c894f8" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_qh_remove           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a QH from either the non-periodic or periodic schedule. 
<p>
Memory is not freed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qh</em>&nbsp;</td><td>QH to remove from schedule. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00522">522</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="f88bc5b6beb674c909d1c09a819ba9d9"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_deactivate" ref="f88bc5b6beb674c909d1c09a819ba9d9" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh, int sched_csplit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_qh_deactivate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sched_next_periodic_split</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deactivates a QH. 
<p>
For non-periodic QHs, removes the QH from the active non-periodic schedule. The QH is added to the inactive non-periodic schedule if any QTDs are still attached to the QH.<p>
For periodic QHs, the QH is removed from the periodic queued schedule. If there are any QTDs still attached to the QH, the QH is added to either the periodic inactive schedule or the periodic ready schedule and its next scheduled frame is calculated. The QH is placed in the ready schedule if the scheduled frame has been reached already. Otherwise it's placed in the inactive schedule. If there are no QTDs attached to the QH, the QH is completely removed from the periodic schedule. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00559">559</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="3252be9fc489fbaa293b2404642caab0"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_alloc" ref="3252be9fc489fbaa293b2404642caab0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a>* dwc_otg_hcd_qh_alloc           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allocates memory for a QH structure. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>Returns the memory allocate or NULL on error. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00611">611</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<a class="anchor" name="5c4da8822ae027f70eda33cb783644fc"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qtd_create" ref="5c4da8822ae027f70eda33cb783644fc" args="(dwc_otg_hcd_urb_t *urb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a>* dwc_otg_hcd_qtd_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *&nbsp;</td>
          <td class="paramname"> <em>urb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function allocates and initializes a QTD. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>urb</em>&nbsp;</td><td>The URB to create a QTD from. Each URB-QTD pair will end up pointing to each other so each pair should have a unique correlation.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Returns pointer to the newly allocated QTD, or NULL on error. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00643">643</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="9ebb534f604aa8f693da162f32cf1ba4"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qtd_init" ref="9ebb534f604aa8f693da162f32cf1ba4" args="(dwc_otg_qtd_t *qtd, dwc_otg_hcd_urb_t *urb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_qtd_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qtd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd__urb.html">dwc_otg_hcd_urb_t</a> *&nbsp;</td>
          <td class="paramname"> <em>urb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes a QTD structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>qtd</em>&nbsp;</td><td>The QTD to initialize. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>urb</em>&nbsp;</td><td>The URB to use for initialization. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00661">661</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="748ba77769387bfe4295cb10265053f0"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qtd_add" ref="748ba77769387bfe4295cb10265053f0" args="(dwc_otg_qtd_t *qtd, dwc_otg_hcd_t *dwc_otg_hcd, dwc_otg_qh_t **qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dwc_otg_hcd_qtd_add           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qtd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> **&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function adds a QTD to the QTD-list of a QH. 
<p>
It will find the correct QH to place the QTD into. If it does not find a QH, then it will create a new QH. If the QH to which the QTD is added is not currently scheduled, it is placed into the proper schedule based on its EP type.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>qtd</em>&nbsp;</td><td>The QTD to add </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hcd</em>&nbsp;</td><td>The DWC HCD structure </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>qh</em>&nbsp;</td><td>out parameter to return queue head</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if successful, negative error code otherwise. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__queue_8c-source.html#l00698">698</a> of file <a class="el" href="dwc__otg__hcd__queue_8c-source.html">dwc_otg_hcd_queue.c</a>.
</div>
</div><p>
<a class="anchor" name="ad58f04f541929d521f9acde9e465577"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qtd_alloc" ref="ad58f04f541929d521f9acde9e465577" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a>* dwc_otg_hcd_qtd_alloc           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allocates memory for a QTD structure. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>Returns the memory allocate or NULL on error. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00623">623</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<a class="anchor" name="34434d836361462c04fb45ba9ab89fb9"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qtd_free" ref="34434d836361462c04fb45ba9ab89fb9" args="(dwc_otg_qtd_t *qtd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dwc_otg_hcd_qtd_free           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qtd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Frees the memory for a QTD structure. 
<p>
QTD should already be removed from list. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>qtd</em>&nbsp;</td><td>QTD to free. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00631">631</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<a class="anchor" name="2a721977443fb6bd453fbc2e8ae5355d"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qtd_remove" ref="2a721977443fb6bd453fbc2e8ae5355d" args="(dwc_otg_hcd_t *hcd, dwc_otg_qtd_t *qtd, dwc_otg_qh_t *qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dwc_otg_hcd_qtd_remove           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qtd.html">dwc_otg_qtd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qtd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a QTD from list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>HCD instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qtd</em>&nbsp;</td><td>QTD to remove from list. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qh</em>&nbsp;</td><td>QTD belongs to. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00641">641</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<a class="anchor" name="9b051bad5e81a6b6d74b817c741bfaf3"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_start_xfer_ddma" ref="9b051bad5e81a6b6d74b817c741bfaf3" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_start_xfer_ddma           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
For Control and Bulk endpoints initializes descriptor list and starts the transfer. 
<p>
For Interrupt and Isochronous endpoints initializes descriptor list then updates FrameList, marking appropriate entries as active. In case of Isochronous, the starting descriptor index is calculated based on the scheduled frame, but only on the first transfer descriptor within a session. Then starts the transfer via enabling the channel. For Isochronous endpoint the channel is not halted on XferComplete interrupt so remains assigned to the endpoint(QH) until session is done.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure for the DWC OTG controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qh</em>&nbsp;</td><td>The QH to init.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if successful, negative error code otherwise. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__ddma_8c-source.html#l00675">675</a> of file <a class="el" href="dwc__otg__hcd__ddma_8c-source.html">dwc_otg_hcd_ddma.c</a>.
</div>
</div><p>
<a class="anchor" name="ca94cde3142ff1121bb0ff9bd44fa762"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_complete_xfer_ddma" ref="ca94cde3142ff1121bb0ff9bd44fa762" args="(dwc_otg_hcd_t *hcd, dwc_hc_t *hc, dwc_otg_hc_regs_t *hc_regs, dwc_otg_halt_status_e halt_status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_complete_xfer_ddma           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__hc.html">dwc_hc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hc__regs.html">dwc_otg_hc_regs_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hc_regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dwc_otg_halt_status_e&nbsp;</td>
          <td class="paramname"> <em>halt_status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called from interrupt handlers. 
<p>
Scans the descriptor list, updates URB's status and calls completion routine for the URB if it's done. Releases the channel to be used by other transfers. In case of Isochronous endpoint the channel is not halted until the end of the session, i.e. QTD list is empty. If periodic channel released the FrameList is updated accordingly.<p>
Calls transaction selection routines to activate pending transfers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure for the DWC OTG controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hc</em>&nbsp;</td><td>Host channel, the transfer is completed on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hc_regs</em>&nbsp;</td><td>Host channel registers. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>halt_status</em>&nbsp;</td><td>Reason the channel is being halted, or just XferComplete for isochronous transfer </td></tr>
  </table>
</dl>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000015">Todo:</a></b></dt><dd>Consider the case when period exceeds FrameList size. Frame Rollover interrupt should be used. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__ddma_8c-source.html#l01042">1042</a> of file <a class="el" href="dwc__otg__hcd__ddma_8c-source.html">dwc_otg_hcd_ddma.c</a>.
</div>
</div><p>
<a class="anchor" name="1c5498d173c5461865a5042789927ed1"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_init_ddma" ref="1c5498d173c5461865a5042789927ed1" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dwc_otg_hcd_qh_init_ddma           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes a QH structure's Descriptor DMA related members. 
<p>
Allocates memory for descriptor list. On first periodic QH, allocates memory for FrameList and enables periodic scheduling.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure for the DWC OTG controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qh</em>&nbsp;</td><td>The QH to init.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if successful, negative error code otherwise. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__ddma_8c-source.html#l00294">294</a> of file <a class="el" href="dwc__otg__hcd__ddma_8c-source.html">dwc_otg_hcd_ddma.c</a>.
</div>
</div><p>
<a class="anchor" name="78738afd0ca62e394753f1cf196476c9"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_otg_hcd_qh_free_ddma" ref="78738afd0ca62e394753f1cf196476c9" args="(dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_otg_hcd_qh_free_ddma           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdwc__otg__hcd.html">dwc_otg_hcd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdwc__otg__qh.html">dwc_otg_qh_t</a> *&nbsp;</td>
          <td class="paramname"> <em>qh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Frees descriptor list memory associated with the QH. 
<p>
If QH is periodic and the last, frees FrameList memory and disables periodic scheduling.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hcd</em>&nbsp;</td><td>The HCD state structure for the DWC OTG controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qh</em>&nbsp;</td><td>The QH to init. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__hcd__ddma_8c-source.html#l00327">327</a> of file <a class="el" href="dwc__otg__hcd__ddma_8c-source.html">dwc_otg_hcd_ddma.c</a>.
</div>
</div><p>
<a class="anchor" name="02aa5e9853fcc705b9b5c839a249e2f8"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_frame_num_le" ref="02aa5e9853fcc705b9b5c839a249e2f8" args="(uint16_t frame1, uint16_t frame2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int dwc_frame_num_le           </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>frame1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>frame2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns true if _frame1 is less than or equal to _frame2. 
<p>
The comparison is done modulo DWC_HFNUM_MAX_FRNUM. This accounts for the rollover of the frame number when the max frame number is reached. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00708">708</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<a class="anchor" name="98e0d4310430b84fa660ab5f6e7c24b9"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_frame_num_gt" ref="98e0d4310430b84fa660ab5f6e7c24b9" args="(uint16_t frame1, uint16_t frame2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int dwc_frame_num_gt           </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>frame1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>frame2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns true if _frame1 is greater than _frame2. 
<p>
The comparison is done modulo DWC_HFNUM_MAX_FRNUM. This accounts for the rollover of the frame number when the max frame number is reached. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00719">719</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<a class="anchor" name="cb175759a6b2cd291eedc276c022b500"></a><!-- doxytag: member="dwc_otg_hcd.h::dwc_frame_num_inc" ref="cb175759a6b2cd291eedc276c022b500" args="(uint16_t frame, uint16_t inc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t dwc_frame_num_inc           </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>inc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Increments _frame by the amount specified by _inc. 
<p>
The addition is done modulo DWC_HFNUM_MAX_FRNUM. Returns the incremented value. 
<p>
Definition at line <a class="el" href="dwc__otg__hcd_8h-source.html#l00730">730</a> of file <a class="el" href="dwc__otg__hcd_8h-source.html">dwc_otg_hcd.h</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:49 2009 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
