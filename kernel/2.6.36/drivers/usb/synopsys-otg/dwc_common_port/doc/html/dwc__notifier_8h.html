<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Synopsys DWC Portability and Common Library for UWB: dwc_notifier.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_c13d72e45af28cdc461a5f284d3d36fc.html">dwc_common_port</a></div>
<h1>dwc_notifier.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
A simple implementation of the Observer pattern. 
<p>
Any "module" can register as an observer or notifier. The notion of "module" is abstract and can mean anything used to identify either an observer or notifier. Usually it will be a pointer to a data structure which contains some state, ie an object.<p>
Before any notifiers can be added, the global notification manager must be brought up with <a class="el" href="dwc__notifier_8h.html#3c217d779cc8121d911c60e33c36de5c">dwc_alloc_notification_manager()</a>. <a class="el" href="dwc__notifier_8h.html#dc9553444a56bfc595be08592af6dee4">dwc_free_notification_manager()</a> will bring it down and free all resources. These would typically be called upon module load and unload. The notification manager is a single global instance that handles all registered observable modules and observers so this should be done only once.<p>
A module can be observable by using Notifications to publicize some general information about it's state or operation. It does not care who listens, or even if anyone listens, or what they do with the information. The observable modules do not need to know any information about it's observers or their interface, or their state or data.<p>
Any module can register to emit Notifications. It should publish a list of notifications that it can emit and their behavior, such as when they will get triggered, and what information will be provided to the observer. Then it should register itself as an observable module. See <a class="el" href="dwc__notifier_8h.html#40c4a4ad1f3466a135f708be3929a548">dwc_register_notifier()</a>.<p>
Any module can observe any observable, registered module, provided it has a handle to the other module and knows what notifications to observe. See <a class="el" href="dwc__notifier_8h.html#2d1c0018894e606f7b123094fc363ddb">dwc_add_observer()</a>.<p>
A function of type dwc_notifier_callback_t is called whenever a notification is triggered with one or more observers observing it. This function is called in it's own process so it may sleep or block if needed. It is guaranteed to be called sometime after the notification has occurred and will be called once per each time the notification is triggered. It will NOT be called in the same process context used to trigger the notification.<h2><a class="anchor" name="Limitiations">
Limitiations</a></h2>
Keep in mind that Notifications that can be triggered in rapid sucession may schedule too many processes too handle. Be aware of this limitation when designing to use notifications, and only add notifications for appropriate observable information.<p>
Also Notification callbacks are not synchronous. If you need to synchronize the behavior between module/observer you must use other means. And perhaps that will mean Notifications are not the proper solution. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1df1148f04d1313a8e78fbe314959343"></a><!-- doxytag: member="dwc_notifier.h::dwc_notifier_t" ref="1df1148f04d1313a8e78fbe314959343" args="" -->
typedef dwc_notifier&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_notifier_t</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*)&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#a8a84ad74a90bea39597283487b9cbfb">dwc_notifier_callback_t</a> (void *object, char *notification, void *observer, void *notification_data, void *user_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The callback function must be of this type.  <a href="#a8a84ad74a90bea39597283487b9cbfb"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#3c217d779cc8121d911c60e33c36de5c">dwc_alloc_notification_manager</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Brings up the notification manager.  <a href="#3c217d779cc8121d911c60e33c36de5c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#dc9553444a56bfc595be08592af6dee4">dwc_free_notification_manager</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Brings down the notification manager.  <a href="#dc9553444a56bfc595be08592af6dee4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">dwc_notifier_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#40c4a4ad1f3466a135f708be3929a548">dwc_register_notifier</a> (void *object)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function register an observable module.  <a href="#40c4a4ad1f3466a135f708be3929a548"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#0b607aa63fc2ab69baffad75b9fa37f4">dwc_unregister_notifier</a> (dwc_notifier_t *notifier)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function unregister an observable module.  <a href="#0b607aa63fc2ab69baffad75b9fa37f4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#2d1c0018894e606f7b123094fc363ddb">dwc_add_observer</a> (void *observer, void *object, char *notification, <a class="el" href="dwc__notifier_8h.html#a8a84ad74a90bea39597283487b9cbfb">dwc_notifier_callback_t</a> callback, void *user_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a module as an observer to the observable module.  <a href="#2d1c0018894e606f7b123094fc363ddb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#0bb13b5ac4ae9a31c458b4bb03585c96">dwc_remove_observer</a> (void *observer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the specified observer from all notifications that it is currently observing.  <a href="#0bb13b5ac4ae9a31c458b4bb03585c96"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__notifier_8h.html#58997c4e097d7c148312b3e0b84915f3">dwc_notify</a> (dwc_notifier_t *notifier, char *notification, void *notification_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function triggers a Notification.  <a href="#58997c4e097d7c148312b3e0b84915f3"></a><br></td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a8a84ad74a90bea39597283487b9cbfb"></a><!-- doxytag: member="dwc_notifier.h::dwc_notifier_callback_t" ref="a8a84ad74a90bea39597283487b9cbfb" args="(void *object, char *notification, void *observer, void *notification_data, void *user_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(*) <a class="el" href="dwc__notifier_8h.html#a8a84ad74a90bea39597283487b9cbfb">dwc_notifier_callback_t</a>(void *object, char *notification, void *observer, void *notification_data, void *user_data)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The callback function must be of this type. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>This is the object that is being observed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notification</em>&nbsp;</td><td>This is the notification that was triggered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>observer</em>&nbsp;</td><td>This is the observer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notification_data</em>&nbsp;</td><td>This is notification-specific data that the notifier has included in this notification. The value of this should be published in the documentation of the observable module with the notifications. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data</em>&nbsp;</td><td>This is any custom data that the observer provided when adding itself as an observer to the notification. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="3c217d779cc8121d911c60e33c36de5c"></a><!-- doxytag: member="dwc_notifier.h::dwc_alloc_notification_manager" ref="3c217d779cc8121d911c60e33c36de5c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_alloc_notification_manager           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Brings up the notification manager. 
<p>

</div>
</div><p>
<a class="anchor" name="dc9553444a56bfc595be08592af6dee4"></a><!-- doxytag: member="dwc_notifier.h::dwc_free_notification_manager" ref="dc9553444a56bfc595be08592af6dee4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_free_notification_manager           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Brings down the notification manager. 
<p>

</div>
</div><p>
<a class="anchor" name="40c4a4ad1f3466a135f708be3929a548"></a><!-- doxytag: member="dwc_notifier.h::dwc_register_notifier" ref="40c4a4ad1f3466a135f708be3929a548" args="(void *object)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dwc_notifier_t* dwc_register_notifier           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>object</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function register an observable module. 
<p>
A dwc_notifier_t object is returned to the observable module. This is an opaque object that is used by the observable module to trigger notifications. This object should only be accessible to functions that are authorized to trigger notifications for this module. Observers do not need this object. 
</div>
</div><p>
<a class="anchor" name="0b607aa63fc2ab69baffad75b9fa37f4"></a><!-- doxytag: member="dwc_notifier.h::dwc_unregister_notifier" ref="0b607aa63fc2ab69baffad75b9fa37f4" args="(dwc_notifier_t *notifier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_unregister_notifier           </td>
          <td>(</td>
          <td class="paramtype">dwc_notifier_t *&nbsp;</td>
          <td class="paramname"> <em>notifier</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function unregister an observable module. 
<p>
All observers have to be removed prior to unregistration. 
</div>
</div><p>
<a class="anchor" name="2d1c0018894e606f7b123094fc363ddb"></a><!-- doxytag: member="dwc_notifier.h::dwc_add_observer" ref="2d1c0018894e606f7b123094fc363ddb" args="(void *observer, void *object, char *notification, dwc_notifier_callback_t callback, void *user_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dwc_add_observer           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>observer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>notification</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dwc__notifier_8h.html#a8a84ad74a90bea39597283487b9cbfb">dwc_notifier_callback_t</a>&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a module as an observer to the observable module. 
<p>
The observable module needs to have previously registered with the notification manager.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>observer</em>&nbsp;</td><td>The observer module </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>The module to observe </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notification</em>&nbsp;</td><td>The notification to observe </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>The callback function to call </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data</em>&nbsp;</td><td>Any additional user data to pass into the callback function </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="0bb13b5ac4ae9a31c458b4bb03585c96"></a><!-- doxytag: member="dwc_notifier.h::dwc_remove_observer" ref="0bb13b5ac4ae9a31c458b4bb03585c96" args="(void *observer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dwc_remove_observer           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>observer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes the specified observer from all notifications that it is currently observing. 
<p>

</div>
</div><p>
<a class="anchor" name="58997c4e097d7c148312b3e0b84915f3"></a><!-- doxytag: member="dwc_notifier.h::dwc_notify" ref="58997c4e097d7c148312b3e0b84915f3" args="(dwc_notifier_t *notifier, char *notification, void *notification_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dwc_notify           </td>
          <td>(</td>
          <td class="paramtype">dwc_notifier_t *&nbsp;</td>
          <td class="paramname"> <em>notifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>notification</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>notification_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function triggers a Notification. 
<p>
It should be called by the observable module, or any module or library which the observable module allows to trigger notification on it's behalf. Such as the dwc_cc_t.<p>
dwc_notify is a non-blocking function. Callbacks are scheduled called in their own process context for each trigger. Callbacks can be blocking. dwc_notify can be called from interrupt context if needed. 
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:50 2009 for Synopsys DWC Portability and Common Library for UWB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
